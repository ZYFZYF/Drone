

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fast RTPS 1.7.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'1.7.0',
              LANGUAGE:'en',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/fiware_readthedocs.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://fast-rtps.docs.eprosima.com/en/latest/" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'index'
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> Fast RTPS
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">Installation manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-requirements">Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#common-dependencies">Common Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#gtest">Gtest</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#java-gradle">Java &amp; Gradle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#windows-7-32-bit-and-64-bit">Windows 7 32-bit and 64-bit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#visual-c-2015-or-2017-redistributable-package">Visual C++ 2015 or 2017 Redistributable Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-binaries">Installation from Binaries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#windows-7-32-bit-and-64-bit">Windows 7 32-bit and 64-bit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#environmental-variables">Environmental Variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#linux">Linux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-sources">Installation from Sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#security">Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#openssl-installation-on-linux">OpenSSL installation on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#openssl-installation-on-windows">OpenSSL installation on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-introduction">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#a-brief-introduction-to-the-rtps-protocol">A brief introduction to the RTPS protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#building-your-first-application">Building your first application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-overview">Library Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#fast-rtps-architecture">Fast RTPS architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#threads">Threads</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#events">Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-list">Objects and Data Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#publisher-subscriber-module">Publisher-Subscriber Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#rtps-module">RTPS Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#rtps-common">RTPS Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#rtps-domain">RTPS Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#rtps-reader">RTPS Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#rtps-writer">RTPS Writer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pubsub">Publisher-Subscriber Layer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#how-to-use-the-publisher-subscriber-layer">How to use the Publisher-Subscriber Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#participant-configuration">Participant configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#publisher-and-subscriber-configuration">Publisher and Subscriber configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#topic-information">Topic information</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#reliability">Reliability</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#history">History</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#durability">Durability</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#resource-limits">Resource limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#unicast-locators">Unicast locators</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#multicast-locators">Multicast locators</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#additional-concepts">Additional Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#using-message-meta-data">Using message meta-data</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#defining-callbacks">Defining callbacks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-rtps">Writer-Reader Layer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#relation-to-the-publisher-subscriber-layer">Relation to the Publisher-Subscriber Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#how-to-use-the-writer-reader-layer">How to use the Writer-Reader Layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#managing-the-participant">Managing the Participant</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#managing-the-writers-and-readers">Managing the Writers and Readers</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#using-the-history-to-send-and-receive-data">Using the History to Send and Receive Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuring-readers-and-writers">Configuring Readers and Writers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#setting-the-data-durability-kind">Setting the data durability kind</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuring-the-history">Configuring the History</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#changing-the-maximum-size-of-the-payload">Changing the maximum size of the payload</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#changing-the-size-of-the-history">Changing the size of the History</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-advanced">Advanced Functionalities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#topics-and-keys">Topics and Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#transports">Transports</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#tcp-transport">TCP Transport</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#wan-or-internet-communication-over-tcp-ipv4">WAN or Internet Communication over TCP/IPv4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#listening-locators">Listening locators</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#initial-peers">Initial peers</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#whitelist-interfaces">Whitelist Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#tips">Tips</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#flow-controllers">Flow Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sending-large-data">Sending large data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#example-sending-a-unique-large-file">Example: Sending a unique large file</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#example-video-streaming">Example: Video streaming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#discovery">Discovery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#static-endpoints-discovery">Static Endpoints Discovery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subscribing-to-discovery-topics">Subscribing to Discovery Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tuning">Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#taking-advantage-of-multicast">Taking advantage of multicast</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#increasing-socket-buffers-size">Increasing socket buffers size</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#finding-out-system-maximum-values">Finding out system maximum values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#tuning-reliable-mode">Tuning Reliable mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#non-strict-reliability">Non-strict reliability</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#slow-down-sample-rate">Slow down sample rate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#additional-quality-of-service-options">Additional Quality of Service options</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#logconsumers">LogConsumers</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#xml-log-configuration">XML Log configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-security">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#authentication-plugins">Authentication plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#access-control-plugins">Access control plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cryptographic-plugins">Cryptographic plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#built-in-plugins">Built-in plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#auth-pki-dh">Auth:PKI-DH</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#generation-of-x509-certificates">Generation of x509 certificates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#access-permissions">Access:Permissions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="index.html#permissions-ca-certificate">Permissions CA Certificate</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#domain-governance-document">Domain Governance Document</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#domain-rules">Domain Rules</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#domains-element">Domains element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#allow-unauthenticated-participants-element">Allow Unauthenticated Participants element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#enable-join-access-control-element">Enable Join Access Control element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#discovery-protection-kind-element">Discovery Protection Kind element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#liveliness-protection-kind-element">Liveliness Protection Kind element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#rtps-protection-kind-element">RTPS Protection Kind element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#topic-rule-section">Topic Rule Section</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#topic-expression-element">Topic expression element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#enable-discovery-protection-element">Enable Discovery protection element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#enable-liveliness-protection-element">Enable Liveliness Protection element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#enable-read-access-control-element">Enable Read Access Control element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#enable-write-access-control-element">Enable Write Access Control element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#metadata-protection-kind-element">Metadata Protection Kind element</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#data-protection-kind-element">Data Protection Kind element</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="index.html#participant-permissions-document">Participant permissions document</a><ul>
<li class="toctree-l5"><a class="reference internal" href="index.html#grant-section">Grant Section</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#subject-name">Subject name</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#validity">Validity</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#rules">Rules</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#id4">Domains Section</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#format-of-the-allowed-denied-actions-sections">Format of the Allowed/Denied Actions sections</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#topics-condition">Topics condition</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#partitions-condition">Partitions condition</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="index.html#signing-documents-using-x509-certificate">Signing documents using x509 certificate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#crypto-aes-gcm-gmac">Crypto:AES-GCM-GMAC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#example-configuring-the-participant">Example: configuring the <code class="docutils literal notranslate"><span class="pre">Participant</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-dynamictypes">Dynamic Topic Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#concepts">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#supported-types">Supported Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#primitive-types">Primitive Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#string-and-wstring">String and WString</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#alias">Alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#enumeration">Enumeration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bitset">Bitset</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#bitmask">Bitmask</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#union">Union</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#sequence">Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#array">Array</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#map">Map</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#complex-examples">Complex examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#nested-structures">Nested structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#structures-inheritance">Structures inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#alias-of-an-alias">Alias of an alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#unions-with-complex-types">Unions with complex types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#serialization">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#important-notes">Important Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dynamic-types-discovery-and-endpoint-matching">Dynamic Types Discovery and Endpoint Matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#topicdiscoverykind">TopicDiscoveryKind</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#typeobject-typeobjectv1">TypeObject (TypeObjectV1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#typeidentifier-typeidv1">TypeIdentifier (TypeIdV1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#typeobjectfactory">TypeObjectFactory</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#fastrtpsgen">Fastrtpsgen</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#xml-dynamic-types">XML Dynamic Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-persistence">Persistence</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#built-in-plugins">Built-in plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#persistence-sqlite3">PERSISTENCE:SQLITE3</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-xmlprofiles">XML profiles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#making-an-xml">Making an XML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#loading-and-applying-profiles">Loading and applying profiles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#transport-descriptors">Transport descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#xml-dynamic-types">XML Dynamic Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#xml-structure">XML Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#type-definition">Type definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#member-types">Member types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#participant-profiles">Participant profiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#built-in-parameters">Built-in parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#publisher-profiles">Publisher profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subscriber-profiles">Subscriber profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#common">Common</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#locatorlisttype">LocatorListType</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#propertiespolicytype">PropertiesPolicyType</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#durationtype">DurationType</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#topic-type">Topic Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#qos">QOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#livelinesstype">LivelinessType</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#throughput-configuration">Throughput Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-fastrtpsgen">Code generation using fastrtpsgen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#output">Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#where-to-find-fastrtpsgen">Where to find <em>fastrtpsgen</em></a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">FastRTPSGen Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-geninfo">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#compile">Compile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-genuse">Execution and IDL Definition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#building-publisher-subscriber-code">Building publisher/subscriber code</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#defining-a-data-type-via-idl">Defining a data type via IDL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#arrays">Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#sequences">Sequences</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#structures">Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#unions">Unions</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#enumerations">Enumerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#keyed-types">Keyed Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#including-other-idl-files">Including other IDL files</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-notes">Version 1.7.1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#previous-versions">Previous versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-7-0">Version 1.7.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-6-0">Version 1.6.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-5-0">Version 1.5.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-4-0">Version 1.4.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-3-1">Version 1.3.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-3-0">Version 1.3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#version-1-2-0">Version 1.2.0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">Fast RTPS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>Fast RTPS 1.7.0 documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/eProsima/Fast-RTPS-docs/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="eprosima-fast-rtps-documentation">
<h1>eProsima Fast RTPS Documentation<a class="headerlink" href="#eprosima-fast-rtps-documentation" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="http://www.eprosima.com/"><img alt="eProsima" class="align-left" src="_images/logo.png" style="width: 100px; height: 100px;" /></a>
<p><em>eprosima Fast RTPS</em> is a C++ implementation of the RTPS (Real Time Publish-Subscribe) protocol, which provides
publisher-subscriber communications over unreliable transports such as UDP,
as defined and maintained by the Object Management Group (OMG) consortium.
RTPS is also the wire interoperability protocol defined for the Data Distribution Service (DDS) standard, again by the
OMG.
<em>eProsima Fast RTPS</em> holds the benefit of being standalone and up-to-date, as most vendor solutions either implement
RTPS as a tool to implement DDS or use past versions of the specification.</p>
<p>Some of the main features of this library are:</p>
<ul class="simple">
<li>Configurable best-effort and reliable publish-subscribe communication policies for real-time applications.</li>
<li>Plug and play connectivity so that any new applications are automatically discovered by any other members of the
network.</li>
<li>Modularity and scalability to allow continuous growth with complex and simple devices in the network.</li>
<li>Configurable network behavior and interchangeable transport layer: Choose the best protocol and system input/output
channel combination for each deployment.</li>
<li>Two API Layers: a high-level Publisher-Subscriber one focused on usability and a lower-level Writer-Reader one that
provides finer access to the inner workings of the RTPS protocol.</li>
</ul>
<p>eProsima Fast RTPS has been adopted by multiple organizations in many sectors including these important cases:</p>
<ul class="simple">
<li>Robotics: ROS (Robotic Operating System) as their default middleware for ROS2.</li>
<li>EU R&amp;D: FIWARE Incubated GE.</li>
</ul>
<p>This documentation is organized into the following sections:</p>
<ul class="simple">
<li><a class="reference internal" href="#installation"><span class="std std-ref">Installation manual</span></a></li>
<li><a class="reference internal" href="#user"><span class="std std-ref">User Manual</span></a></li>
<li><a class="reference internal" href="#gen"><span class="std std-ref">FastRTPSGen Manual</span></a></li>
<li><a class="reference internal" href="#notes"><span class="std std-ref">Release Notes</span></a></li>
</ul>
<div class="toctree-wrapper compound" id="installation">
<span id="document-requirements"></span><div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p><em>eProsima Fast RTPS</em> requires the following packages to work.</p>
<div class="section" id="common-dependencies">
<h3>Common Dependencies<a class="headerlink" href="#common-dependencies" title="Permalink to this headline">¶</a></h3>
<div class="section" id="gtest">
<h4>Gtest<a class="headerlink" href="#gtest" title="Permalink to this headline">¶</a></h4>
<p>Gtest is needed to compile the tests when building from sources.</p>
</div>
<div class="section" id="java-gradle">
<h4>Java &amp; Gradle<a class="headerlink" href="#java-gradle" title="Permalink to this headline">¶</a></h4>
<p>Java &amp; gradle is required to make use of our built-in code generation tool <em>fastrtpsgen</em>
(see <a class="reference internal" href="index.html#compile-fastrtpsgen"><span class="std std-ref">Compile</span></a>).</p>
</div>
</div>
<div class="section" id="windows-7-32-bit-and-64-bit">
<h3>Windows 7 32-bit and 64-bit<a class="headerlink" href="#windows-7-32-bit-and-64-bit" title="Permalink to this headline">¶</a></h3>
<div class="section" id="visual-c-2015-or-2017-redistributable-package">
<h4>Visual C++ 2015 or 2017 Redistributable Package<a class="headerlink" href="#visual-c-2015-or-2017-redistributable-package" title="Permalink to this headline">¶</a></h4>
<p><em>eProsima Fast RTPS</em> requires the Visual C++ Redistributable packages for the Visual Studio version you choose during
the installation or compilation.
The installer gives you the option of downloading and installing them.</p>
</div>
</div>
</div>
<span id="document-binaries"></span><div class="section" id="installation-from-binaries">
<h2>Installation from Binaries<a class="headerlink" href="#installation-from-binaries" title="Permalink to this headline">¶</a></h2>
<p>You can always download the latest binary release of <em>eProsima Fast RTPS</em> from the <a class="reference external" href="http://www.eprosima.com/">company website</a>.</p>
<div class="section" id="windows-7-32-bit-and-64-bit">
<h3>Windows 7 32-bit and 64-bit<a class="headerlink" href="#windows-7-32-bit-and-64-bit" title="Permalink to this headline">¶</a></h3>
<p>Execute the installer and follow the instructions, choosing your preferred Visual Studio version and architecture when
prompted.</p>
<div class="section" id="environmental-variables">
<h4>Environmental Variables<a class="headerlink" href="#environmental-variables" title="Permalink to this headline">¶</a></h4>
<p><em>eProsima Fast RTPS</em> requires the following environmental variable setup in order to function properly</p>
<ul class="simple">
<li>FASTRTPSHOME: Root folder where <em>eProsima Fast RTPS</em> is installed.</li>
<li>Additions to the PATH: the /bin folder and the subfolder for your Visual Studio version of choice should be appended
to the PATH.</li>
</ul>
<p>These variables are set automatically by checking the corresponding box during the installation process.</p>
</div>
</div>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>Extract the contents of the package.
It will contain both <em>eProsima Fast RTPS</em> and its required package <em>eProsima Fast CDR</em>.
You will have to follow the same procedure for both packages, starting with <em>Fast CDR</em>.</p>
<p>Configure the compilation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./configure --libdir=/usr/lib
</pre></div>
</div>
<p>If you want to compile with debug symbols (which also enables verbose mode):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./configure CXXFLAGS=&quot;-g -D__DEBUG&quot;  --libdir=/usr/lib
</pre></div>
</div>
<p>After configuring the project compile and install the library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo make install
</pre></div>
</div>
</div>
</div>
<span id="document-sources"></span><div class="section" id="installation-from-sources">
<span id="id1"></span><h2>Installation from Sources<a class="headerlink" href="#installation-from-sources" title="Permalink to this headline">¶</a></h2>
<p>Clone the project from Github:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/eProsima/Fast-RTPS
$ mkdir Fast-RTPS/build &amp;&amp; cd Fast-RTPS/build
</pre></div>
</div>
<p>If you are on Linux, execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -DTHIRDPARTY=ON ..
$ make
$ sudo make install
</pre></div>
</div>
<p>If you are on Windows, choose your version of Visual Studio using CMake option <em>-G</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cmake</span> <span class="o">-</span><span class="n">G</span> <span class="s2">&quot;Visual Studio 15 2017 Win64&quot;</span> <span class="o">-</span><span class="n">DTHIRDPARTY</span><span class="o">=</span><span class="n">ON</span> <span class="o">..</span>
<span class="o">&gt;</span> <span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">target</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you want to compile <em>fastrtpsgen</em> java application, you will need to add the argument <code class="docutils literal notranslate"><span class="pre">-DBUILD_JAVA=ON</span></code> when
calling CMake (see <a class="reference internal" href="index.html#compile-fastrtpsgen"><span class="std std-ref">Compile</span></a>).</p>
<p>If you want to compile the examples, you will need to add the argument <code class="docutils literal notranslate"><span class="pre">-DCOMPILE_EXAMPLES=ON</span></code> when calling CMake.</p>
<p>If you want to compile the performance tests, you will need to add the argument <code class="docutils literal notranslate"><span class="pre">-DPERFORMANCE_TESTS=ON</span></code> when calling
CMake.</p>
<p>For generate <em>fastrtpsgen</em> please see <a class="reference internal" href="index.html#compile-fastrtpsgen"><span class="std std-ref">Compile</span></a>.</p>
<div class="section" id="security">
<h3>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<p>By default, Fast RTPS doesn’t compile security support. You can activate it adding <code class="docutils literal notranslate"><span class="pre">-DSECURITY=ON</span></code> at CMake
configuration step.
More information about security on Fast RTPS, see <a class="reference internal" href="index.html#security"><span class="std std-ref">Security</span></a>.</p>
<p>When security is activated on compilation Fast RTPS builds several built-in security plugins.
Some of them have the dependency of OpenSSL library.</p>
<div class="section" id="openssl-installation-on-linux">
<h4>OpenSSL installation on Linux<a class="headerlink" href="#openssl-installation-on-linux" title="Permalink to this headline">¶</a></h4>
<p>Surely you can install OpenSSL using the package manager of your Linux distribution. For example, on Fedora you can
install OpenSSL using its package manager with next command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install openssl-devel
</pre></div>
</div>
</div>
<div class="section" id="openssl-installation-on-windows">
<h4>OpenSSL installation on Windows<a class="headerlink" href="#openssl-installation-on-windows" title="Permalink to this headline">¶</a></h4>
<p>You can download OpenSSL 1.0.2 for Windows in this <a class="reference external" href="https://slproweb.com/products/Win32OpenSSL.html">webpage</a>. This is the OpenSSL version tested by our team.
Download and use the installer that fits your requirements. After installing, add the environment variable
<code class="docutils literal notranslate"><span class="pre">OPENSSL_ROOT_DIR</span></code> pointing to the installation root directory. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">OPENSSL_ROOT_DIR</span><span class="o">=</span>C:<span class="se">\O</span>penSSL-Win64
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound" id="user">
<span id="document-introduction"></span><div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="a-brief-introduction-to-the-rtps-protocol">
<h3>A brief introduction to the RTPS protocol<a class="headerlink" href="#a-brief-introduction-to-the-rtps-protocol" title="Permalink to this headline">¶</a></h3>
<p>At the top of RTPS, we find the Domain, which defines a separate plane of communication.
Several domains can coexist at the same time independently.
A domain contains any number of Participants, elements capable of sending and receiving data.
To do this, the participants use their Endpoints:</p>
<ul class="simple">
<li>Reader: Endpoint able to receive data.</li>
<li>Writer: Endpoint able to send data.</li>
</ul>
<p>A Participant can have any number of writer and reader endpoints.</p>
<img alt="_images/RTPS-structure.png" src="_images/RTPS-structure.png" />
<p>Communication revolves around Topics, which define the data being exchanged.
Topics don’t belong to any participant in particular; instead, all interested participants keep track of changes to the
topic data and make sure to keep each other up to date.
The unit of communication is called a Change, which represents an update to a topic.
Endpoints register these changes on their History, a data structure that serves as a cache for recent changes.
When you publish a change through a writer endpoint, the following steps happen behind the scenes:</p>
<ul class="simple">
<li>The change is added to the writer’s history cache.</li>
<li>The writer informs any readers it knows about.</li>
<li>Any interested (subscribed) readers request the change.</li>
<li>After receiving data, readers update their history cache with the new change.</li>
</ul>
<p>By choosing Quality of Service policies, you can affect how these history caches are managed in several ways, but the
communication loop remains the same. You can read more information in <a class="reference internal" href="index.html#configuration"><span class="std std-ref">Configuration</span></a>.</p>
</div>
<div class="section" id="building-your-first-application">
<h3>Building your first application<a class="headerlink" href="#building-your-first-application" title="Permalink to this headline">¶</a></h3>
<p>To build a minimal application, you must first define the topic. To define the data type of the topic Fast-RTPS offers
two different approaches, dynamically through <a class="reference internal" href="index.html#dynamic-types"><span class="std std-ref">Dynamic Topic Types</span></a> and statically through
Interface Definition Language (IDL). In this example, we will define the data type statically with IDL,
you have more information about IDL in <a class="reference internal" href="index.html#fastrtpsgen-intro"><span class="std std-ref">Introduction</span></a>.</p>
<p>Write an IDL file containing the specification you want. In this case, a single string is sufficient.</p>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> HelloWorld.idl
struct HelloWorld
{
    <span class="nb">string</span> msg;
};
</pre></div>
</div>
<p>Now we need to translate this file to something Fast RTPS understands. For this we have a code generation tool called
fastrtpsgen (see <a class="reference internal" href="index.html#fastrtpsgen-intro"><span class="std std-ref">Introduction</span></a>), which can do two different things:</p>
<ul class="simple">
<li>Generate C++ definitions for your custom topic.</li>
<li>Optionally, generate a working example that uses your topic data.</li>
</ul>
<p>You may want to check out the fastrtpsgen user manual, which comes with the distribution of the library.
But for now, the following commands will do:</p>
<p>On Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastrtpsgen</span> <span class="o">-</span><span class="n">example</span> <span class="n">CMake</span> <span class="n">HelloWorld</span><span class="o">.</span><span class="n">idl</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastrtpsgen</span><span class="o">.</span><span class="n">bat</span> <span class="o">-</span><span class="n">example</span> <span class="n">CMake</span> <span class="n">HelloWorld</span><span class="o">.</span><span class="n">idl</span>
</pre></div>
</div>
<p>The <cite>-example</cite> option creates an example application, and the files needed to build it.</p>
<p>On Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">..</span>
<span class="n">make</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">G</span> <span class="s2">&quot;Visual Studio 15 2017 Win64&quot;</span> <span class="o">..</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span>
</pre></div>
</div>
<p>The application build can be used to spawn any number of publishers and subscribers associated with your topic.</p>
<p>On Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">HelloWorldPublisherSubscriber</span> <span class="n">publisher</span>
<span class="o">./</span><span class="n">HelloWorldPublisherSubscriber</span> <span class="n">subscriber</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldPublisherSubscriber</span><span class="o">.</span><span class="n">exe</span> <span class="n">publisher</span>
<span class="n">HelloWorldPublisherSubscriber</span><span class="o">.</span><span class="n">exe</span> <span class="n">subscriber</span>
</pre></div>
</div>
<p>You may need to set up a special rule in your Firewall for <em>eprosima Fast RTPS</em> to work correctly on Windows.</p>
<p>Each time you press &lt;Enter&gt; on the Publisher, a new datagram is generated, sent over the network
and receiver by Subscribers currently online. If more than one subscriber is available, it can be seen that the
message is equally received on all listening nodes.</p>
<p>You can modify any values on your custom, IDL-generated data type before sending.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorld</span> <span class="n">sample</span><span class="p">;</span> <span class="c1">//Auto-generated container class for topic data from FastRTPSGen</span>
<span class="n">sample</span><span class="p">.</span><span class="n">msg</span><span class="p">(</span><span class="s">&quot;Hello there!&quot;</span><span class="p">);</span> <span class="c1">// Add contents to the message</span>
<span class="n">publisher</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sample</span><span class="p">);</span> <span class="c1">//Publish</span>
</pre></div>
</div>
<p>Take a look at the <cite>examples/</cite> folder for ideas on how to improve this basic application through different configuration
options, and for examples of advanced Fast RTPS features.</p>
</div>
</div>
<span id="document-overview"></span><div class="section" id="library-overview">
<h2>Library Overview<a class="headerlink" href="#library-overview" title="Permalink to this headline">¶</a></h2>
<p>You can interact with Fast RTPS at two different levels:</p>
<ul class="simple">
<li>Publisher-Subscriber: Simplified abstraction over RTPS.</li>
<li>Writer-Reader: Direct control over RTPS endpoints.</li>
</ul>
<img alt="_images/architecture.png" src="_images/architecture.png" />
<p>In red, the Publisher-Subscriber layer offers a convenient abstraction for most use cases.
It allows you to define Publishers and Subscribers associated with a topic, and a simple way to transmit topic data.
You may remember this from the example we generated in the “Getting Started” section, where we updated our local copy
of the topic data, and called a write() method on it.
In blue, the Writer-Reader layer is closer to the concepts defined in the RTPS standard, and allows a finer control,
but requires you to interact directly with history caches for each endpoint.</p>
<div class="section" id="fast-rtps-architecture">
<h3>Fast RTPS architecture<a class="headerlink" href="#fast-rtps-architecture" title="Permalink to this headline">¶</a></h3>
<div class="section" id="threads">
<h4>Threads<a class="headerlink" href="#threads" title="Permalink to this headline">¶</a></h4>
<p>eProsima Fast RTPS is concurrent and event-based.
Each participant spawns a set of threads to take care of background tasks such as logging, message reception, and
asynchronous communication.
This should not impact the way you use the library: the public API is thread safe, so you can fearlessly call any
methods on the same participant from different threads.
However, it is still useful to know how Fast RTPS schedules work:</p>
<ul class="simple">
<li>Main thread: Managed by the application.</li>
<li>Event thread: Each participant owns one of these, and it processes periodic and triggered events.</li>
<li>Asynchronous writer thread: This thread manages asynchronous writes for all participants.
Even for synchronous writers, some forms of communication must be initiated in the background.</li>
<li>Reception threads: Participants spawn a thread for each reception channel, where the concept of a channel depends on
the transport layer (e.g. a UDP port).</li>
</ul>
</div>
<div class="section" id="events">
<h4>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h4>
<p>There is an event system that enables Fast RTPS to respond to certain conditions, as well as schedule periodic
activities.
Few of them are visible to the user since most are related to RTPS metadata.
However, you can define your own periodic events by inheriting from the TimedEvent class.</p>
</div>
</div>
</div>
<span id="document-list"></span><div class="section" id="objects-and-data-structures">
<h2>Objects and Data Structures<a class="headerlink" href="#objects-and-data-structures" title="Permalink to this headline">¶</a></h2>
<p>In order to make the most of <em>eProsima Fast RTPS</em> it is important to have a grasp of the objects and data structures
included in the library.
<em>eProsima Fast RTPS</em> objects are classified by modules, which are briefly listed and described in this section.
For full coverage take a look at the API Reference document that comes with the distribution.</p>
<div class="section" id="publisher-subscriber-module">
<h3>Publisher-Subscriber Module<a class="headerlink" href="#publisher-subscriber-module" title="Permalink to this headline">¶</a></h3>
<p>This module composes the Publisher-Subscriber abstraction we saw in the Library Overview.
The concepts here are higher level than the RTPS standard.</p>
<ul>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">Domain</span></code> Used to create, manage and destroy high-level Participants.</p>
</li>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code> Contains Publishers and Subscribers, and manages their configuration.</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticipantAttributes</span></code> Configuration parameters used in the creation of a Participant.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticipantListener</span></code> Allows you to implement callbacks within the scope of the Participant.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code> Sends (publishes) data in the form of topic changes.</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">PublisherAttributes</span></code> Configuration parameters for the construction of a Publisher.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">PublisherListener</span></code> Allows you to implement callbacks within the scope of the Publisher.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code> Receives data for the topics it subscribes to.</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriberAttributes</span></code> Configuration parameters for the construction of a Subscriber.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriberListener</span></code> Allows you to implement callbacks within the scope of the Subscriber.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="rtps-module">
<h3>RTPS Module<a class="headerlink" href="#rtps-module" title="Permalink to this headline">¶</a></h3>
<p>This module directly maps to the ideas defined in the RTPS standard and allows you to interact with RTPS entities
directly.
It consists of a few sub-modules:</p>
<div class="section" id="rtps-common">
<h4>RTPS Common<a class="headerlink" href="#rtps-common" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheChange_t</span></code> Represents a change to a topic, to be stored in a history cache.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code> Payload associated with a cache change. It may be empty depending on the message and change type.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> Defines the organization of an RTPS Message.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">Header</span></code> Standard header that identifies a message as belonging to the RTPS protocol, and includes the vendor
id.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">Sub-Message</span> <span class="pre">Header</span></code> Identifier for an RTPS sub-message. An RTPS Message can be composed of several
sub-messages.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">MessageReceiver</span></code> Deserializes and processes received RTPS messages.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSMessageCreator</span></code> Composes RTPS messages.</li>
</ul>
</div>
<div class="section" id="rtps-domain">
<h4>RTPS Domain<a class="headerlink" href="#rtps-domain" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSDomain</span></code> Use it to create, manage and destroy low-level RTPSParticipants.</p>
</li>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSParticipant</span></code> Contains RTPS Writers and Readers, and manages their configuration.</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSParticipantAttributes</span></code> Configuration parameters used in the creation of an RTPS Participant.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">PDPSimple</span></code> Allows the participant to become aware of the other participants within the Network, through
the Participant Discovery Protocol.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">EDPSimple</span></code> Allows the Participant to become aware of the endpoints (RTPS Writers and Readers) present in
the other Participants within the network, through the Endpoint Discovery Protocol.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">EDPStatic</span></code> Reads information about remote endpoints from a user file.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedEvent</span></code>  Base class for periodic or timed events.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="rtps-reader">
<h4>RTPS Reader<a class="headerlink" href="#rtps-reader" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSReader</span></code> Base class for the reader endpoint.</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaderAttributes</span></code> Configuration parameters used in the creation of an RTPS Reader.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaderHistory</span></code> History data structure. Stores recent topic changes.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ReaderListener</span></code> Use it to define callbacks in scope of the Reader.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="rtps-writer">
<h4>RTPS Writer<a class="headerlink" href="#rtps-writer" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSWriter</span></code> Base class for the writer endpoint.</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">WriterAttributes</span></code> Configuration parameters used in the creation of an RTPS Writer.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">WriterHistory</span></code> History data structure. Stores outgoing topic changes and schedules them to be sent.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>
<span id="document-pubsub"></span><div class="section" id="publisher-subscriber-layer">
<h2>Publisher-Subscriber Layer<a class="headerlink" href="#publisher-subscriber-layer" title="Permalink to this headline">¶</a></h2>
<p><em>eProsima Fast RTPS</em> provides a high-level Publisher-Subscriber Layer, which is a simple to use abstraction over the
RTPS protocol.
By using this layer, you can code a straight-to-the-point application while letting the library take care of the lower
level configuration.</p>
<div class="section" id="how-to-use-the-publisher-subscriber-layer">
<h3>How to use the Publisher-Subscriber Layer<a class="headerlink" href="#how-to-use-the-publisher-subscriber-layer" title="Permalink to this headline">¶</a></h3>
<p>We are going to use the example built in the previous section to explain how this layer works.</p>
<p>The first step is to create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code> instance, which will act as a container for the Publishers and
Subscribers our application needs. For this we use <code class="xref py py-class docutils literal notranslate"><span class="pre">Domain</span></code>, a static class that manages RTPS entities.
We also need to pass a configuration structure for the Participant, which can be left in its default configuration for
now:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ParticipantAttributes</span> <span class="n">participant_attr</span><span class="p">;</span> <span class="c1">//Configuration structure</span>
<span class="n">Participant</span> <span class="o">*</span><span class="n">participant</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createParticipant</span><span class="p">(</span><span class="n">participant_attr</span><span class="p">);</span>
</pre></div>
</div>
<p>The default configuration provides a basic working set of options with predefined ports for communications.
During this tutorial, you will learn to tune <em>eProsima Fast RTPS</em>.</p>
<p>In order to use our topic, we have to register it within the <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code> using the code generated with
<em>fastrtpsgen</em> (see <a class="reference internal" href="index.html#fastrtpsgen-intro"><span class="std std-ref">Introduction</span></a>.
Once again, this is done by using the <code class="xref py py-class docutils literal notranslate"><span class="pre">Domain</span></code> class:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldPubSubType</span> <span class="n">m_type</span><span class="p">;</span> <span class="c1">//Auto-generated type from FastRTPSGen</span>
<span class="n">Domain</span><span class="o">::</span><span class="n">registerType</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">m_type</span><span class="p">);</span>
</pre></div>
</div>
<p>Once set up, we instantiate a <code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code> within our <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PublisherAttributes</span> <span class="n">publisher_attr</span><span class="p">;</span> <span class="c1">//Configuration structure</span>
<span class="n">PubListener</span> <span class="n">publisher_listener</span><span class="p">;</span> <span class="c1">//Class that implements callbacks from the publisher</span>
<span class="n">Publisher</span> <span class="o">*</span><span class="n">publisher</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createPublisher</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="n">publisher_attr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">publisher_listener</span><span class="p">);</span>
</pre></div>
</div>
<p>Once the <code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code> is functional, posting data is a simple process:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorld</span> <span class="n">sample</span><span class="p">;</span> <span class="c1">//Auto-generated container class for topic data from FastRTPSGen</span>
<span class="n">sample</span><span class="p">.</span><span class="n">msg</span><span class="p">(</span><span class="s">&quot;Hello there!&quot;</span><span class="p">);</span> <span class="c1">// Add contents to the message</span>
<span class="n">publisher</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sample</span><span class="p">);</span> <span class="c1">//Publish</span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code> has a set of optional callback functions that are triggered when events happen.
An example is when a <code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code> starts listening to our topic.</p>
<p>To implement these callbacks we create the class <code class="xref py py-class docutils literal notranslate"><span class="pre">PubListener</span></code>, which inherits from the base class
<code class="xref py py-class docutils literal notranslate"><span class="pre">PublisherListener</span></code>.
We pass an instance to this class during the creation of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PubListener</span> <span class="o">:</span> <span class="k">public</span> <span class="n">PublisherListener</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>

        <span class="n">PubListener</span><span class="p">()</span> <span class="p">{}</span>
        <span class="o">~</span><span class="n">PubListener</span><span class="p">()</span> <span class="p">{}</span>

        <span class="kt">void</span> <span class="n">onPublicationmatched</span><span class="p">(</span><span class="n">Publisher</span><span class="o">*</span> <span class="n">pub</span><span class="p">,</span> <span class="n">MatchingInfo</span><span class="o">&amp;</span> <span class="n">info</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//Callback implementation. This is called each time the Publisher finds a Subscriber on the network that listens to the same topic.</span>
        <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code> creation and implementation are symmetric.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">SubscriberAttributes</span> <span class="n">subscriber_attr</span><span class="p">;</span> <span class="c1">//Configuration structure</span>
<span class="n">SubListener</span> <span class="n">subscriber_listener</span><span class="p">;</span> <span class="c1">//Class that implements callbacks from the Subscriber</span>
<span class="n">Subscriber</span> <span class="o">*</span><span class="n">subscriber</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createSubscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="n">subscriber_attr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">subscriber_listener</span><span class="p">);</span>
</pre></div>
</div>
<p>Incoming messages are processed within the callback that is called when a new message is received:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SubListener</span><span class="o">:</span> <span class="k">public</span> <span class="n">SubscriberListener</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>

        <span class="n">SubListener</span><span class="p">()</span> <span class="p">{}</span>

        <span class="o">~</span><span class="n">SubListener</span><span class="p">()</span> <span class="p">{}</span>

        <span class="kt">void</span> <span class="n">onNewDataMessage</span><span class="p">(</span><span class="n">Subscriber</span> <span class="o">*</span> <span class="n">sub</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">sub</span><span class="o">-&gt;</span><span class="n">takeNextData</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">sample</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sample_info</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">sample_info</span><span class="p">.</span><span class="n">sampleKind</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;New message: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sample</span><span class="p">.</span><span class="n">msg</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">HelloWorld</span> <span class="n">sample</span><span class="p">;</span> <span class="c1">//Storage for incoming messages</span>

        <span class="n">SampleInfo_t</span> <span class="n">sample_info</span><span class="p">;</span> <span class="c1">//Auxiliary structure with meta-data on the message</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<span id="id1"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p><em>eProsima Fast RTPS</em> entities can be configured through the code or XML profiles.
This section will show both alternatives.</p>
<div class="section" id="participant-configuration">
<span id="participantconfiguration"></span><h4>Participant configuration<a class="headerlink" href="#participant-configuration" title="Permalink to this headline">¶</a></h4>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code> can be configured via the <code class="xref py py-class docutils literal notranslate"><span class="pre">ParticipantAttributes</span></code> structure.
<code class="docutils literal notranslate"><span class="pre">createParticipant</span></code> function accepts an instance of this structure.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ParticipantAttributes</span> <span class="n">participant_attr</span><span class="p">;</span>

<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">&quot;my_participant&quot;</span><span class="p">);</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">domainId</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span>

<span class="n">Participant</span> <span class="o">*</span><span class="n">participant</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createParticipant</span><span class="p">(</span><span class="n">participant_attr</span><span class="p">);</span>
</pre></div>
</div>
<p>Also, it can be configured through an XML profile.
<code class="docutils literal notranslate"><span class="pre">createParticipant</span></code> function accepts a name of an XML profile.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Participant</span> <span class="o">*</span><span class="n">participant</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createParticipant</span><span class="p">(</span><span class="s">&quot;participant_xml_profile&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>About XML profiles you can learn more in <a class="reference internal" href="index.html#xml-profiles"><span class="std std-ref">XML profiles</span></a>.
This is an example of a participant XML profile.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;participant_xml_conf_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;name&gt;</span>my_participant<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;builtin&gt;</span>
            <span class="nt">&lt;domainId&gt;</span>80<span class="nt">&lt;/domainId&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
<p>We will now go over the most common configuration options.</p>
<ul>
<li><p class="first"><strong>Participant name:</strong> the name of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code> forms part of the meta-data of the RTPS protocol.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">&quot;my_participant&quot;</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;participant_xml_conf_name_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;name&gt;</span>my_participant<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><strong>DomainId:</strong> Publishers and Subscribers can only talk to each other if their Participants belong to the same
DomainId.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">domainId</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;participant_xml_conf_domain_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;builtin&gt;</span>
            <span class="nt">&lt;domainId&gt;</span>80<span class="nt">&lt;/domainId&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section" id="publisher-and-subscriber-configuration">
<span id="pubsubconfiguration"></span><h4>Publisher and Subscriber configuration<a class="headerlink" href="#publisher-and-subscriber-configuration" title="Permalink to this headline">¶</a></h4>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code> can be configured via the <code class="xref py py-class docutils literal notranslate"><span class="pre">PublisherAttributes</span></code> structure and
<code class="docutils literal notranslate"><span class="pre">createPublisher</span></code> function accepts an instance of this structure. The <code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code> can be configured via the
<code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriberAttributes</span></code> structure and <code class="docutils literal notranslate"><span class="pre">createSubscriber</span></code> function accepts an instance of this structure.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PublisherAttributes</span> <span class="n">publisher_attr</span><span class="p">;</span>
<span class="n">Publisher</span> <span class="o">*</span><span class="n">publisher</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createPublisher</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="n">publisher_attr</span><span class="p">);</span>

<span class="n">SubscriberAttributes</span> <span class="n">subscriber_attr</span><span class="p">;</span>
<span class="n">Subscriber</span> <span class="o">*</span><span class="n">subscriber</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createSubscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="n">subscriber_attr</span><span class="p">);</span>
</pre></div>
</div>
<p>Also, these entities can be configured through an XML profile. <code class="docutils literal notranslate"><span class="pre">createPublisher</span></code> and <code class="docutils literal notranslate"><span class="pre">createSubscriber</span></code> functions
accept the name of an XML profile.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Publisher</span> <span class="o">*</span><span class="n">publisher</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createPublisher</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="s">&quot;publisher_xml_profile&quot;</span><span class="p">);</span>
<span class="n">Subscriber</span> <span class="o">*</span><span class="n">subscriber</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createSubscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="s">&quot;subscriber_xml_profile&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>We will now go over the most common configuration options.</p>
<div class="section" id="topic-information">
<span id="id2"></span><h5>Topic information<a class="headerlink" href="#topic-information" title="Permalink to this headline">¶</a></h5>
<p>The topic name and data type are used as meta-data to determine whether Publishers and Subscribers can exchange
messages.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">publisher_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">topicDataType</span> <span class="o">=</span> <span class="s">&quot;HelloWorldType&quot;</span><span class="p">;</span>
<span class="n">publisher_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">topicName</span> <span class="o">=</span> <span class="s">&quot;HelloWorldTopic&quot;</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">topicDataType</span> <span class="o">=</span> <span class="s">&quot;HelloWorldType&quot;</span><span class="p">;</span>
<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">topicName</span> <span class="o">=</span> <span class="s">&quot;HelloWorldTopic&quot;</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_topic_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;dataType&gt;</span>HelloWorldType<span class="nt">&lt;/dataType&gt;</span>
        <span class="nt">&lt;name&gt;</span>HelloWorldTopic<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_topic_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;dataType&gt;</span>HelloWorldType<span class="nt">&lt;/dataType&gt;</span>
        <span class="nt">&lt;name&gt;</span>HelloWorldTopic<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reliability">
<span id="id3"></span><h5>Reliability<a class="headerlink" href="#reliability" title="Permalink to this headline">¶</a></h5>
<p>The RTPS standard defines two behavior modes for message delivery:</p>
<blockquote>
<div><ul class="simple">
<li>Best-Effort (default): Messages are sent without arrival confirmation from the receiver (subscriber).
It is fast, but messages can be lost.</li>
<li>Reliable: The sender agent (publisher) expects arrival confirmation from the receiver (subscriber).
It is slower but prevents data loss.</li>
</ul>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">publisher_attr</span><span class="p">.</span><span class="n">qos</span><span class="p">.</span><span class="n">m_reliability</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">RELIABLE_RELIABILITY_QOS</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">qos</span><span class="p">.</span><span class="n">m_reliability</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">BEST_EFFORT_RELIABILITY_QOS</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_reliability_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;qos&gt;</span>
        <span class="nt">&lt;reliability&gt;</span>
            <span class="nt">&lt;kind&gt;</span>RELIABLE<span class="nt">&lt;/kind&gt;</span>
        <span class="nt">&lt;/reliability&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_reliability_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;qos&gt;</span>
        <span class="nt">&lt;reliability&gt;</span>
            <span class="nt">&lt;kind&gt;</span>BEST_EFFORT<span class="nt">&lt;/kind&gt;</span>
        <span class="nt">&lt;/reliability&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Some reliability combinations make a publisher and a subscriber incompatible and unable to talk to each other.
Next table shows the incompatibilities.</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="28%" />
<col width="23%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Publisher \ Subscriber</strong></td>
<td><strong>Best Effort</strong></td>
<td><strong>Reliable</strong></td>
</tr>
<tr class="row-even"><td><strong>Best Effort</strong></td>
<td>✓</td>
<td>✕</td>
</tr>
<tr class="row-odd"><td><strong>Reliable</strong></td>
<td>✓</td>
<td>✓</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="history">
<span id="history-qos"></span><h5>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h5>
<p>There are two policies for sample storage:</p>
<blockquote>
<div><ul class="simple">
<li>Keep-All: Store all samples in memory.</li>
<li>Keep-Last (Default): Store samples up to a maximum <em>depth</em>.
When this limit is reached, they start to become overwritten.</li>
</ul>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">publisher_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">historyQos</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">KEEP_ALL_HISTORY_QOS</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">historyQos</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span>   <span class="n">KEEP_LAST_HISTORY_QOS</span><span class="p">;</span>
<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">historyQos</span><span class="p">.</span><span class="n">depth</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_history_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;historyQos&gt;</span>
            <span class="nt">&lt;kind&gt;</span>KEEP_ALL<span class="nt">&lt;/kind&gt;</span>
        <span class="nt">&lt;/historyQos&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_history_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;historyQos&gt;</span>
            <span class="nt">&lt;kind&gt;</span>KEEP_LAST<span class="nt">&lt;/kind&gt;</span>
            <span class="nt">&lt;depth&gt;</span>5<span class="nt">&lt;/depth&gt;</span>
        <span class="nt">&lt;/historyQos&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="durability">
<span id="durability-qos"></span><h5>Durability<a class="headerlink" href="#durability" title="Permalink to this headline">¶</a></h5>
<p>Durability configuration of the endpoint defines how it behaves regarding samples that existed on the topic before a
subscriber joins</p>
<blockquote>
<div><ul class="simple">
<li>Volatile: Past samples are ignored, a joining subscriber receives samples generated after the moment it matches.</li>
<li>Transient Local (Default): When a new subscriber joins, its History is filled with past samples.</li>
<li>Transient: When a new subscriber joins, its History is filled with past samples, which are stored on persistent
storage (see <a class="reference internal" href="index.html#persistence"><span class="std std-ref">Persistence</span></a>).</li>
</ul>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">publisher_attr</span><span class="p">.</span><span class="n">qos</span><span class="p">.</span><span class="n">m_durability</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">TRANSIENT_LOCAL_DURABILITY_QOS</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">qos</span><span class="p">.</span><span class="n">m_durability</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">VOLATILE_DURABILITY_QOS</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_durability_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;qos&gt;</span>
        <span class="nt">&lt;durability&gt;</span>
            <span class="nt">&lt;kind&gt;</span>TRANSIENT_LOCAL<span class="nt">&lt;/kind&gt;</span>
         <span class="nt">&lt;/durability&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_durability_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;qos&gt;</span>
        <span class="nt">&lt;durability&gt;</span>
            <span class="nt">&lt;kind&gt;</span>VOLATILE<span class="nt">&lt;/kind&gt;</span>
        <span class="nt">&lt;/durability&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="resource-limits">
<span id="resourcelimits-qos"></span><h5>Resource limits<a class="headerlink" href="#resource-limits" title="Permalink to this headline">¶</a></h5>
<p>Allow controlling the maximum size of the History and other resources.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">publisher_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">resourceLimitsQos</span><span class="p">.</span><span class="n">max_samples</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">resourceLimitsQos</span><span class="p">.</span><span class="n">max_samples</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_resource_limits_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;resourceLimitsQos&gt;</span>
            <span class="nt">&lt;max_samples&gt;</span>200<span class="nt">&lt;/max_samples&gt;</span>
        <span class="nt">&lt;/resourceLimitsQos&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_resource_limits_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;resourceLimitsQos&gt;</span>
            <span class="nt">&lt;max_samples&gt;</span>200<span class="nt">&lt;/max_samples&gt;</span>
        <span class="nt">&lt;/resourceLimitsQos&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="unicast-locators">
<h5>Unicast locators<a class="headerlink" href="#unicast-locators" title="Permalink to this headline">¶</a></h5>
<p>They are network endpoints where the entity will receive data.
For more information about the network, see <a class="reference internal" href="index.html#comm-transports-configuration"><span class="std std-ref">Transports</span></a>.
Publishers and subscribers inherit unicast locators from the participant.
You can set a different set of locators through this attribute.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Locator_t</span> <span class="n">new_locator</span><span class="p">;</span>
<span class="n">new_locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">7800</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">unicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_locator</span><span class="p">);</span>

<span class="n">publisher_attr</span><span class="p">.</span><span class="n">unicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_locator</span><span class="p">);</span> 
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_unicast_locators_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;unicastLocatorList&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4&gt;</span>
                <span class="nt">&lt;port&gt;</span>7800<span class="nt">&lt;/port&gt;</span>
            <span class="nt">&lt;/udpv4&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/unicastLocatorList&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_unicast_locators_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;unicastLocatorList&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4&gt;</span>
                <span class="nt">&lt;port&gt;</span>7800<span class="nt">&lt;/port&gt;</span>
            <span class="nt">&lt;/udpv4&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/unicastLocatorList&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="multicast-locators">
<span id="id4"></span><h5>Multicast locators<a class="headerlink" href="#multicast-locators" title="Permalink to this headline">¶</a></h5>
<p>They are network endpoints where the entity will receive data.
For more information about network configuration, see <a class="reference internal" href="index.html#comm-transports-configuration"><span class="std std-ref">Transports</span></a>.
By default publishers and subscribers don’t use any multicast locator.
This attribute is useful when you have a lot of entities and you want to reduce the network usage.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Locator_t</span> <span class="n">new_locator</span><span class="p">;</span>

<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">new_locator</span><span class="p">,</span> <span class="s">&quot;239.255.0.4&quot;</span><span class="p">);</span>
<span class="n">new_locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">7900</span><span class="p">;</span>

<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">multicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_locator</span><span class="p">);</span>

<span class="n">publisher_attr</span><span class="p">.</span><span class="n">multicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_locator</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_xml_conf_multicast_locators_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;multicastLocatorList&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4&gt;</span>
                <span class="nt">&lt;address&gt;</span>239.255.0.4<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;port&gt;</span>7900<span class="nt">&lt;/port&gt;</span>
            <span class="nt">&lt;/udpv4&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/multicastLocatorList&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_xml_conf_multicast_locators_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;multicastLocatorList&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4&gt;</span>
                <span class="nt">&lt;address&gt;</span>239.255.0.4<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;port&gt;</span>7900<span class="nt">&lt;/port&gt;</span>
            <span class="nt">&lt;/udpv4&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/multicastLocatorList&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="additional-concepts">
<h3>Additional Concepts<a class="headerlink" href="#additional-concepts" title="Permalink to this headline">¶</a></h3>
<div class="section" id="using-message-meta-data">
<h4>Using message meta-data<a class="headerlink" href="#using-message-meta-data" title="Permalink to this headline">¶</a></h4>
<p>When a message is taken from the Subscriber, an auxiliary <code class="xref py py-class docutils literal notranslate"><span class="pre">SampleInfo_t</span></code> structure instance is also returned.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Static types</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorld</span> <span class="n">sample</span><span class="p">;</span>
<span class="n">SampleInfo_t</span> <span class="n">sample_info</span><span class="p">;</span>
<span class="n">subscriber</span><span class="o">-&gt;</span><span class="n">takeNextData</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">sample</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sample_info</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>Dynamic types</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// input_type is an instance of DynamicPubSubType of out current dynamic type</span>
<span class="n">DynamicPubSubType</span> <span class="o">*</span><span class="n">pst</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">DynamicPubSubType</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">input_type</span><span class="p">);</span>
<span class="n">DynamicData</span> <span class="o">*</span><span class="n">sample</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pst</span><span class="o">-&gt;</span><span class="n">GetDynamicType</span><span class="p">());</span>
<span class="n">subscriber</span><span class="o">-&gt;</span><span class="n">takeNextData</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sample_info</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>This <code class="xref py py-class docutils literal notranslate"><span class="pre">SampleInfo_t</span></code> structure contains meta-data on the incoming message:</p>
<ul class="simple">
<li><cite>sampleKind</cite>: type of the sample, as defined by the RTPS Standard.
Healthy messages from a topic are always ALIVE.</li>
<li><cite>WriterGUID</cite>: Signature of the sender (Publisher) the message comes from.</li>
<li><cite>OwnershipStrength</cite>: When several senders are writing the same data, this field can be used to determine which data is
more reliable.</li>
<li><cite>SourceTimestamp</cite>: A timestamp on the sender side that indicates the moment the sample was encapsulated and sent.</li>
</ul>
<p>This meta-data can be used to implement filters:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="n">sample_info</span><span class="p">.</span><span class="n">sampleKind</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">sample_info</span><span class="p">.</span><span class="n">ownershipStrength</span> <span class="o">&gt;</span> <span class="mi">25</span><span class="p">)</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//Process data</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-callbacks">
<h4>Defining callbacks<a class="headerlink" href="#defining-callbacks" title="Permalink to this headline">¶</a></h4>
<p>As we saw in the example, both the <code class="xref py py-class docutils literal notranslate"><span class="pre">Publisher</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code> have a set of callbacks you can use
in your application. These callbacks are to be implemented within classes that derive from
<code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriberListener</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">PublisherListener</span></code>. The following table gathers information about
the possible callbacks that can be implemented in both cases:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="23%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Callback</th>
<th class="head">Publisher</th>
<th class="head">Subscriber</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>onNewDataMessage</cite></td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="row-odd"><td><cite>onSubscriptionMatched</cite></td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="row-even"><td><cite>onPublicationMatched</cite></td>
<td>Y</td>
<td>N</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-rtps"></span><div class="section" id="writer-reader-layer">
<h2>Writer-Reader Layer<a class="headerlink" href="#writer-reader-layer" title="Permalink to this headline">¶</a></h2>
<p>The lower level Writer-Reader Layer of <em>eprosima Fast RTPS</em> provides a raw implementation of the RTPS protocol.
It provides more control over the internals of the protocol than the Publisher-Subscriber layer.
Advanced users can make use of this layer directly to gain more control over the functionality of the library.</p>
<div class="section" id="relation-to-the-publisher-subscriber-layer">
<h3>Relation to the Publisher-Subscriber Layer<a class="headerlink" href="#relation-to-the-publisher-subscriber-layer" title="Permalink to this headline">¶</a></h3>
<p>Elements of this layer map one-to-one with elements from the Publisher-Subscriber Layer, with a few additions.
The following table shows the name correspondence between layers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Publisher-Subscriber Layer</th>
<th class="head">Writer-Reader Layer</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Domain</td>
<td>RTPSDomain</td>
</tr>
<tr class="row-odd"><td>Participant</td>
<td>RTPSParticipant</td>
</tr>
<tr class="row-even"><td>Publisher</td>
<td>RTPSWriter</td>
</tr>
<tr class="row-odd"><td>Subscriber</td>
<td>RTPSReader</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="how-to-use-the-writer-reader-layer">
<h3>How to use the Writer-Reader Layer<a class="headerlink" href="#how-to-use-the-writer-reader-layer" title="Permalink to this headline">¶</a></h3>
<p>We will now go over the use of the Writer-Reader Layer like we did with the Publish-Subscriber one,
explaining the new features it presents.</p>
<p>We recommend you to look at the two examples of how to use this layer the distribution comes with while reading
this section. They are located in <cite>examples/RTPSTest_as_socket</cite> and in <cite>examples/RTPSTest_registered</cite></p>
<div class="section" id="managing-the-participant">
<h4>Managing the Participant<a class="headerlink" href="#managing-the-participant" title="Permalink to this headline">¶</a></h4>
<p>To create a <code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSParticipant</span></code>, the process is very similar to the one shown in the Publisher-Subscriber layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">RTPSParticipantAttributes</span> <span class="n">participant_attr</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">&quot;participant&quot;</span><span class="p">);</span>
<span class="n">RTPSParticipant</span><span class="o">*</span> <span class="n">participant</span> <span class="o">=</span> <span class="n">RTPSDomain</span><span class="o">::</span><span class="n">createParticipant</span><span class="p">(</span><span class="n">participant_attr</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSParticipantAttributes</span></code> structure is equivalent to the <cite>rtps</cite> member of <code class="xref py py-class docutils literal notranslate"><span class="pre">ParticipantAttributes</span></code>
field in the Publisher-Subscriber Layer, so you can configure your <code class="xref py py-class docutils literal notranslate"><span class="pre">RTPSParticipant</span></code> the same way as before:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">RTPSParticipantAttributes</span> <span class="n">participant_attr</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">setName</span><span class="p">(</span><span class="s">&quot;my_participant&quot;</span><span class="p">);</span>
<span class="c1">//etc.</span>
</pre></div>
</div>
</div>
<div class="section" id="managing-the-writers-and-readers">
<h4>Managing the Writers and Readers<a class="headerlink" href="#managing-the-writers-and-readers" title="Permalink to this headline">¶</a></h4>
<p>As the RTPS standard specifies, Writers and Readers are always associated with a History element.
In the Publisher-Subscriber Layer, its creation and management is hidden,
but in the Writer-Reader Layer, you have full control over its creation and configuration.</p>
<p>Writers are configured with a <code class="xref py py-class docutils literal notranslate"><span class="pre">WriterAttributes</span></code> structure.
They also need a <code class="xref py py-class docutils literal notranslate"><span class="pre">WriterHistory</span></code> which is configured with a <code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryAttributes</span></code> structure.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">HistoryAttributes</span> <span class="n">history_attr</span><span class="p">;</span>
<span class="n">WriterHistory</span><span class="o">*</span> <span class="n">history</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WriterHistory</span><span class="p">(</span><span class="n">history_attr</span><span class="p">);</span>
<span class="n">WriterAttributes</span> <span class="n">writer_attr</span><span class="p">;</span>
<span class="n">RTPSWriter</span><span class="o">*</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">RTPSDomain</span><span class="o">::</span><span class="n">createRTPSWriter</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="n">writer_attr</span><span class="p">,</span> <span class="n">history</span><span class="p">);</span>
</pre></div>
</div>
<p>The creation of a Reader is similar.
Note that in this case, you can provide a <code class="xref py py-class docutils literal notranslate"><span class="pre">ReaderListener</span></code> instance that implements your callbacks:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyReaderListener</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ReaderListener</span><span class="p">{};</span>
<span class="n">MyReaderListener</span> <span class="n">listener</span><span class="p">;</span>
<span class="n">HistoryAttributes</span> <span class="n">history_attr</span><span class="p">;</span>
<span class="n">ReaderHistory</span><span class="o">*</span> <span class="n">history</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReaderHistory</span><span class="p">(</span><span class="n">history_attr</span><span class="p">);</span>
<span class="n">ReaderAttributes</span> <span class="n">reader_attr</span><span class="p">;</span>
<span class="n">RTPSReader</span><span class="o">*</span> <span class="n">reader</span> <span class="o">=</span> <span class="n">RTPSDomain</span><span class="o">::</span><span class="n">createRTPSReader</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="n">reader_attr</span><span class="p">,</span> <span class="n">history</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">listener</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-history-to-send-and-receive-data">
<h4>Using the History to Send and Receive Data<a class="headerlink" href="#using-the-history-to-send-and-receive-data" title="Permalink to this headline">¶</a></h4>
<p>In the RTPS Protocol, Readers and Writers save the data about a topic in their associated History.
Each piece of data is represented by a Change, which <em>eprosima Fast RTPS</em> implements as <code class="xref py py-class docutils literal notranslate"><span class="pre">CacheChange_t</span></code>.
Changes are always managed by the History. As a user, the procedure for interacting with the History is always the same:</p>
<ol class="arabic simple">
<li>Request a <code class="xref py py-class docutils literal notranslate"><span class="pre">CacheChange_t</span></code> from the History</li>
<li>Use it</li>
<li>Release it</li>
</ol>
<p>You can interact with the History of the Writer to send data.
A callback that returns the maximum number of payload bytes is required:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Request a change from the history</span>
<span class="n">CacheChange_t</span><span class="o">*</span> <span class="n">change</span> <span class="o">=</span> <span class="n">writer</span><span class="o">-&gt;</span><span class="n">new_change</span><span class="p">([]()</span> <span class="o">-&gt;</span> <span class="kt">uint32_t</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">255</span><span class="p">;},</span> <span class="n">ALIVE</span><span class="p">);</span>
<span class="c1">//Write serialized data into the change</span>
<span class="n">change</span><span class="o">-&gt;</span><span class="n">serializedPayload</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">sprintf</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span> <span class="n">change</span><span class="o">-&gt;</span><span class="n">serializedPayload</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="s">&quot;My example string %d&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
<span class="c1">//Insert change back into the history. The Writer takes care of the rest.</span>
<span class="n">history</span><span class="o">-&gt;</span><span class="n">add_change</span><span class="p">(</span><span class="n">change</span><span class="p">);</span>
</pre></div>
</div>
<p>If your topic data type has several fields, you will have to provide functions to serialize and deserialize
your data in and out of the <code class="xref py py-class docutils literal notranslate"><span class="pre">CacheChange_t</span></code>.
<em>FastRTPSGen</em> does this for you.</p>
<p>You can receive data from within a <code class="xref py py-class docutils literal notranslate"><span class="pre">ReaderListener</span></code> callback method as we did in the Publisher-Subscriber Layer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyReaderListener</span><span class="o">:</span> <span class="k">public</span> <span class="n">ReaderListener</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>

        <span class="n">MyReaderListener</span><span class="p">(){}</span>

        <span class="o">~</span><span class="n">MyReaderListener</span><span class="p">(){}</span>

        <span class="kt">void</span> <span class="n">onNewCacheChangeAdded</span><span class="p">(</span><span class="n">RTPSReader</span><span class="o">*</span> <span class="n">reader</span><span class="p">,</span><span class="k">const</span> <span class="n">CacheChange_t</span><span class="o">*</span> <span class="k">const</span> <span class="n">change</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// The incoming message is enclosed within the `change` in the function parameters</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">change</span><span class="o">-&gt;</span><span class="n">serializedPayload</span><span class="p">.</span><span class="n">data</span><span class="p">);</span>
            <span class="c1">// Once done, remove the change</span>
            <span class="n">reader</span><span class="o">-&gt;</span><span class="n">getHistory</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">remove_change</span><span class="p">((</span><span class="n">CacheChange_t</span><span class="o">*</span><span class="p">)</span><span class="n">change</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-readers-and-writers">
<h3>Configuring Readers and Writers<a class="headerlink" href="#configuring-readers-and-writers" title="Permalink to this headline">¶</a></h3>
<p>One of the benefits of using the Writer-Reader layer is that it provides new configuration possibilities while
maintaining the options from the Publisher-Subscriber layer (see <a class="reference internal" href="index.html#configuration"><span class="std std-ref">Configuration</span></a>).
For example, you can set a Writer or a Reader as a Reliable or Best-Effort endpoint as previously:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">writer_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">reliabilityKind</span> <span class="o">=</span> <span class="n">BEST_EFFORT</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="setting-the-data-durability-kind">
<span id="settingdatadurability"></span><h4>Setting the data durability kind<a class="headerlink" href="#setting-the-data-durability-kind" title="Permalink to this headline">¶</a></h4>
<p>The Durability parameter defines the behavior of the Writer regarding samples already sent when a new Reader matches.
<em>eProsima Fast RTPS</em> offers three Durability options:</p>
<ul class="simple">
<li>VOLATILE (default): Messages are discarded as they are sent.
If a new Reader matches after message <em>n</em>, it will start received from message <em>n+1</em>.</li>
<li>TRANSIENT_LOCAL: The Writer saves a record of the last <em>k</em> messages it has sent.
If a new reader matches after message <em>n</em>, it will start receiving from message <em>n-k</em></li>
<li>TRANSIENT: As TRANSIENT_LOCAL, but the record of messages will be saved to persistent storage, so it will be available
if the writer is destroyed and recreated, or in case of an application crash (see <a class="reference internal" href="index.html#persistence"><span class="std std-ref">Persistence</span></a>)</li>
</ul>
<p>To choose your preferred option:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">writer_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">durabilityKind</span> <span class="o">=</span> <span class="n">TRANSIENT_LOCAL</span><span class="p">;</span>
</pre></div>
</div>
<p>Because in the Writer-Reader layer you have control over the History, in TRANSIENT_LOCAL and TRANSIENT modes the Writer
sends all changes you have not explicitly released from the History.</p>
</div>
</div>
<div class="section" id="configuring-the-history">
<h3>Configuring the History<a class="headerlink" href="#configuring-the-history" title="Permalink to this headline">¶</a></h3>
<p>The History has its own configuration structure, the <code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryAttributes</span></code>.</p>
<div class="section" id="changing-the-maximum-size-of-the-payload">
<h4>Changing the maximum size of the payload<a class="headerlink" href="#changing-the-maximum-size-of-the-payload" title="Permalink to this headline">¶</a></h4>
<p>You can choose the maximum size of the Payload that can go into a <code class="xref py py-class docutils literal notranslate"><span class="pre">CacheChange_t</span></code>.
Be sure to choose a size that allows it to hold the biggest possible piece of data:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">history_attr</span><span class="p">.</span><span class="n">payloadMaxSize</span>  <span class="o">=</span> <span class="mi">250</span><span class="p">;</span> <span class="c1">//Defaults to 500 bytes</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-the-size-of-the-history">
<h4>Changing the size of the History<a class="headerlink" href="#changing-the-size-of-the-history" title="Permalink to this headline">¶</a></h4>
<p>You can specify a maximum amount of changes for the History to hold and an initial amount of allocated changes:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">history_attr</span><span class="p">.</span><span class="n">initialReservedCaches</span> <span class="o">=</span> <span class="mi">250</span><span class="p">;</span> <span class="c1">//Defaults to 500</span>
<span class="n">history_attr</span><span class="p">.</span><span class="n">maximumReservedCaches</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">//Defaults to 0 = Unlimited Changes</span>
</pre></div>
</div>
<p>When the initial amount of reserved changes is lower than the maximum, the History will allocate more changes as they
are needed until it reaches the maximum size.</p>
</div>
</div>
</div>
<span id="document-advanced"></span><div class="section" id="advanced-functionalities">
<h2>Advanced Functionalities<a class="headerlink" href="#advanced-functionalities" title="Permalink to this headline">¶</a></h2>
<p>This section covers slightly more advanced, but useful features that enrich your implementation.</p>
<div class="section" id="topics-and-keys">
<h3>Topics and Keys<a class="headerlink" href="#topics-and-keys" title="Permalink to this headline">¶</a></h3>
<p>The RTPS standard contemplates the use of keys to define multiple data sources/sinks within a single topic.</p>
<p>There are three ways of implementing keys into your topic:</p>
<ul class="simple">
<li>Defining a <cite>&#64;Key</cite> field in the IDL file when using FastRTPSGen (see the examples that come with the distribution).</li>
<li>Manually implementing and using a <code class="xref py py-func docutils literal notranslate"><span class="pre">getKey()</span></code> method.</li>
<li>Adding the attribute <cite>Key</cite> to the member and its parents when using dynamic types (see <a class="reference internal" href="index.html#dynamic-types"><span class="std std-ref">Dynamic Topic Types</span></a>).</li>
</ul>
<p>Publishers and Subscribers using topics with keys must be configured to use them, otherwise, they will have no effect:</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Publisher-Subscriber Layer configuration.</span>
<span class="n">publisher_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">topicKind</span> <span class="o">=</span> <span class="n">WITH_KEY</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_profile_qos_key&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;kind&gt;</span>WITH_KEY<span class="nt">&lt;/kind&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The RTPS Layer requires you to call the <code class="xref py py-func docutils literal notranslate"><span class="pre">getKey()</span></code> method manually within your callbacks.</p>
<p>You can tweak the History to accommodate data from multiple keys based on your current configuration.
This consist of defining a maximum number of data sinks and a maximum size for each sink:</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set the subscriber to remember and store up to 3 different keys.</span>
<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">resourceLimitsQos</span><span class="p">.</span><span class="n">max_instances</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="c1">// Hold a maximum of 20 samples per key.</span>
<span class="n">subscriber_attr</span><span class="p">.</span><span class="n">topic</span><span class="p">.</span><span class="n">resourceLimitsQos</span><span class="p">.</span><span class="n">max_samples_per_instance</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_profile_qos_resourcelimit&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="nt">&lt;resourceLimitsQos&gt;</span>
            <span class="nt">&lt;max_instances&gt;</span>3<span class="nt">&lt;/max_instances&gt;</span>
            <span class="nt">&lt;max_samples_per_instance&gt;</span>20<span class="nt">&lt;/max_samples_per_instance&gt;</span>
        <span class="nt">&lt;/resourceLimitsQos&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Note that your History must be big enough to accommodate the maximum number of samples for each key.
eProsima Fast RTPS will notify you if your History is too small.</p>
</div>
<div class="section" id="transports">
<span id="comm-transports-configuration"></span><h3>Transports<a class="headerlink" href="#transports" title="Permalink to this headline">¶</a></h3>
<p><em>eProsima Fast RTPS</em> implements an architecture of pluggable transports.
Current version implements four transports: UDPv4, UDPv6, TCPv4 and TCPv6.
By default, when a <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code> is created, one built-in UDPv4 transport is configured.
You can add custom transports using the attribute <code class="docutils literal notranslate"><span class="pre">rtps.userTransports</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Create a descriptor for the new transport.</span>
<span class="k">auto</span> <span class="n">custom_transport</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">UDPv4TransportDescriptor</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">custom_transport</span><span class="o">-&gt;</span><span class="n">sendBufferSize</span> <span class="o">=</span> <span class="mi">9216</span><span class="p">;</span>
    <span class="n">custom_transport</span><span class="o">-&gt;</span><span class="n">receiveBufferSize</span> <span class="o">=</span> <span class="mi">9216</span><span class="p">;</span>

<span class="c1">//Disable the built-in Transport Layer.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">useBuiltinTransports</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">//Link the Transport Layer to the Participant.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">userTransports</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">custom_transport</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>my_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;type&gt;</span>UDPv4<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;sendBufferSize&gt;</span>9216<span class="nt">&lt;/sendBufferSize&gt;</span>
        <span class="nt">&lt;receiveBufferSize&gt;</span>9216<span class="nt">&lt;/receiveBufferSize&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>
<span class="nt">&lt;/transport_descriptors&gt;</span>

<span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;my_transport&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;userTransports&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>my_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;/userTransports&gt;</span>
        <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>All Transport configuration options can be found in the section <a class="reference internal" href="index.html#transportdescriptors"><span class="std std-ref">Transport descriptors</span></a>.</p>
<div class="section" id="tcp-transport">
<span id="comm-transports-tcp"></span><h4>TCP Transport<a class="headerlink" href="#tcp-transport" title="Permalink to this headline">¶</a></h4>
<p>Unlike UDP, TCP transport is connection oriented and for that Fast-RTPS must establish a TCP connection
before sending the RTPS messages.
Therefore TCP transport can have two behaviors, acting as a server (<strong>TCP Server</strong>) or as a client (<strong>TCP Client</strong>).
The server opens a TCP port listening for incoming connections and the client tries to connect
to the server.
The server and the client concepts are independent from the RTPS concepts: <strong>Publisher</strong>,
<strong>Subscriber</strong>, <strong>Writer</strong>, and <strong>Reader</strong>.
Any of them can operate as a <strong>TCP Server</strong> or a <strong>TCP Client</strong> because
these entities are used only to establish the TCP connection and the RTPS protocol works over it.</p>
<p>To use TCP transports you need to define some more configurations:</p>
<p>You must create a new TCP transport descriptor, for example TCPv4.
This transport descriptor has a field named <code class="docutils literal notranslate"><span class="pre">listening_ports</span></code> that indicates to Fast-RTPS
in which physical TCP ports our participant will listen for input connections.
If omitted, the participant will not be able to receive incoming connections but will be able
to connect to other participants that have configured their listening ports.
The transport must be added to the <code class="docutils literal notranslate"><span class="pre">userTransports</span></code> list of the participant attributes.
The field <code class="docutils literal notranslate"><span class="pre">wan_addr</span></code> can be used to allow incoming connections using the public IP in a WAN environment or the
Internet.
See <a class="reference internal" href="#wan-or-internet-communication-over-tcp-ipv4">WAN or Internet Communication over TCP/IPv4</a> for more information about how to configure a TCP Transport
to allow or connect to WAN connections.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Create a descriptor for the new transport.</span>
<span class="k">auto</span> <span class="n">tcp_transport</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TCPv4TransportDescriptor</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">tcp_transport</span><span class="o">-&gt;</span><span class="n">add_listener_port</span><span class="p">(</span><span class="mi">5100</span><span class="p">);</span>
<span class="n">tcp_transport</span><span class="o">-&gt;</span><span class="n">set_WAN_address</span><span class="p">(</span><span class="s">&quot;80.80.99.45&quot;</span><span class="p">);</span>

<span class="c1">//Disable the built-in Transport Layer.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">useBuiltinTransports</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">//Link the Transport Layer to the Participant.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">userTransports</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tcp_transport</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>tcp_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;type&gt;</span>TCPv4<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;listening_ports&gt;</span>
            <span class="nt">&lt;port&gt;</span>5100<span class="nt">&lt;/port&gt;</span>
        <span class="nt">&lt;/listening_ports&gt;</span>
        <span class="nt">&lt;wan_addr&gt;</span>80.80.99.45<span class="nt">&lt;/wan_addr&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>
<span class="nt">&lt;/transport_descriptors&gt;</span>

<span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;TCPParticipant&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;userTransports&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>tcp_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;/userTransports&gt;</span>
        <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>To configure the participant to connect to another node through TCP, you must configure and add a Locator to its
<code class="docutils literal notranslate"><span class="pre">initialPeersList</span></code> that points to the remote <em>listening port</em>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span> <span class="n">tcp2_transport</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TCPv4TransportDescriptor</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">//Disable the built-in Transport Layer.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">useBuiltinTransports</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">//Set initial peers.</span>
<span class="n">Locator_t</span> <span class="n">initial_peer_locator</span><span class="p">;</span>
<span class="n">initial_peer_locator</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">LOCATOR_KIND_TCPv4</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">initial_peer_locator</span><span class="p">,</span> <span class="s">&quot;80.80.99.45&quot;</span><span class="p">);</span>
<span class="n">initial_peer_locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">5100</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">initialPeersList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">initial_peer_locator</span><span class="p">);</span>

<span class="c1">//Link the Transport Layer to the Participant.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">userTransports</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tcp2_transport</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>tcp2_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;type&gt;</span>TCPv4<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>
<span class="nt">&lt;/transport_descriptors&gt;</span>

<span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;TCP2Participant&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;userTransports&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>tcp2_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;/userTransports&gt;</span>
        <span class="nt">&lt;builtin&gt;</span>
            <span class="nt">&lt;initialPeersList&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;tcpv4&gt;</span>
                        <span class="nt">&lt;address&gt;</span>80.80.99.45<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                    <span class="nt">&lt;/tcpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;/initialPeersList&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>
        <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A TCP version of helloworld example can be found in this
<a class="reference external" href="https://github.com/eProsima/Fast-RTPS/tree/master/examples/C%2B%2B/HelloWorldExampleTCP">link</a>.</p>
<div class="section" id="wan-or-internet-communication-over-tcp-ipv4">
<h5>WAN or Internet Communication over TCP/IPv4<a class="headerlink" href="#wan-or-internet-communication-over-tcp-ipv4" title="Permalink to this headline">¶</a></h5>
<p>Fast-RTPS is able to connect through the Internet or other WAN networks when configured properly.
To achieve this kind of scenarios, the involved network devices such as routers and firewalls
should add the rules to allow the communication.</p>
<p>For example, to allow incoming connections through our NAT, Fast-RTPS must be configured as a <strong>TCP Server</strong> listening
to incoming TCP connections.
To allow incoming connections through a WAN, the TCP descriptor associated must indicate
its public IP through its field <code class="docutils literal notranslate"><span class="pre">wan_addr</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Create a descriptor for the new transport.</span>
<span class="k">auto</span> <span class="n">tcp_transport</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TCPv4TransportDescriptor</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">tcp_transport</span><span class="o">-&gt;</span><span class="n">add_listener_port</span><span class="p">(</span><span class="mi">5100</span><span class="p">);</span>
<span class="n">tcp_transport</span><span class="o">-&gt;</span><span class="n">set_WAN_address</span><span class="p">(</span><span class="s">&quot;80.80.99.45&quot;</span><span class="p">);</span>

<span class="c1">//Disable the built-in Transport Layer.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">useBuiltinTransports</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">//Link the Transport Layer to the Participant.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">userTransports</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tcp_transport</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>tcp_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;type&gt;</span>TCPv4<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;listening_ports&gt;</span>
            <span class="nt">&lt;port&gt;</span>5100<span class="nt">&lt;/port&gt;</span>
        <span class="nt">&lt;/listening_ports&gt;</span>
        <span class="nt">&lt;wan_addr&gt;</span>80.80.99.45<span class="nt">&lt;/wan_addr&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>
<span class="nt">&lt;/transport_descriptors&gt;</span>

<span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;TCPParticipant&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;userTransports&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>tcp_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;/userTransports&gt;</span>
        <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>In this case, configuring the router (which public IP is <code class="docutils literal notranslate"><span class="pre">80.80.99.45</span></code>) is mandatory to allow the incoming traffic to
reach the <strong>TCP Server</strong>.
Typically a NAT routing with the <code class="docutils literal notranslate"><span class="pre">listening_port</span></code> <code class="docutils literal notranslate"><span class="pre">5100</span></code> to our machine is enough.
Any existing firewall should be configured as well.</p>
<p>In the client side, it is needed to specify the public IP of the <strong>TCP Server</strong> with its <code class="docutils literal notranslate"><span class="pre">listening_port</span></code> as
<code class="docutils literal notranslate"><span class="pre">initial_peer</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span> <span class="n">tcp2_transport</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TCPv4TransportDescriptor</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">//Disable the built-in Transport Layer.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">useBuiltinTransports</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">//Set initial peers.</span>
<span class="n">Locator_t</span> <span class="n">initial_peer_locator</span><span class="p">;</span>
<span class="n">initial_peer_locator</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">LOCATOR_KIND_TCPv4</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">initial_peer_locator</span><span class="p">,</span> <span class="s">&quot;80.80.99.45&quot;</span><span class="p">);</span>
<span class="n">initial_peer_locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">5100</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">initialPeersList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">initial_peer_locator</span><span class="p">);</span>

<span class="c1">//Link the Transport Layer to the Participant.</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">userTransports</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tcp2_transport</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>tcp2_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;type&gt;</span>TCPv4<span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>
<span class="nt">&lt;/transport_descriptors&gt;</span>

<span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;TCP2Participant&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;userTransports&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>tcp2_transport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;/userTransports&gt;</span>
        <span class="nt">&lt;builtin&gt;</span>
            <span class="nt">&lt;initialPeersList&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;tcpv4&gt;</span>
                        <span class="nt">&lt;address&gt;</span>80.80.99.45<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                    <span class="nt">&lt;/tcpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;/initialPeersList&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>
        <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The combination of the above configurations in both <strong>TCP Server</strong> and <strong>TCP Client</strong> allows a scenario similar to
the represented by the following image.</p>
<img alt="_images/TCP_WAN.png" class="align-center" src="_images/TCP_WAN.png" />
<p><strong>IPLocator</strong></p>
<p>IPLocator is an auxiliary static class that offers methods to ease the management of IP based locators, as UDP or TCP.
In TCP, the port field of the locator is divided into physical and logical port.
The physical port is the port used by the network device, the real port that the operating system understands.
The logical port can be seen as RTPS port, or UDP’s equivalent port (physical ports of UDP, are logical ports in TCP).
Logical ports normally are not necessary to manage explicitly, but you can do it through IPLocator class.
Physical ports instead, must be set to explicitly use certain ports, to allow the communication through a NAT, for
example.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Locator_t</span> <span class="n">locator</span><span class="p">;</span>
<span class="c1">// Get &amp; Set Physical Port</span>
<span class="kt">uint16_t</span> <span class="n">physical_port</span> <span class="o">=</span> <span class="n">IPLocator</span><span class="o">::</span><span class="n">getPhysicalPort</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setPhysicalPort</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="mi">5555</span><span class="p">);</span>

<span class="c1">// Get &amp; Set Logical Port</span>
<span class="kt">uint16_t</span> <span class="n">logical_port</span> <span class="o">=</span> <span class="n">IPLocator</span><span class="o">::</span><span class="n">getLogicalPort</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setLogicalPort</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="mi">7400</span><span class="p">);</span>

<span class="c1">// Set WAN Address</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setWan</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="s">&quot;80.88.75.55&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>NOTE</strong></p>
<p>TCP doesn’t support multicast scenarios, so you must plan carefully your network architecture.</p>
</div>
</div>
<div class="section" id="listening-locators">
<h4>Listening locators<a class="headerlink" href="#listening-locators" title="Permalink to this headline">¶</a></h4>
<p><em>eProsima Fast RTPS</em> divides listening locators into four categories:</p>
<ul>
<li><p class="first">Metatraffic Multicast Locators: these locators are used to receive metatraffic information using multicast.
They usually are used by built-in endpoints, like the discovery of built-in endpoints. You can set your own locators
using attribute <code class="docutils literal notranslate"><span class="pre">rtps.builtin.metatrafficMulticastLocatorList</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This locator will open a socket to listen network messages on UDPv4 port 22222 over multicast address 239.255.0.1</span>
<span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">Locator_t</span> <span class="n">locator</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="mi">239</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">22222</span><span class="p">;</span>

<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">metatrafficMulticastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">Metatraffic Unicast Locators: these locators are used to receive metatraffic information using unicast.
They usually are used by built-in endpoints, like the discovery of built-in endpoints.
You can set your own locators using attribute <code class="docutils literal notranslate"><span class="pre">rtps.builtin.metatrafficUnicastLocatorList</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This locator will open a socket to listen network messages on UDPv4 port 22223 over network interface 192.168.0.1</span>
<span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">Locator_t</span> <span class="n">locator</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">22223</span><span class="p">;</span>

<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">metatrafficUnicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">User Multicast Locators: these locators are used to receive user information using multicast. They are used by user
endpoints. You can set your own locators using attribute <code class="docutils literal notranslate"><span class="pre">rtps.defaultMulticastLocatorList</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This locator will open a socket to listen network messages on UDPv4 port 22224 over multicast address 239.255.0.1</span>
<span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">Locator_t</span> <span class="n">locator</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="mi">239</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">22224</span><span class="p">;</span>

<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">defaultMulticastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">User Unicast Locators: these locators are used to receive user information using unicast. They are used by user
endpoints. You can set your own locators using attributes <code class="docutils literal notranslate"><span class="pre">rtps.defaultUnicastLocatorList</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This locator will open a socket to listen network messages on UDPv4 port 22225 over network interface 192.168.0.1</span>
<span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">Locator_t</span> <span class="n">locator</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">22225</span><span class="p">;</span>

<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">defaultUnicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
<p>By default <em>eProsima Fast RTPS</em> calculates the listening locators for the built-in UDPv4 network transport using
well-known ports. These well-known ports are calculated using the following predefined rules:</p>
<table border="1" class="docutils" id="id6">
<caption><span class="caption-text">Ports used</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Traffic type</th>
<th class="head">Well-known port expression</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Metatraffic multicast</td>
<td>PB + DG * <em>domainId</em> + offsetd0</td>
</tr>
<tr class="row-odd"><td>Metatraffic unicast</td>
<td>PB + DG * <em>domainId</em> + offsetd1 + PG * <em>participantId</em></td>
</tr>
<tr class="row-even"><td>User multicast</td>
<td>PB + DG * <em>domainId</em> + offsetd2</td>
</tr>
<tr class="row-odd"><td>User unicast</td>
<td>PB + DG * <em>domainId</em> + offsetd3 + PG * <em>participantId</em></td>
</tr>
</tbody>
</table>
<p>These predefined rules use some values explained here:</p>
<ul class="simple">
<li>DG: DomainId Gain. You can set this value using attribute <code class="docutils literal notranslate"><span class="pre">rtps.port.domainIDGain</span></code>.
The default value is <code class="docutils literal notranslate"><span class="pre">250</span></code>.</li>
<li>PG: ParticipantId Gain. You can set this value using attribute <code class="docutils literal notranslate"><span class="pre">rtps.port.participantIDGain</span></code>.
The default value is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</li>
<li>PB: Port Base number. You can set this value using attribute <code class="docutils literal notranslate"><span class="pre">rtps.port.portBase</span></code>.
The default value is <code class="docutils literal notranslate"><span class="pre">7400</span></code>.</li>
<li>offsetd0, offsetd1, offsetd2, offsetd3: Additional offsets.
You can set these values using attributes
<code class="docutils literal notranslate"><span class="pre">rtps.port.offsetdN</span></code>. Default values are: <code class="docutils literal notranslate"><span class="pre">offsetd0</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">offsetd1</span> <span class="pre">=</span> <span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">offsetd2</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">offsetd3</span> <span class="pre">=</span> <span class="pre">11</span></code>.</li>
</ul>
<p>Both UDP and TCP unicast locators support to have a null address.
In that case, <em>eProsima Fast RTPS</em> understands to get local network addresses and use them.</p>
<p>Both UDP and TCP locators support to have a zero port.
In that case, <em>eProsima Fast RTPS</em> understands to calculate well-known port for that type of traffic.</p>
</div>
<div class="section" id="initial-peers">
<span id="id1"></span><h4>Initial peers<a class="headerlink" href="#initial-peers" title="Permalink to this headline">¶</a></h4>
<p>These locators are used to know where to send initial discovery network messages. You can set your own locators using
attribute <code class="docutils literal notranslate"><span class="pre">rtps.builtin.initialPeersList</span></code>. By default <em>eProsima Fast RTPS</em> uses as initial peers the Metatraffic
Multicast Locators.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This locator configures as initial peer the UDPv4 address 192.168.0.2:7600.</span>
<span class="c1">// Initial discovery network messages will send to this UDPv4 address.</span>
<span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">Locator_t</span> <span class="n">locator</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">locator</span><span class="p">,</span> <span class="s">&quot;192.168.0.2&quot;</span><span class="p">);</span>
<span class="n">locator</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">7600</span><span class="p">;</span>

<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">initialPeersList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="whitelist-interfaces">
<span id="id2"></span><h4>Whitelist Interfaces<a class="headerlink" href="#whitelist-interfaces" title="Permalink to this headline">¶</a></h4>
<p>There could be situations where you want to block some network interfaces to avoid connections or sending data through
them.
This can be managed using the field <em>interface whitelist</em> in the transport descriptors, and with them, you can set the
interfaces you want to use to send or receive packets.
The values on this list should match the IPs of your machine in that networks.
For example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">UDPv4TransportDescriptor</span> <span class="n">descriptor</span><span class="p">;</span>
<span class="n">descriptor</span><span class="p">.</span><span class="n">interfaceWhiteList</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>CustomTransport<span class="nt">&lt;/transport_id&gt;</span>
        <span class="nt">&lt;type&gt;</span>UDPv4<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;interfaceWhiteList&gt;</span>
            <span class="nt">&lt;address&gt;</span>127.0.0.1<span class="nt">&lt;/address&gt;</span>
        <span class="nt">&lt;/interfaceWhiteList&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>
    <span class="nt">&lt;type&gt;</span>UDPv4<span class="nt">&lt;/type&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tips">
<h4>Tips<a class="headerlink" href="#tips" title="Permalink to this headline">¶</a></h4>
<p><strong>Disabling all multicast traffic</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Metatraffic Multicast Locator List will be empty.</span>
<span class="c1">// Metatraffic Unicast Locator List will contain one locator, with null address and null port.</span>
<span class="c1">// Then eProsima Fast RTPS will use all network interfaces to receive network messages using a well-known port.</span>
<span class="n">Locator_t</span> <span class="n">default_unicast_locator</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">metatrafficUnicastLocatorList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">default_unicast_locator</span><span class="p">);</span>

<span class="c1">// Initial peer will be UDPv4 addresss 192.168.0.1. The port will be a well-known port.</span>
<span class="c1">// Initial discovery network messages will be sent to this UDPv4 address.</span>
<span class="n">Locator_t</span> <span class="n">initial_peer</span><span class="p">;</span>
<span class="n">IPLocator</span><span class="o">::</span><span class="n">setIPv4</span><span class="p">(</span><span class="n">initial_peer</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">initialPeersList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">initial_peer</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;disable_multicast&quot;</span> <span class="na">is_default_profile=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;builtin&gt;</span>
            <span class="nt">&lt;metatrafficUnicastLocatorList&gt;</span>
                <span class="nt">&lt;locator/&gt;</span>
            <span class="nt">&lt;/metatrafficUnicastLocatorList&gt;</span>
            <span class="nt">&lt;initialPeersList&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;udpv4&gt;</span>
                        <span class="nt">&lt;address&gt;</span>192.168.0.1<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/udpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;/initialPeersList&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>XML Configuration</strong></p>
<p>The <a class="reference internal" href="index.html#xml-profiles"><span class="std std-ref">XML profiles</span></a> section contains the full information about how to setup <em>Fast RTPS</em> through an
<em>XML file</em>.</p>
</div>
</div>
<div class="section" id="flow-controllers">
<span id="id3"></span><h3>Flow Controllers<a class="headerlink" href="#flow-controllers" title="Permalink to this headline">¶</a></h3>
<p><em>eProsima Fast RTPS</em> supports user configurable flow controllers on a Publisher and Participant level. These
controllers can be used to limit the amount of data to be sent under certain conditions depending on the
kind of controller implemented.</p>
<p>The current release implement throughput controllers, which can be used to limit the total message throughput to be sent
over the network per time measurement unit. In order to use them, a descriptor must be passed into the Participant
or Publisher Attributes.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Limit to 300kb per second.</span>
<span class="n">ThroughputControllerDescriptor</span> <span class="n">slowPublisherThroughputController</span><span class="p">{</span><span class="mi">300000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">};</span>
<span class="n">publisher_attr</span><span class="p">.</span><span class="n">throughputController</span> <span class="o">=</span> <span class="n">slowPublisherThroughputController</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_profile_qos_flowcontroller&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;throughputController&gt;</span>
        <span class="nt">&lt;bytesPerPeriod&gt;</span>300000<span class="nt">&lt;/bytesPerPeriod&gt;</span>
        <span class="nt">&lt;periodMillisecs&gt;</span>1000<span class="nt">&lt;/periodMillisecs&gt;</span>
    <span class="nt">&lt;/throughputController&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>In the Writer-Reader layer, the throughput controller is built-in and the descriptor defaults to infinite throughput.
To change the values:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">WriterAttributes</span> <span class="n">writer_attr</span><span class="p">;</span>
<span class="n">writer_attr</span><span class="p">.</span><span class="n">throughputController</span><span class="p">.</span><span class="n">bytesPerPeriod</span> <span class="o">=</span> <span class="mi">300000</span><span class="p">;</span> <span class="c1">//300kb</span>
<span class="n">writer_attr</span><span class="p">.</span><span class="n">throughputController</span><span class="p">.</span><span class="n">periodMillisecs</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">//1000ms</span>

<span class="c1">//CONF-QOS-PUBLISHMODE</span>
<span class="c1">// Allows fragmentation.</span>
<span class="n">publisher_attr</span><span class="p">.</span><span class="n">qos</span><span class="p">.</span><span class="n">m_publishMode</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">ASYNCHRONOUS_PUBLISH_MODE</span><span class="p">;</span>
</pre></div>
</div>
<p>Note that specifying a throughput controller with a size smaller than the socket size can cause messages to never become
sent.</p>
</div>
<div class="section" id="sending-large-data">
<h3>Sending large data<a class="headerlink" href="#sending-large-data" title="Permalink to this headline">¶</a></h3>
<p>The default message size <em>eProsima Fast RTPS</em> uses is a conservative value of 65Kb.
If your topic data is bigger, it must be fragmented.</p>
<p>Fragmented messages are sent over multiple packets, as understood by the particular transport layer.
To make this possible, you must configure the Publisher to work in asynchronous mode.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Allows fragmentation.</span>
<span class="n">publisher_attr</span><span class="p">.</span><span class="n">qos</span><span class="p">.</span><span class="n">m_publishMode</span><span class="p">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">ASYNCHRONOUS_PUBLISH_MODE</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_profile_qos_publishmode&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;qos&gt;</span>
        <span class="nt">&lt;publishMode&gt;</span>
            <span class="nt">&lt;kind&gt;</span>ASYNCHRONOUS<span class="nt">&lt;/kind&gt;</span>
        <span class="nt">&lt;/publishMode&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>In the Writer-Subscriber layer, you have to configure the Writer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">WriterAttributes</span> <span class="n">write_attr</span><span class="p">;</span>
<span class="n">write_attr</span><span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">ASYNCHRONOUS_WRITER</span><span class="p">;</span>    <span class="c1">// Allows fragmentation</span>
</pre></div>
</div>
<p>Note that in best-effort mode messages can be lost if you send big data too fast and the buffer is filled at a faster
rate than what the client can process messages.
On the other hand, in reliable mode, the existence of a lot of data fragments could decrease the frequency at which
messages are received.
If this happens, it can be resolved by increasing socket buffers size, as described in <a class="reference internal" href="#tuning-socket-buffer"><span class="std std-ref">Increasing socket buffers size</span></a>.
It can also help to set a lower Heartbeat period in reliable mode, as stated in <a class="reference internal" href="#tuning-reliable-mode"><span class="std std-ref">Tuning Reliable mode</span></a>.</p>
<p>When you are sending large data, it is convenient to setup a flow controller to avoid a burst of messages in the network
and increase performance.
See <a class="reference internal" href="#flow-controllers"><span class="std std-ref">Flow Controllers</span></a></p>
<div class="section" id="example-sending-a-unique-large-file">
<h4>Example: Sending a unique large file<a class="headerlink" href="#example-sending-a-unique-large-file" title="Permalink to this headline">¶</a></h4>
<p>This is a proposed example of how should the user configure its application in order to achieve the best performance.
To make this example more tangible, it is going to be supposed that the file has a size of 9.9MB and the network in
which the publisher and the subscriber are operating has a bandwidth of 100MB/s</p>
<p>First of all, the asynchronous mode has to be activated in the publisher parameters.
Then, a suitable reliability mode has to be selected.
In this case, it is important to make sure that all fragments of the message are received.
The loss of a fragment means the loss of the entire message, so it would be best to choose the reliable mode.</p>
<p>The default message size of this fragments using the UDPv4 transport has a value of 65Kb (which includes the space
reserved for the data and the message header).
This means that the publisher would have to write at least about 1100 fragments.</p>
<p>This amount of fragment could slow down the transmission, so it could be interesting to decrease the heartbeat period
in order to increase the reactivity of the publisher.</p>
<p>Another important consideration is the addition of a flow controller.
Without a flow controller, the publisher can occupy the entire bandwidth.
A reasonable flow controller for this application could be a limit of 5MB/s, which represents only 5% of the total
bandwidth.
Anyway, these values are highly dependent on the specific application and its desired behavior.</p>
<p>At last, there is another detail to have in mind: it is critical to check the size of the system UDP buffers.
In Linux, buffers can be enlarged with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sysctl -w net.ipv4.udp_mem<span class="o">=</span><span class="s2">&quot;102400 873800 16777216&quot;</span>
sysctl -w net.core.netdev_max_backlog<span class="o">=</span><span class="s2">&quot;30000&quot;</span>
sysctl -w net.core.rmem_max<span class="o">=</span><span class="s2">&quot;16777216&quot;</span>
sysctl -w net.core.wmem_max<span class="o">=</span><span class="s2">&quot;16777216&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="example-video-streaming">
<h4>Example: Video streaming<a class="headerlink" href="#example-video-streaming" title="Permalink to this headline">¶</a></h4>
<p>In this example, the target application transmits video between a publisher and a subscriber.
This video will have a resolution of 640x480 and a frequency of 50fps.</p>
<p>As in the previous example, since the application is sending data that requires fragmentation, the asynchronous mode
has to be activated in the publisher parameters.</p>
<p>In audio or video transmissions, sometimes is better to have a stable and high datarate feed than a 100% lossless
communication.
Working with a frequency of 50Hz makes insignificant the loss of one or two samples each second.
Thus, for a higher performance, it can be appropriate to configure the reliability mode to best-effort.</p>
</div>
</div>
<div class="section" id="discovery">
<span id="id4"></span><h3>Discovery<a class="headerlink" href="#discovery" title="Permalink to this headline">¶</a></h3>
<p>Fast RTPS provides a discovery mechanism that allows matching automatically publishers and subscribers.
The discovery mechanism is divided into two phases: Participant Discovery Phase and Endpoints Discovery Phase.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Participant Discovery Phase (PDP)</dt>
<dd>Before discovering any entity of a remote participant, both participants have to meet between them.
Participant Discovery Phase provides this step and is responsible for sending periodic information about itself.
To know how to configure where to send this periodic information, see <a class="reference internal" href="#initial-peers"><span class="std std-ref">Initial peers</span></a>.
When both participants are met, is the turn of Endpoints Discovery Phase.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Endpoints Discovery Phase (EDP)</dt>
<dd>This phase is responsible for sending entities information to the remote participant.
Also, it has to process the entities information of the remote participant and check which entities can match
between them.</dd>
</dl>
</li>
</ul>
<p>By default, the discovery mechanism is enabled, but you can disable it through participant attributes.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">use_SIMPLE_RTPSParticipantDiscoveryProtocol</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;participant_profile_qos_disable_discovery&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;builtin&gt;</span>
            <span class="nt">&lt;use_SIMPLE_RTPS_PDP&gt;</span>false<span class="nt">&lt;/use_SIMPLE_RTPS_PDP&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="section" id="static-endpoints-discovery">
<h4>Static Endpoints Discovery<a class="headerlink" href="#static-endpoints-discovery" title="Permalink to this headline">¶</a></h4>
<p>Endpoints Discovery Phase can be replaced by a static version that doesn’t send any information.
It is useful when you have a limited network bandwidth and a well-known schema of publishers and subscribers.
Instead of receiving entities information for matching, this information is loaded from an XML file.</p>
<p>First of all, you have to disable the Endpoints Discovery Phase and enable the Static Endpoints Discovery.
This can be done from the participant attributes.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">use_SIMPLE_EndpointDiscoveryProtocol</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">use_STATIC_EndpointDiscoveryProtocol</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</pre></div>
</div>
<p>Then, you will need to load the XML file containing the configuration of the remote participant.
So, for example, if there is a remote participant with a subscriber which is waiting to receive samples from your
publisher, you will need to load the configuration of this remote participant.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">setStaticEndpointXMLFilename</span><span class="p">(</span><span class="s">&quot;ParticipantWithASubscriber.xml&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>A basic XML configuration file for this remote participant would contain information like the name of the remote
participant, the topic name and data type of the subscriber, and its entity and user-defined ID.
All these values have to exactly match the parameter values used to configure the remote participant (through the
class <code class="xref py py-class docutils literal notranslate"><span class="pre">ParticipantAttributes</span></code>) and its subscriber (through the class <code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriberAttributes</span></code>).
Missing elements will acquire default values. For example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;staticdiscovery&gt;</span>
    <span class="nt">&lt;participant&gt;</span>
        <span class="nt">&lt;name&gt;</span>HelloWorldSubscriber<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;reader&gt;</span>
            <span class="nt">&lt;userId&gt;</span>3<span class="nt">&lt;/userId&gt;</span>
            <span class="nt">&lt;entityId&gt;</span>4<span class="nt">&lt;/entityId&gt;</span>
            <span class="nt">&lt;topicName&gt;</span>HelloWorldTopic<span class="nt">&lt;/topicName&gt;</span>
            <span class="nt">&lt;topicDataType&gt;</span>HelloWorld<span class="nt">&lt;/topicDataType&gt;</span>
        <span class="nt">&lt;/reader&gt;</span>
    <span class="nt">&lt;/participant&gt;</span>
<span class="nt">&lt;/staticdiscovery&gt;</span>
</pre></div>
</div>
<p>The XML that configures the participant on the other side (in this case, a subscriber) could look like this:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;staticdiscovery&gt;</span>
    <span class="nt">&lt;participant&gt;</span>
        <span class="nt">&lt;name&gt;</span>HelloWorldPublisher<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;writer&gt;</span>
            <span class="nt">&lt;userId&gt;</span>1<span class="nt">&lt;/userId&gt;</span>
            <span class="nt">&lt;entityId&gt;</span>2<span class="nt">&lt;/entityId&gt;</span>
            <span class="nt">&lt;topicName&gt;</span>HelloWorldTopic<span class="nt">&lt;/topicName&gt;</span>
            <span class="nt">&lt;topicDataType&gt;</span>HelloWorld<span class="nt">&lt;/topicDataType&gt;</span>
        <span class="nt">&lt;/writer&gt;</span>
    <span class="nt">&lt;/participant&gt;</span>
<span class="nt">&lt;/staticdiscovery&gt;</span>
</pre></div>
</div>
<p>You can find an example that uses <a class="reference external" href="https://github.com/eProsima/Fast-RTPS/blob/master/examples/C%2B%2B/StaticHelloWorldExample">Static Endpoint Discovery</a>.</p>
<p>The complete list of fields for readers and writers includes the following parameters:</p>
<ul class="simple">
<li><strong>userId</strong>: numeric value.</li>
<li><strong>entityID</strong>: numeric value.</li>
<li><strong>expectsInlineQos</strong>: <em>true</em> or <em>false</em>. <strong>(only valid for readers)</strong></li>
<li><strong>topicName</strong>: text value.</li>
<li><strong>topicDataType</strong>: text value.</li>
<li><strong>topicKind</strong>: <em>NO_KEY</em> or <em>WITH_KEY</em>.</li>
<li><strong>reliabilityQos</strong>: <em>BEST_EFFORT_RELIABILITY_QOS</em> or <em>RELIABLE_RELIABILITY_QOS</em>.</li>
<li><dl class="first docutils">
<dt><strong>unicastLocator</strong></dt>
<dd><ul class="first last">
<li><cite>address</cite>: text value.</li>
<li><cite>port</cite>: numeric value.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>multicastLocator</strong></dt>
<dd><ul class="first last">
<li><cite>address</cite>: text value.</li>
<li><cite>port</cite>: numeric value.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>topic</strong></dt>
<dd><ul class="first last">
<li><cite>name</cite>: text value.</li>
<li><cite>data type</cite>: text value.</li>
<li><cite>kind</cite>: text value.</li>
</ul>
</dd>
</dl>
</li>
<li><strong>durabilityQos</strong>: <em>VOLATILE_DURABILITY_QOS</em>, <em>TRANSIENT_LOCAL_DURABILITY_QOS</em> or <em>TRANSIENT_DURABILITY_QOS</em>.</li>
<li><dl class="first docutils">
<dt><strong>ownershipQos</strong></dt>
<dd><ul class="first last">
<li><cite>kind</cite>: <em>SHARED_OWNERSHIP_QOS</em> or <em>EXCLUSIVE_OWNERSHIP_QOS</em>.</li>
</ul>
</dd>
</dl>
</li>
<li><strong>partitionQos</strong>: text value.</li>
<li><dl class="first docutils">
<dt><strong>livelinessQos</strong></dt>
<dd><ul class="first last">
<li><cite>kind</cite>: <em>AUTOMATIC_LIVELINESS_QOS</em>, <em>MANUAL_BY_PARTICIPANT_LIVELINESS_QOS</em> or <em>MANUAL_BY_TOPIC_LIVELINESS_QOS</em>.</li>
<li><cite>leaseDuration_ms</cite>: numeric value.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="subscribing-to-discovery-topics">
<h3>Subscribing to Discovery Topics<a class="headerlink" href="#subscribing-to-discovery-topics" title="Permalink to this headline">¶</a></h3>
<p>As specified in the <a class="reference internal" href="#discovery"><span class="std std-ref">Discovery</span></a> section, the Participant or RTPS Participant has a series of meta-data endpoints
for use during the discovery process.
The participant listener interface includes methods which are called each time a Publisher or a Subscriber is
discovered.
This allows you to create your own network analysis tools.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Implementation of custom listener</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomParticipantListener</span> <span class="o">:</span> <span class="k">public</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">ParticipantListener</span>
<span class="p">{</span>
    <span class="cm">/* Custom Listener onSubscriberDiscovery */</span>
    <span class="kt">void</span> <span class="n">onSubscriberDiscovery</span><span class="p">(</span>
            <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">Participant</span> <span class="o">*</span> <span class="n">participant</span><span class="p">,</span>
            <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">ReaderDiscoveryInfo</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="p">)</span> <span class="k">override</span>
    <span class="p">{</span>
        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">participant</span><span class="p">;</span>
        <span class="k">switch</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">status</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">ReaderDiscoveryInfo</span><span class="o">::</span><span class="nl">DISCOVERED_READER</span><span class="p">:</span>
                <span class="cm">/* Process the case when a new subscriber was found in the domain */</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;New subscriber for topic &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">topicName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; of type &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">typeName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; discovered&quot;</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">ReaderDiscoveryInfo</span><span class="o">::</span><span class="nl">CHANGED_QOS_READER</span><span class="p">:</span>
                <span class="cm">/* Process the case when a subscriber changed its QOS */</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">ReaderDiscoveryInfo</span><span class="o">::</span><span class="nl">REMOVED_READER</span><span class="p">:</span>
                <span class="cm">/* Process the case when a subscriber was removed from the domain */</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Subscriber for topic &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">topicName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; of type &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">typeName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; left the domain.&quot;</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* Custom Listener onPublisherDiscovery */</span>
    <span class="kt">void</span> <span class="n">onPublisherDiscovery</span><span class="p">(</span>
            <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">Participant</span> <span class="o">*</span> <span class="n">participant</span><span class="p">,</span>
            <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">WriterDiscoveryInfo</span>  <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="p">)</span> <span class="k">override</span>
    <span class="p">{</span>
        <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">participant</span><span class="p">;</span>
        <span class="k">switch</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">status</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">WriterDiscoveryInfo</span> <span class="o">::</span><span class="nl">DISCOVERED_WRITER</span><span class="p">:</span>
                <span class="cm">/* Process the case when a new publisher was found in the domain */</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;New publisher for topic &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">topicName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; of type &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">typeName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; discovered&quot;</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">WriterDiscoveryInfo</span> <span class="o">::</span><span class="nl">CHANGED_QOS_WRITER</span><span class="p">:</span>
                <span class="cm">/* Process the case when a publisher changed its QOS */</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">WriterDiscoveryInfo</span> <span class="o">::</span><span class="nl">REMOVED_WRITER</span><span class="p">:</span>
                <span class="cm">/* Process the case when a publisher was removed from the domain */</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;publisher for topic &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">topicName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; of type &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">info</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">typeName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39; left the domain.&quot;</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>Setting the custom listener</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create Custom user ParticipantListener (should inherit from eprosima::fastrtps::ParticipantListener.</span>
<span class="n">CustomParticipantListener</span> <span class="o">*</span><span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomParticipantListener</span><span class="p">();</span>
<span class="c1">// Pass the listener on participant creation.</span>
<span class="n">Participant</span><span class="o">*</span> <span class="n">participant</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createParticipant</span><span class="p">(</span><span class="n">participant_attr</span><span class="p">,</span> <span class="n">listener</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The callbacks defined in the ReaderListener you attach to the EDP will execute for each data message after
the built-in protocols have processed it.</p>
</div>
<div class="section" id="tuning">
<h3>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">¶</a></h3>
<div class="section" id="taking-advantage-of-multicast">
<h4>Taking advantage of multicast<a class="headerlink" href="#taking-advantage-of-multicast" title="Permalink to this headline">¶</a></h4>
<p>For topics with several subscribers, it is recommendable to configure them to use multicast instead of unicast.
By doing so, only one network package will be sent for each sample.
This will improve both CPU and network usage. Multicast configuration is explained in <a class="reference internal" href="index.html#multicast-locators"><span class="std std-ref">Multicast locators</span></a>.</p>
</div>
<div class="section" id="increasing-socket-buffers-size">
<span id="tuning-socket-buffer"></span><h4>Increasing socket buffers size<a class="headerlink" href="#increasing-socket-buffers-size" title="Permalink to this headline">¶</a></h4>
<p>In high rate scenarios or large data scenarios, the bottleneck could be the size of the socket buffers.
Network packages could be dropped because there is no space in the socket buffer.
Using Reliable <a class="reference internal" href="index.html#reliability"><span class="std std-ref">Reliability</span></a> <em>Fast RTPS</em> will try to recover lost samples, but with the penalty of retransmission.
Using Best-Effort <a class="reference internal" href="index.html#reliability"><span class="std std-ref">Reliability</span></a> samples will be definitely lost.</p>
<p>By default <em>eProsima Fast RTPS</em> creates socket buffers with the system default size, but you can modify it.
<code class="docutils literal notranslate"><span class="pre">sendSocketBufferSize</span></code> attribute helps to increase the socket buffer used to send data.
<code class="docutils literal notranslate"><span class="pre">listenSocketBufferSize</span></code> attribute helps to increase the socket buffer used to read data.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">sendSocketBufferSize</span> <span class="o">=</span> <span class="mi">1048576</span><span class="p">;</span>
<span class="n">participant_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">listenSocketBufferSize</span> <span class="o">=</span> <span class="mi">4194304</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;participant_xml_profile_qos_socketbuffers&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;sendSocketBufferSize&gt;</span>1048576<span class="nt">&lt;/sendSocketBufferSize&gt;</span>
        <span class="nt">&lt;listenSocketBufferSize&gt;</span>4194304<span class="nt">&lt;/listenSocketBufferSize&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="finding-out-system-maximum-values">
<h5>Finding out system maximum values<a class="headerlink" href="#finding-out-system-maximum-values" title="Permalink to this headline">¶</a></h5>
<p>Linux operating system sets a maximum value for socket buffer sizes.
When you set in <em>Fast RTPS</em> a socket buffer size, your value cannot exceed the maximum value of the system.</p>
<p>To get these values you can use the command <code class="docutils literal notranslate"><span class="pre">sysctl</span></code>.
Maximum buffer size value of socket buffers used to send data could be retrieved using this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt; sudo sysctl -a <span class="p">|</span> grep net.core.wmem_max
net.core.wmem_max <span class="o">=</span> <span class="m">1048576</span>
</pre></div>
</div>
<p>For socket buffers used to receive data the command is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt; sudo sysctl -a <span class="p">|</span> grep net.core.rmem_max
net.core.rmem_max <span class="o">=</span> <span class="m">4194304</span>
</pre></div>
</div>
<p>If these default maximum values are not enough for you, you can also increase them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt; <span class="nb">echo</span> <span class="s1">&#39;net.core.wmem_max=12582912&#39;</span> &gt;&gt; /etc/sysctl.conf
$&gt; <span class="nb">echo</span> <span class="s1">&#39;net.core.rmem_max=12582912&#39;</span> &gt;&gt; /etc/sysctl.conf
</pre></div>
</div>
</div>
</div>
<div class="section" id="tuning-reliable-mode">
<span id="id5"></span><h4>Tuning Reliable mode<a class="headerlink" href="#tuning-reliable-mode" title="Permalink to this headline">¶</a></h4>
<p>RTPS protocol can maintain reliable communication using special messages (Heartbeat and Ack/Nack messages).
RTPS protocol can detect which samples are lost and re-sent them again.</p>
<p>You can modify the frequency these special submessages are exchanged by specifying a custom heartbeat period.
The heartbeat period in the Publisher-Subscriber level is configured as part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">ParticipantAttributes</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">publisher_attr</span><span class="p">.</span><span class="n">times</span><span class="p">.</span><span class="n">heartbeatPeriod</span><span class="p">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">publisher_attr</span><span class="p">.</span><span class="n">times</span><span class="p">.</span><span class="n">heartbeatPeriod</span><span class="p">.</span><span class="n">fraction</span> <span class="o">=</span> <span class="mi">4294967</span> <span class="o">*</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">//500 ms</span>
</pre></div>
</div>
<p>In the Writer-Reader layer, this belongs to the <code class="xref py py-class docutils literal notranslate"><span class="pre">WriterAttributes</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">writer_attr</span><span class="p">.</span><span class="n">times</span><span class="p">.</span><span class="n">heartbeatPeriod</span><span class="p">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">writer_attr</span><span class="p">.</span><span class="n">times</span><span class="p">.</span><span class="n">heartbeatPeriod</span><span class="p">.</span><span class="n">fraction</span> <span class="o">=</span> <span class="mi">4294967</span> <span class="o">*</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">//500 ms</span>
</pre></div>
</div>
<p>A smaller heartbeat period increases the number of overhead messages in the network,
but speeds up the system response when a piece of data is lost.</p>
<div class="section" id="non-strict-reliability">
<h5>Non-strict reliability<a class="headerlink" href="#non-strict-reliability" title="Permalink to this headline">¶</a></h5>
<p>Using a strict reliability, configuring <a class="reference internal" href="index.html#history-qos"><span class="std std-ref">History</span></a> kind as <code class="docutils literal notranslate"><span class="pre">KEEP_ALL</span></code>, determines all samples have to be
received by all subscribers.
This implicates a performance decrease in case a lot of samples are dropped.
If you don’t need this strictness, use a non-strict reliability, i.e. configure <a class="reference internal" href="index.html#history-qos"><span class="std std-ref">History</span></a> kind as
<code class="docutils literal notranslate"><span class="pre">KEEP_LAST</span></code>.</p>
</div>
</div>
<div class="section" id="slow-down-sample-rate">
<h4>Slow down sample rate<a class="headerlink" href="#slow-down-sample-rate" title="Permalink to this headline">¶</a></h4>
<p>Sometimes publishers could send data in a too high rate for subscribers.
This can end dropping samples.
To avoid this you can slow down the rate using <a class="reference internal" href="#flow-controllers"><span class="std std-ref">Flow Controllers</span></a>.</p>
</div>
</div>
<div class="section" id="additional-quality-of-service-options">
<h3>Additional Quality of Service options<a class="headerlink" href="#additional-quality-of-service-options" title="Permalink to this headline">¶</a></h3>
<p>As a user, you can implement your own quality of service (QoS) restrictions in your application. <em>eProsima Fast RTPS</em>
comes bundled with a set of examples of how to implement common client-wise QoS settings:</p>
<ul class="simple">
<li>Deadline: Rise an alarm when the frequency of message arrival for a topic falls below a certain threshold.</li>
<li>Ownership Strength: When multiple data sources come online, filter duplicates by focusing on the higher priority
sources.</li>
<li>Filtering: Filter incoming messages based on content, time, or both.</li>
</ul>
<p>These examples come with their own <cite>Readme.txt</cite> that explains how the implementations work.</p>
</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>Fast RTPS includes an extensible logging system with the following class hierarchy:</p>
<img alt="_images/logging.png" class="align-center" src="_images/logging.png" />
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Log</span></code> is the entry point of the Logging system.
It exposes three macro definitions to ease its usage:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">logInfo</span><span class="p">(</span><span class="n">INFO_MSG</span><span class="p">,</span> <span class="s">&quot;This is an info message&quot;</span><span class="p">);</span>
<span class="n">logWarning</span><span class="p">(</span><span class="n">WARN_MSG</span><span class="p">,</span> <span class="s">&quot;This is a warning message&quot;</span><span class="p">);</span>
<span class="n">logError</span><span class="p">(</span><span class="n">ERROR_MSG</span><span class="p">,</span> <span class="s">&quot;This is an error message&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>In all cases, <code class="xref py py-class docutils literal notranslate"><span class="pre">INFO_MSG</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WARN_MSG</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">ERROR_MSG</span></code> will be used as category for the log entry as
a preprocessor string, so you can use define any category inline.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">logInfo</span><span class="p">(</span><span class="n">NEW_CATEGORY</span><span class="p">,</span> <span class="s">&quot;This log message belong to NEW_CATEGORY category.&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can control the verbosity of the log system and filter it by category:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Log</span><span class="o">::</span><span class="n">SetVerbosity</span><span class="p">(</span><span class="n">Log</span><span class="o">::</span><span class="n">Kind</span><span class="o">::</span><span class="n">Warning</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">regex</span> <span class="n">my_regex</span><span class="p">(</span><span class="s">&quot;NEW_CATEGORY&quot;</span><span class="p">);</span>
<span class="n">Log</span><span class="o">::</span><span class="n">SetCategoryFilter</span><span class="p">(</span><span class="n">my_regex</span><span class="p">);</span>
</pre></div>
</div>
<p>The possible verbosity levels are <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Info</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Warning</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Error</span></code>.</p>
<p>When selecting one of them, you also select the ones with more priority.</p>
<ul class="simple">
<li>Selecting <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Error</span></code>, you will only receive error messages.</li>
<li>Selecting <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Warning</span></code> you select <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Error</span></code> too.</li>
<li>Selecting <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Info</span></code> will select all of them</li>
</ul>
<p>To filter by category, you must provide a valid <code class="xref py py-class docutils literal notranslate"><span class="pre">std::regex</span></code> expression that will be applied to the category.
The categories that matches the expression, will be logged.</p>
<p>By default, the verbosity is set to <code class="xref py py-class docutils literal notranslate"><span class="pre">Log::Kind::Error</span></code> and without category filtering.</p>
<p>There are some others configurable parameters:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//! Enables the reporting of filenames in log entries. Disabled by default.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">ReportFilenames</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>
<span class="c1">//! Enables the reporting of function names in log entries. Enabled by default when supported.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">ReportFunctions</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>
<span class="c1">//! Sets the verbosity level, allowing for messages equal or under that priority to be logged.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">SetVerbosity</span><span class="p">(</span><span class="n">Log</span><span class="o">::</span><span class="n">Kind</span><span class="p">);</span>
<span class="c1">//! Returns the current verbosity level.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="n">Log</span><span class="o">::</span><span class="n">Kind</span> <span class="n">GetVerbosity</span><span class="p">();</span>
<span class="c1">//! Sets a filter that will pattern-match against log categories, dropping any unmatched categories.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">SetCategoryFilter</span>    <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">regex</span><span class="o">&amp;</span><span class="p">);</span>
<span class="c1">//! Sets a filter that will pattern-match against filenames, dropping any unmatched categories.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">SetFilenameFilter</span>    <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">regex</span><span class="o">&amp;</span><span class="p">);</span>
<span class="c1">//! Sets a filter that will pattern-match against the provided error string, dropping any unmatched categories.</span>
<span class="n">RTPS_DllAPI</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">SetErrorStringFilter</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">regex</span><span class="o">&amp;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="logconsumers">
<h4>LogConsumers<a class="headerlink" href="#logconsumers" title="Permalink to this headline">¶</a></h4>
<p>LogConsumers are classes that implement how to manage the log information.
They must be registered into the Log system to be called with the log messages (after filtering).</p>
<p>Currently there are two LogConsumer implementations:</p>
<ul>
<li><dl class="first docutils">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">StdoutConsumer</span></code>:</dt>
<dd><p class="first last">Default consumer, it prints the logging messages to the standard output.
It has no configuration available.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">FileConsumer</span></code>:</dt>
<dd><p class="first">It prints the logging messages to a file. It has two configuration parameters:</p>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">filename</span></code> that defines the file where the consumer will write the log messages.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">append</span></code> that indicates to the consumer if the output file must be opened to append new content.</li>
</ul>
</div></blockquote>
<p class="last">By default, <code class="xref py py-class docutils literal notranslate"><span class="pre">filename</span></code> is <strong>output.log</strong> and <code class="xref py py-class docutils literal notranslate"><span class="pre">append</span></code> is equals to <strong>false</strong>.</p>
</dd>
</dl>
</li>
</ul>
<p>If you want to add a consumer to manage the logs, you must call the <code class="xref py py-class docutils literal notranslate"><span class="pre">RegisterConsumer</span></code> method of the Log.
To remove all consumers, including the default one, you should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">ClearConsumers</span></code> method.
If you want to reset the Log configuration to its defaults, including recovering the default consumer, you can call to
its <code class="xref py py-class docutils literal notranslate"><span class="pre">Reset</span></code> method.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Log</span><span class="o">::</span><span class="n">ClearConsumers</span><span class="p">();</span> <span class="c1">// Deactivate StdoutConsumer</span>

<span class="c1">// Add FileConsumer consumer</span>
<span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">FileConsumer</span><span class="o">&gt;</span> <span class="n">fileConsumer</span><span class="p">(</span><span class="k">new</span> <span class="n">FileConsumer</span><span class="p">(</span><span class="s">&quot;append.log&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">));</span>
<span class="n">Log</span><span class="o">::</span><span class="n">RegisterConsumer</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">fileConsumer</span><span class="p">));</span>

<span class="c1">// Back to its defaults: StdoutConsumer will be enable and FileConsumer removed.</span>
<span class="n">Log</span><span class="o">::</span><span class="n">Reset</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="xml-log-configuration">
<h4>XML Log configuration<a class="headerlink" href="#xml-log-configuration" title="Permalink to this headline">¶</a></h4>
<p>You can configure the logging system through xml with the tag <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;log&gt;</span></code> under the <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;dds&gt;</span></code> tag, or as an
standalone file (without the <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;dds&gt;</span></code> tag, just <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;log&gt;</span></code> as root).
You can set <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;use_default&gt;</span></code> and a set of <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;consumer&gt;</span></code>.
Each <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;consumer&gt;</span></code> is defined by its <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;class&gt;</span></code> and a set of <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;log&gt;</span>
    <span class="nt">&lt;use_default&gt;</span>FALSE<span class="nt">&lt;/use_default&gt;</span>
    <span class="nt">&lt;consumer&gt;</span>
        <span class="nt">&lt;class&gt;</span>FileConsumer<span class="nt">&lt;/class&gt;</span>
        <span class="nt">&lt;property&gt;</span>
            <span class="nt">&lt;name&gt;</span>filename<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>test1.log<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property&gt;</span>
            <span class="nt">&lt;name&gt;</span>append<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>TRUE<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/consumer&gt;</span>
<span class="nt">&lt;/log&gt;</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;use_default&gt;</span></code> indicates if we want to use the default consumer <code class="xref py py-class docutils literal notranslate"><span class="pre">StdoutConsumer</span></code>.</p>
<p>Each <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;consumer&gt;</span></code> defines a consumer that will be added to the consumers list of the Log.
<code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;class&gt;</span></code> indicates which consumer class to instantiate and the set of <code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code> configures it.
<code class="xref py py-class docutils literal notranslate"><span class="pre">StdoutConsumer</span></code> has no properties to be configured, but <code class="xref py py-class docutils literal notranslate"><span class="pre">FileConsumer</span></code> has <code class="xref py py-class docutils literal notranslate"><span class="pre">filename</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">append</span></code>.</p>
<p>This marks the end of this document.
We recommend you to take a look at the Doxygen API reference and the embedded examples that come with the distribution.
If you need more help, send us an email to <cite>support&#64;eprosima.com</cite>.</p>
</div>
</div>
</div>
<span id="document-security"></span><div class="section" id="security">
<span id="id1"></span><h2>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<p>Fast RTPS can be configured to provide secure communications. For this purpose, Fast RTPS implements pluggable security
at three levels: authentication of remote participants, access control of entities and encryption of data.</p>
<p>By default, Fast RTPS doesn’t compile security support.
You can activate it adding <code class="docutils literal notranslate"><span class="pre">-DSECURITY=ON</span></code> at CMake configuration step.
For more information about Fast RTPS compilation, see <a class="reference internal" href="index.html#installation-from-sources"><span class="std std-ref">Installation from Sources</span></a>.</p>
<p>You can activate and configure security plugins through <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::Participant</span></code> attributes using
properties.
A <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::Property</span></code> is defined by its name (<code class="xref py py-class docutils literal notranslate"><span class="pre">std::string</span></code>) and its value
(<code class="xref py py-class docutils literal notranslate"><span class="pre">std::string</span></code>).
Throughout this page, there are tables showing you the properties used by each security plugin.</p>
<div class="section" id="authentication-plugins">
<h3>Authentication plugins<a class="headerlink" href="#authentication-plugins" title="Permalink to this headline">¶</a></h3>
<p>They provide authentication on the discovery of remote participants.
When a remote participant is detected, Fast RTPS tries to authenticate using the activated Authentication plugin.
If the authentication process finishes successfully then both participants match and discovery protocol continues.
On failure, the remote participant is rejected.</p>
<p>You can activate an Authentication plugin using Participant property <code class="docutils literal notranslate"><span class="pre">dds.sec.auth.plugin</span></code>. Fast RTPS provides a
built-in Authentication plugin. More information on <a class="reference internal" href="#auth-pki-dh"><span class="std std-ref">Auth:PKI-DH</span></a>.</p>
</div>
<div class="section" id="access-control-plugins">
<h3>Access control plugins<a class="headerlink" href="#access-control-plugins" title="Permalink to this headline">¶</a></h3>
<p>They provide validation of entities’ permissions.
After a remote participant is authenticated, its permissions need to be validated and enforced.</p>
<p>Access rights that each entity has over a resource are described.
Main entity is the Participant and it is used to access or produce information on a Domain;
hence the Participant has to be allowed to run in a certain Domain.
Also, a Participant is responsible for creating Publishers and Subscribers that communicate over a certain Topic.
Hence, a Participant has to have the permissions needed to create a Topic, to publish
through its Publishers certain Topics, and to subscribe via its Subscribers to certain Topics.
Access control plugin can configure the Cryptographic plugin because its usage is based on the Participant’s
permissions.</p>
<p>You can activate an Access control plugin using Participant property <code class="docutils literal notranslate"><span class="pre">dds.sec.access.plugin</span></code>.
Fast RTPS provides a built-in Access control plugin.
More information on <a class="reference internal" href="#access-permissions"><span class="std std-ref">Access:Permissions</span></a>.</p>
</div>
<div class="section" id="cryptographic-plugins">
<h3>Cryptographic plugins<a class="headerlink" href="#cryptographic-plugins" title="Permalink to this headline">¶</a></h3>
<p>They provide encryption support. Encryption can be applied over three different levels of RTPS protocol. Cryptographic
plugins can encrypt whole RTPS messages, RTPS submessages of a particular entity (Writer or Reader) or the payload
(user data) of a particular Writer. You can combine them.</p>
<p>You can activate an Cryptographic plugin using Participant property <code class="docutils literal notranslate"><span class="pre">dds.sec.crypto.plugin</span></code>. Fast RTPS provides a
built-in Cryptographic plugin. More information on <a class="reference internal" href="#crypto-aes-gcm-gmac"><span class="std std-ref">Crypto:AES-GCM-GMAC</span></a>.</p>
<p>The Cryptographic plugin is configured by the Access control plugin.
If Access control will not be used, you can configure the Cryptographic plugin manually with the next properties:</p>
<p><strong>Encrypt whole RTPS messages</strong></p>
<p>You can configure a Participant to encrypt all RTPS messages using Participant property
<code class="docutils literal notranslate"><span class="pre">rtps.participant.rtps_protection_kind</span></code> with the value <code class="docutils literal notranslate"><span class="pre">ENCRYPT</span></code>.</p>
<p><strong>Encrypt RTPS submessages of a particular entity</strong></p>
<p>You can configure an entity (Writer or Reader) to encrypt its RTPS submessages using Entity property
<code class="docutils literal notranslate"><span class="pre">rtps.endpoint.submessage_protection_kind</span></code> with the value <code class="docutils literal notranslate"><span class="pre">ENCRYPT</span></code>.</p>
<p><strong>Encrypt payload of a particular Writer</strong></p>
<p>You can configure a Writer to encrypt its payload using Writer property <code class="docutils literal notranslate"><span class="pre">rtps.endpoint.payload_protection_kind</span></code> with
the value <code class="docutils literal notranslate"><span class="pre">ENCRYPT</span></code>.</p>
</div>
<div class="section" id="built-in-plugins">
<h3>Built-in plugins<a class="headerlink" href="#built-in-plugins" title="Permalink to this headline">¶</a></h3>
<p>The current version comes out with three security built-in plugins:</p>
<ul class="simple">
<li><a class="reference internal" href="#auth-pki-dh"><span class="std std-ref">Auth:PKI-DH</span></a>: this plugin provides authentication using a trusted <em>Certificate Authority</em> (CA).</li>
<li><a class="reference internal" href="#access-permissions"><span class="std std-ref">Access:Permissions</span></a>: this plugin provides access control to Participants at the Domain and Topic level.</li>
<li><a class="reference internal" href="#crypto-aes-gcm-gmac"><span class="std std-ref">Crypto:AES-GCM-GMAC</span></a>: this plugin provides authenticated encryption using Advanced Encryption Standard (AES) in
Galois Counter Mode (AES-GCM).</li>
</ul>
<div class="section" id="auth-pki-dh">
<span id="id2"></span><h4>Auth:PKI-DH<a class="headerlink" href="#auth-pki-dh" title="Permalink to this headline">¶</a></h4>
<p>This built-in plugin provides authentication between discovered participants.
It is supplied by a trusted <em>Certificate Authority</em> (CA) and uses ECDSA Digital Signature Algorithms to perform the
mutual authentication.
It also establishes a shared secret using Elliptic Curve Diffie-Hellman (ECDH) Key Agreement Methods.
This shared secret can be used by other security plugins as <a class="reference internal" href="#crypto-aes-gcm-gmac"><span class="std std-ref">Crypto:AES-GCM-GMAC</span></a>.</p>
<p>You can activate this plugin using Participant property <code class="docutils literal notranslate"><span class="pre">dds.sec.auth.plugin</span></code> with the value <code class="docutils literal notranslate"><span class="pre">builtin.PKI-DH</span></code>.
Next tables show you the Participant properties used by this security plugin.</p>
<table border="1" class="docutils align-left" id="id6">
<caption><span class="caption-text"><strong>Properties to configure Auth:PKI-DH</strong></span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property name <br />
(all properties have “dds.sec.auth.builtin.PKI-DH.” prefix)</th>
<th class="head">Property value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>identity_ca</td>
<td>URI to the X509 certificate of the Identity CA. <br />
Supported URI schemes: file. <br />
The <strong>file</strong> schema shall refer to a X.509 v3 certificate in PEM format.</td>
</tr>
<tr class="row-odd"><td>identity_certificate</td>
<td>URI to an X509 certificate signed by the Identity CA in PEM format containing the signed public key for the
Participant. <br />
Supported URI schemes: file.</td>
</tr>
<tr class="row-even"><td>identity_crl <em>(optional)</em></td>
<td>URI to a X509 Certificate Revocation List (CRL). <br />
Supported URI schemes: file.</td>
</tr>
<tr class="row-odd"><td>private_key</td>
<td>URI to access the private Private Key for the Participant. <br />
Supported URI schemes: file.</td>
</tr>
<tr class="row-even"><td>password <em>(optional)</em></td>
<td>A password used to decrypt the private_key.</td>
</tr>
</tbody>
</table>
<div class="section" id="generation-of-x509-certificates">
<span id="generate-x509"></span><h5>Generation of x509 certificates<a class="headerlink" href="#generation-of-x509-certificates" title="Permalink to this headline">¶</a></h5>
<p>You can generate your own x509 certificates using OpenSSL application. This section teaches you how to do this.</p>
<p><strong>Generate a certificate for the CA</strong></p>
<p>When you want to create your own CA certificate, you first have to write a configuration file with your CA
information.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># File: maincaconf.cnf</span>
<span class="c1"># OpenSSL example Certificate Authority configuration file</span>

<span class="c1">####################################################################</span>
<span class="k">[ ca ]</span>
<span class="na">default_ca</span> <span class="o">=</span> <span class="s">CA_default # The default ca section</span>

<span class="c1">####################################################################</span>
<span class="k">[ CA_default ]</span>

<span class="na">dir</span> <span class="o">=</span> <span class="s">. # Where everything is kept</span>
<span class="na">certs</span> <span class="o">=</span> <span class="s">$dir/certs # Where the issued certs are kept</span>
<span class="na">crl_dir</span> <span class="o">=</span> <span class="s">$dir/crl # Where the issued crl are kept</span>
<span class="na">database</span> <span class="o">=</span> <span class="s">$dir/index.txt # database index file.</span>
<span class="na">unique_subject</span> <span class="o">=</span> <span class="s">no # Set to &#39;no&#39; to allow creation of</span>
<span class="s">                    # several ctificates with same subject.</span>
<span class="na">new_certs_dir</span> <span class="o">=</span> <span class="s">$dir</span>

<span class="na">certificate</span> <span class="o">=</span> <span class="s">$dir/maincacert.pem # The CA certificate</span>
<span class="na">serial</span> <span class="o">=</span> <span class="s">$dir/serial # The current serial number</span>
<span class="na">crlnumber</span> <span class="o">=</span> <span class="s">$dir/crlnumber # the current crl number</span>
<span class="s">                           # must be commented out to leave a V1 CRL</span>
<span class="na">crl</span> <span class="o">=</span> <span class="s">$dir/crl.pem # The current CRL</span>
<span class="na">private_key</span> <span class="o">=</span> <span class="s">$dir/maincakey.pem # The private key</span>
<span class="na">RANDFILE</span> <span class="o">=</span> <span class="s">$dir/private/.rand # private random number file</span>

<span class="na">name_opt</span> <span class="o">=</span> <span class="s">ca_default # Subject Name options</span>
<span class="na">cert_opt</span> <span class="o">=</span> <span class="s">ca_default # Certificate field options</span>

<span class="na">default_days</span><span class="o">=</span> <span class="s">1825 # how long to certify for</span>
<span class="na">default_crl_days</span> <span class="o">=</span> <span class="s">30 # how long before next CRL</span>
<span class="na">default_md</span> <span class="o">=</span> <span class="s">sha256 # which md to use.</span>
<span class="na">preserve</span> <span class="o">=</span> <span class="s">no # keep passed DN ordering</span>

<span class="na">policy</span> <span class="o">=</span> <span class="s">policy_match</span>

<span class="c1"># For the CA policy</span>
<span class="k">[ policy_match ]</span>
<span class="na">countryName</span> <span class="o">=</span> <span class="s">match</span>
<span class="na">stateOrProvinceName</span> <span class="o">=</span> <span class="s">match</span>
<span class="na">organizationName</span> <span class="o">=</span> <span class="s">match</span>
<span class="na">organizationalUnitName</span> <span class="o">=</span> <span class="s">optional</span>
<span class="na">commonName</span> <span class="o">=</span> <span class="s">supplied</span>
<span class="na">emailAddress</span> <span class="o">=</span> <span class="s">optional</span>

<span class="c1"># For the &#39;anything&#39; policy</span>
<span class="c1"># At this point in time, you must list all acceptable &#39;object&#39;</span>
<span class="c1"># types.</span>
<span class="k">[ policy_anything ]</span>
<span class="na">countryName</span> <span class="o">=</span> <span class="s">optional</span>
<span class="na">stateOrProvinceName</span> <span class="o">=</span> <span class="s">optional</span>
<span class="na">localityName</span> <span class="o">=</span> <span class="s">optional</span>
<span class="na">organizationName</span> <span class="o">=</span> <span class="s">optional</span>
<span class="na">organizationalUnitName</span> <span class="o">=</span> <span class="s">optional</span>
<span class="na">commonName</span> <span class="o">=</span> <span class="s">supplied</span>
<span class="na">emailAddress</span> <span class="o">=</span> <span class="s">optional</span>

<span class="k">[ req ]</span>
<span class="na">prompt</span> <span class="o">=</span> <span class="s">no</span>
<span class="c1">#default_bits = 1024</span>
<span class="c1">#default_keyfile = privkey.pem</span>
<span class="na">distinguished_name</span><span class="o">=</span> <span class="s">req_distinguished_name</span>
<span class="c1">#attributes = req_attributes</span>
<span class="c1">#x509_extensions = v3_ca # The extentions to add to the self signed cert</span>
<span class="na">string_mask</span> <span class="o">=</span> <span class="s">utf8only</span>

<span class="k">[ req_distinguished_name ]</span>
<span class="na">countryName</span> <span class="o">=</span> <span class="s">ES</span>
<span class="na">stateOrProvinceName</span> <span class="o">=</span> <span class="s">MA</span>
<span class="na">localityName</span> <span class="o">=</span> <span class="s">Tres Cantos</span>
<span class="na">0.organizationName</span> <span class="o">=</span> <span class="s">eProsima</span>
<span class="na">commonName</span> <span class="o">=</span> <span class="s">eProsima Main Test CA</span>
<span class="na">emailAddress</span> <span class="o">=</span> <span class="s">mainca@eprosima.com</span>
</pre></div>
</div>
<p>After writing the configuration file, next commands generate the certificate using ECDSA.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openssl ecparam -name prime256v1 &gt; ecdsaparam

openssl req -nodes -x509 -days <span class="m">3650</span> -newkey ec:ecdsaparam -keyout maincakey.pem -out maincacert.pem -config maincaconf.cnf
</pre></div>
</div>
<p><strong>Generate a certificate for the Participant</strong></p>
<p>When you want to create your own certificate for your Participant, you first have to write a configuration file.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># File: appconf.cnf</span>

<span class="na">prompt</span> <span class="o">=</span> <span class="s">no</span>
<span class="na">string_mask</span> <span class="o">=</span> <span class="s">utf8only</span>
<span class="na">distinguished_name</span> <span class="o">=</span> <span class="s">req_distinguished_name</span>

<span class="k">[ req_distinguished_name ]</span>
<span class="na">countryName</span> <span class="o">=</span> <span class="s">ES</span>
<span class="na">stateOrProvinceName</span> <span class="o">=</span> <span class="s">MA</span>
<span class="na">localityName</span> <span class="o">=</span> <span class="s">Tres Cantos</span>
<span class="na">organizationName</span> <span class="o">=</span> <span class="s">eProsima</span>
<span class="na">emailAddress</span> <span class="o">=</span> <span class="s">example@eprosima.com</span>
<span class="na">commonName</span> <span class="o">=</span> <span class="s">AppName</span>
</pre></div>
</div>
<p>After writing the configuration file, next commands generate the certificate, using ECDSA, for your Participant.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openssl ecparam -name prime256v1 &gt; ecdsaparam

openssl req -nodes -new -newkey ec:ecdsaparam -config appconf.cnf -keyout appkey.pem -out appreq.pem

openssl ca -batch -create_serial -config maincaconf.cnf -days <span class="m">3650</span> -in appreq.pem -out appcert.pem
</pre></div>
</div>
</div>
</div>
<div class="section" id="access-permissions">
<span id="id3"></span><h4>Access:Permissions<a class="headerlink" href="#access-permissions" title="Permalink to this headline">¶</a></h4>
<p>This built-in plugin provides access control using a permissions document signed by a shared  <em>Certificate
Authority</em>. It is configured with three documents:</p>
<p>You can activate this plugin using Participant property <code class="docutils literal notranslate"><span class="pre">dds.sec.access.plugin</span></code> with the value
<code class="docutils literal notranslate"><span class="pre">builtin.Access-Permissions</span></code>.
Next table shows the Participant properties used by this security plugin.</p>
<table border="1" class="docutils align-left" id="id7">
<caption><span class="caption-text"><strong>Properties to configure Access:Permissions</strong></span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property name <br />
(all properties have “dds.sec.access.builtin.Access-Permissions.” prefix)</th>
<th class="head">Property value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>permissions_ca</td>
<td>URI to the X509 certificate of the Permissions CA. <br />
Supported URI schemes: file. <br />
The <strong>file</strong> schema shall refer to an X.509 v3 certificate in PEM format.</td>
</tr>
<tr class="row-odd"><td>governance</td>
<td>URI to shared Governance Document signed by the Permissions CA in S/MIME format. <br />
Supported URI schemes: file.</td>
</tr>
<tr class="row-even"><td>permissions</td>
<td>URI to the Participant permissions document signed by the Permissions CA in S/MIME format. <br />
Supported URI schemes: file.</td>
</tr>
</tbody>
</table>
<div class="section" id="permissions-ca-certificate">
<h5>Permissions CA Certificate<a class="headerlink" href="#permissions-ca-certificate" title="Permalink to this headline">¶</a></h5>
<p>This is an X.509 certificate that contains the Public Key of the CA that will be used to sign the Domain Governance and
Domain Permissions documents.</p>
</div>
<div class="section" id="domain-governance-document">
<h5>Domain Governance Document<a class="headerlink" href="#domain-governance-document" title="Permalink to this headline">¶</a></h5>
<p>Domain Governance document is an XML document that specifies how the domain should be secured.
It shall be signed by the Permissions CA in S/MIME format.</p>
<p>The format of this document is defined in this <a class="reference external" href="https://github.com/eProsima/Fast-RTPS/blob/master/resources/xsd/governance.xsd">Governance XSD file</a>. You can also find a <a class="reference external" href="https://github.com/eProsima/Fast-RTPS/blob/master/examples/C%2B%2B/SecureHelloWorldExample/certs/governance.xml">generic Governance XML
example</a>.</p>
<div class="section" id="domain-rules">
<h6>Domain Rules<a class="headerlink" href="#domain-rules" title="Permalink to this headline">¶</a></h6>
<p>Each domain rule is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;domain_rule&gt;</span></code> XML element tag. Each domain rule contains the following elements
and sections:</p>
<ul class="simple">
<li>Domains element</li>
<li>Allow Unauthenticated Participants element</li>
<li>Enable Join Access Control element</li>
<li>Discovery Protection Kind element</li>
<li>Liveliness Protection Kind element</li>
<li>RTPS Protection Kind element</li>
<li>Topic Access Rules section</li>
</ul>
<p>The domain rules are evaluated in the same order as they appear in the document.
A rule only applies to a particular Participant if the domain section matches the domain to which the Participant
belongs.
If multiple rules match, the first rule that matches is the only one that applies.</p>
</div>
<div class="section" id="domains-element">
<span id="domains-section"></span><h6>Domains element<a class="headerlink" href="#domains-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;domains&gt;</span></code>.
The value in this element identifies the collection of Domains values to which the rule applies.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;domains&gt;</span></code> element can contain a single domain identifier, for example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;domains&gt;</span>
    <span class="nt">&lt;id&gt;</span>1<span class="nt">&lt;/id&gt;</span>
<span class="nt">&lt;/domains&gt;</span>
</pre></div>
</div>
<p>Or it can contain a range of domain identifiers, for example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;domains&gt;</span>
    <span class="nt">&lt;id_range&gt;</span>
        <span class="nt">&lt;min&gt;</span>1<span class="nt">&lt;/min&gt;</span>
        <span class="nt">&lt;max&gt;</span>10<span class="nt">&lt;/max&gt;</span>
    <span class="nt">&lt;/id_range&gt;</span>
<span class="nt">&lt;/domains&gt;</span>
</pre></div>
</div>
<p>Or it can contain both, a list of domain identifiers and ranges of domain identifiers.</p>
</div>
<div class="section" id="allow-unauthenticated-participants-element">
<h6>Allow Unauthenticated Participants element<a class="headerlink" href="#allow-unauthenticated-participants-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;allow_unauthenticated_participants&gt;</span></code>.
Indicates whether the matching of the Participant with a remote Participant requires authentication.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the Participant shall enforce the authentication of remote Participants and
disallow matching those that cannot be successfully authenticated.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the Participant shall allow matching other Participants (event if the remote Participant
cannot authenticate) as long as there is not an already valid authentication with the same Participant’s GUID.</p>
</div>
<div class="section" id="enable-join-access-control-element">
<h6>Enable Join Access Control element<a class="headerlink" href="#enable-join-access-control-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;enable_join_access_control&gt;</span></code>.
Indicates whether the matching of the participant with a remote Participant requires authorization by the Access control
plugin.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the Participant shall not check the permissions of the authenticated remote Participant.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the Participant shall check the permissions of the authenticated remote Participant.</p>
</div>
<div class="section" id="discovery-protection-kind-element">
<h6>Discovery Protection Kind element<a class="headerlink" href="#discovery-protection-kind-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;discovery_protection_kind&gt;</span></code>.
Indicates whether the secure channel of the endpoint discovery phase needs to be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">SIGN</span></code> or <code class="docutils literal notranslate"><span class="pre">ENCRYPT</span></code>, the secure channel shall be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, it shall not.</p>
</div>
<div class="section" id="liveliness-protection-kind-element">
<h6>Liveliness Protection Kind element<a class="headerlink" href="#liveliness-protection-kind-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;liveliness_protection_kind&gt;</span></code>.
Indicates whether the secure channel of the liveliness mechanism needs to be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">SIGN</span></code> or <code class="docutils literal notranslate"><span class="pre">ENCRYPT</span></code>, the secure channel shall be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, it shall not.</p>
</div>
<div class="section" id="rtps-protection-kind-element">
<h6>RTPS Protection Kind element<a class="headerlink" href="#rtps-protection-kind-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;rtps_protection_kind&gt;</span></code>.
Indicates whether the whole RTPS Message needs to be encrypted. If the value is <code class="docutils literal notranslate"><span class="pre">SIGN</span></code> or <code class="docutils literal notranslate"><span class="pre">ENCRYPT</span></code>, whole RTPS
Messages shall be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, it shall not.</p>
</div>
<div class="section" id="topic-rule-section">
<h6>Topic Rule Section<a class="headerlink" href="#topic-rule-section" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;topic_rule&gt;</span></code> and appears within the Topic Access Rules Section whose
XML element is <code class="docutils literal notranslate"><span class="pre">&lt;topic_access_rules&gt;</span></code>.</p>
<p>Each one contains the following elements:</p>
<ul class="simple">
<li>Topic expression</li>
<li>Enable Discovery protection</li>
<li>Enable Liveliness protection</li>
<li>Enable Read Access Control element</li>
<li>Enable Write Access Control element</li>
<li>Metadata protection Kind</li>
<li>Data protection Kind</li>
</ul>
<p>The topic expression selects a set of Topic names.
The rule applies to any Publisher or Subscriber associated with a Topic whose name matches the Topic expression name.</p>
<p>The topic access rules are evaluated in the same order as they appear within the <code class="docutils literal notranslate"><span class="pre">&lt;topic_access_rules&gt;</span></code> section.
If multiple rules match, the first rule that matches is the only one that applies.</p>
</div>
<div class="section" id="topic-expression-element">
<h6>Topic expression element<a class="headerlink" href="#topic-expression-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;topic_expression&gt;</span></code>.
The value in this element identifies the set of Topic names to which the rule applies.
The rule will apply to any Publisher and Subscriber associated with a Topic whose name matches the value.</p>
<p>The Topic name expression syntax and matching shall use the syntax and rules of the POSIX <code class="docutils literal notranslate"><span class="pre">fnmatch()</span></code> function as
specified in <em>POSIX 1003.2-1992, Section B.6</em>.</p>
</div>
<div class="section" id="enable-discovery-protection-element">
<h6>Enable Discovery protection element<a class="headerlink" href="#enable-discovery-protection-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;enable_discovery_protection&gt;</span></code>.
Indicates whether the entity related discovery information shall go through the secure channel of endpoint discovery
phase.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the entity discovery information shall be sent by an unsecured channel of discovery.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the information shall be sent by the secure channel.</p>
</div>
<div class="section" id="enable-liveliness-protection-element">
<h6>Enable Liveliness Protection element<a class="headerlink" href="#enable-liveliness-protection-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;enable_liveliness_protection&gt;</span></code>.
Indicates whether the entity related liveliness information shall go through the secure channel of liveliness mechanism.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the entity liveliness information shall be sent by an unsecured channel of liveliness.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the information shall be sent by the secure channel.</p>
</div>
<div class="section" id="enable-read-access-control-element">
<h6>Enable Read Access Control element<a class="headerlink" href="#enable-read-access-control-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;enable_read_access_control&gt;</span></code>.
Indicates whether read access to the Topic is protected.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, then local Subscriber creation and remote Subscriber matching can proceed without further
access-control mechanisms imposed.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, they shall be checked using Access control plugin.</p>
</div>
<div class="section" id="enable-write-access-control-element">
<h6>Enable Write Access Control element<a class="headerlink" href="#enable-write-access-control-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;enable_write_access_control&gt;</span></code>.
Indicates whether write access to the Topic is protected.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, then local Publisher creation and remote Publisher matching can proceed without further
access-control mechanisms imposed.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, they shall be checked using Access control plugin.</p>
</div>
<div class="section" id="metadata-protection-kind-element">
<h6>Metadata Protection Kind element<a class="headerlink" href="#metadata-protection-kind-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;metadata_protection_kind&gt;</span></code>.
Indicates whether the entity’s RTPS submessages shall be encrypted by the Cryptographic plugin.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the RTPS submessages shall be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, they shall not.</p>
</div>
<div class="section" id="data-protection-kind-element">
<h6>Data Protection Kind element<a class="headerlink" href="#data-protection-kind-element" title="Permalink to this headline">¶</a></h6>
<p>This element is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;data_protection_kind&gt;</span></code>.
Indicates whether the data payload shall be encrypted by the Cryptographic plugin.
If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the data payload shall be encrypted.
If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the data payload shall not.</p>
</div>
</div>
<div class="section" id="participant-permissions-document">
<h5>Participant permissions document<a class="headerlink" href="#participant-permissions-document" title="Permalink to this headline">¶</a></h5>
<p>The permissions document is an XML document containing the permissions of the Participant and binding them to its
distinguished name.
The permissions document shall be signed by the Permissions CA in S/MIME format.</p>
<p>The format of this document is defined in this <a class="reference external" href="https://github.com/eProsima/Fast-RTPS/blob/master/resources/xsd/permissions.xsd">Permissions XSD file</a>. You can also find a <a class="reference external" href="https://github.com/eProsima/Fast-RTPS/blob/master/examples/C%2B%2B/SecureHelloWorldExample/certs/permissions.xml">generic Permissions XML
example</a>.</p>
<div class="section" id="grant-section">
<h6>Grant Section<a class="headerlink" href="#grant-section" title="Permalink to this headline">¶</a></h6>
<p>This section is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;grant&gt;</span></code> XML element tag.
Each grant section contains three sections:</p>
<ul class="simple">
<li>Subject name</li>
<li>Validity</li>
<li>Rules</li>
</ul>
</div>
<div class="section" id="subject-name">
<h6>Subject name<a class="headerlink" href="#subject-name" title="Permalink to this headline">¶</a></h6>
<p>This section is delimited by XML element <code class="docutils literal notranslate"><span class="pre">&lt;subject_name&gt;</span></code>.
The subject name identifies the Participant to which the permissions apply.
Each subject name can only appear in a single <code class="docutils literal notranslate"><span class="pre">&lt;permissions&gt;</span></code> section within the XML Permissions document.
The contents of the subject name element  shall be the x.509 subject name for the Participant as is given in the
Authorization Certificate.</p>
</div>
<div class="section" id="validity">
<h6>Validity<a class="headerlink" href="#validity" title="Permalink to this headline">¶</a></h6>
<p>This section is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;validity&gt;</span></code>.
It reflects the valid dates for the permissions.</p>
</div>
<div class="section" id="rules">
<h6>Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h6>
<p>This section contains the permissions assigned to the Participant.
The rules are applied in the same order that appears in the document.
If the criteria for the rule matched the Domain join and/or publish or subscribe operation that is being attempted,
then the allow or deny decision is applied.
If the criteria for a rule does not match the operation being attempted, the evaluation shall proceed to the next rule.
If all rules have been examined without a match, then the decision specified by the <code class="docutils literal notranslate"><span class="pre">&lt;default&gt;</span></code> rule is applied.
The default rule, if present, must appear after all allow and deny rules.
If the default rule is not present, the implied default decision is DENY.</p>
<p>For the grant to match there shall be a match of the topics and partitions criteria.</p>
<p>Allow rules are delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;allow_rule&gt;</span></code>. Deny rules are delimited by the XML element
<code class="docutils literal notranslate"><span class="pre">&lt;deny_rule&gt;</span></code>. Both contain the same element children.</p>
</div>
<div class="section" id="id4">
<h6>Domains Section<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h6>
<p>This section is delimited by the XML element <code class="docutils literal notranslate"><span class="pre">&lt;domains&gt;</span></code>.
The value in this element identifies the collection of Domain values to which the rule applies.
The syntax is the same as for the <a class="reference internal" href="#domains-section"><span class="std std-ref">Domains element</span></a> of the Governance document.</p>
</div>
<div class="section" id="format-of-the-allowed-denied-actions-sections">
<h6>Format of the Allowed/Denied Actions sections<a class="headerlink" href="#format-of-the-allowed-denied-actions-sections" title="Permalink to this headline">¶</a></h6>
<p>The sections for each of the three action kinds have a similar format.
The only difference is the name of the XML element used to delimit the action:</p>
<ul class="simple">
<li>The Allow/Deny Publish Action is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;publish&gt;</span></code> XML element.</li>
<li>The Allow/Deny Subscribe Action is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;subscribe&gt;</span></code> XML element.</li>
<li>The Allow/Deny Relay Action is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;relay&gt;</span></code> XML element.</li>
</ul>
<p>Each action contains two conditions.</p>
<ul class="simple">
<li>Allowed/Denied Topics Condition</li>
<li>Allowed/Denied Partitions Condition</li>
</ul>
</div>
<div class="section" id="topics-condition">
<h6>Topics condition<a class="headerlink" href="#topics-condition" title="Permalink to this headline">¶</a></h6>
<p>This section is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;topics&gt;</span></code> XML element.
It defines the Topic names that must be matched for the allow/deny rule to apply.
Topic names may be given explicitly or by means of Topic name expressions.
Each topic name of topic-name expressions appears separately in a <code class="docutils literal notranslate"><span class="pre">&lt;topic&gt;</span></code> sub-element within the <code class="docutils literal notranslate"><span class="pre">&lt;topics&gt;</span></code>
element.</p>
<p>The Topic name expression syntax and matching shall use the syntax and rules of the POSIX <code class="docutils literal notranslate"><span class="pre">fnmatch()</span></code> function as
specified in <em>POSIX 1003.1-1992, Section B.6</em>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;topics&gt;</span>
    <span class="nt">&lt;topic&gt;</span>Plane<span class="nt">&lt;/topic&gt;</span>
    <span class="nt">&lt;topic&gt;</span>Hel*<span class="nt">&lt;/topic&gt;</span>
<span class="nt">&lt;/topics&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="partitions-condition">
<h6>Partitions condition<a class="headerlink" href="#partitions-condition" title="Permalink to this headline">¶</a></h6>
<p>This section is delimited by the <code class="docutils literal notranslate"><span class="pre">&lt;partitions&gt;</span></code> XML element.
It limits the set Partitions names that may be associated with the (publish, subscribe, relay) action for the rule to
apply.
Partition names expression syntax and matching shall use the syntax and rules of the POSIX <code class="docutils literal notranslate"><span class="pre">fnmatch()</span></code> function as
specified in <em>POSIX 1003.2-1992, Section B.6</em>.
If there is no <code class="docutils literal notranslate"><span class="pre">&lt;partitions&gt;</span></code> section within a rule, then the default “empty string” partition is assumed.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;partitions&gt;</span>
    <span class="nt">&lt;partition&gt;</span>A<span class="nt">&lt;/partition&gt;</span>
    <span class="nt">&lt;partition&gt;</span>B*<span class="nt">&lt;/partition&gt;</span>
<span class="nt">&lt;/partitions&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="signing-documents-using-x509-certificate">
<h5>Signing documents using x509 certificate<a class="headerlink" href="#signing-documents-using-x509-certificate" title="Permalink to this headline">¶</a></h5>
<p>Governance document and Permissions document have to be signed by an X509 certificate.
Generation of an X509 certificate is explained in <a class="reference internal" href="#generate-x509"><span class="std std-ref">Generation of x509 certificates</span></a>.
Next commands sign the necessary documents for Access:Permissions plugin.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Governance document: governance.xml</span>
openssl smime -sign -in governance.xml -text -out governance.smime -signer maincacert.pem -inkey maincakey.pem

<span class="c1"># Permissions document: permissions.xml</span>
openssl smime -sign -in permissions.xml -text -out permissions.smime -signer maincacert.pem -inkey maincakey.pem
</pre></div>
</div>
</div>
</div>
<div class="section" id="crypto-aes-gcm-gmac">
<span id="id5"></span><h4>Crypto:AES-GCM-GMAC<a class="headerlink" href="#crypto-aes-gcm-gmac" title="Permalink to this headline">¶</a></h4>
<p>This built-in plugin provides authenticated encryption using AES in Galois Counter Mode (AES-GCM).
It also provides additional reader-specific message authentication codes (MACs) using Galois MAC (AES-GMAC).
This plugin needs the activation of the security plugin <a class="reference internal" href="#auth-pki-dh"><span class="std std-ref">Auth:PKI-DH</span></a>.</p>
<p>You can activate this plugin using Participant property <code class="docutils literal notranslate"><span class="pre">dds.sec.crypto.plugin</span></code> with the value
<code class="docutils literal notranslate"><span class="pre">builtin.AES-GCM-GMAC</span></code>.</p>
</div>
</div>
<div class="section" id="example-configuring-the-participant">
<span id="security-configuration-examples"></span><h3>Example: configuring the <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant</span></code><a class="headerlink" href="#example-configuring-the-participant" title="Permalink to this headline">¶</a></h3>
<p>This example show you how to configure a Participant to activate and configure <a class="reference internal" href="#auth-pki-dh"><span class="std std-ref">Auth:PKI-DH</span></a>,
<a class="reference internal" href="#access-permissions"><span class="std std-ref">Access:Permissions</span></a> and <a class="reference internal" href="#crypto-aes-gcm-gmac"><span class="std std-ref">Crypto:AES-GCM-GMAC</span></a> plugins.</p>
<p><strong>Participant attributes</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">ParticipantAttributes</span> <span class="n">part_attr</span><span class="p">;</span>

<span class="c1">// Activate Auth:PKI-DH plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.plugin&quot;</span><span class="p">,</span> <span class="s">&quot;builtin.PKI-DH&quot;</span><span class="p">);</span>

<span class="c1">// Configure Auth:PKI-DH plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.builtin.PKI-DH.identity_ca&quot;</span><span class="p">,</span> <span class="s">&quot;file://maincacert.pem&quot;</span><span class="p">);</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.builtin.PKI-DH.identity_certificate&quot;</span><span class="p">,</span> <span class="s">&quot;file://appcert.pem&quot;</span><span class="p">);</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.builtin.PKI-DH.private_key&quot;</span><span class="p">,</span> <span class="s">&quot;file://appkey.pem&quot;</span><span class="p">);</span>

<span class="c1">// Activate Access:Permissions plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.access.plugin&quot;</span><span class="p">,</span> <span class="s">&quot;builtin.Access-Permissions&quot;</span><span class="p">);</span>

<span class="c1">// Configure Access:Permissions plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.access.builtin.Access-Permissions.permissions_ca&quot;</span><span class="p">,</span>
    <span class="s">&quot;file://maincacet.pem&quot;</span><span class="p">);</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.access.builtin.Access-Permissions.governance&quot;</span><span class="p">,</span>
    <span class="s">&quot;file://governance.smime&quot;</span><span class="p">);</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.access.builtin.Access-Permissions.permissions&quot;</span><span class="p">,</span>
    <span class="s">&quot;file://permissions.smime&quot;</span><span class="p">);</span>

<span class="c1">// Activate Crypto:AES-GCM-GMAC plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.crypto.plugin&quot;</span><span class="p">,</span> <span class="s">&quot;builtin.AES-GCM-GMAC&quot;</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;secure_participant_conf_all_plugin_xml_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;propertiesPolicy&gt;</span>
            <span class="nt">&lt;properties&gt;</span>
                <span class="c">&lt;!-- Activate Auth:PKI-DH plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.plugin<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>builtin.PKI-DH<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Configure Auth:PKI-DH plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.builtin.PKI-DH.identity_ca<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://maincacert.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.builtin.PKI-DH.identity_certificate<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://appcert.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.builtin.PKI-DH.private_key<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://appkey.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Activate Access:Permissions plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.access.plugin<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>builtin.Access-Permissions<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Configure Access:Permissions plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.access.builtin.Access-Permissions.permissions_ca<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://maincacet.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.access.builtin.Access-Permissions.governance<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://governance.smime<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.access.builtin.Access-Permissions.permissions<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://permissions.smime<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Activate Crypto:AES-GCM-GMAC plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.crypto.plugin<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>builtin.AES-GCM-GMAC<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;/properties&gt;</span>
        <span class="nt">&lt;/propertiesPolicy&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>This example shows you how to configure a Participant to activate and configure <a class="reference internal" href="#auth-pki-dh"><span class="std std-ref">Auth:PKI-DH</span></a> and
<a class="reference internal" href="#crypto-aes-gcm-gmac"><span class="std std-ref">Crypto:AES-GCM-GMAC</span></a> plugins, without and Access control plugin.
It also configures Participant to encrypt its RTPS messages, Writer and Reader to encrypt their RTPS submessages and
a writer to encrypt the payload (user data).</p>
<p><strong>Participant attributes</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">ParticipantAttributes</span> <span class="n">part_attr</span><span class="p">;</span>

<span class="c1">// Activate Auth:PKI-DH plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.plugin&quot;</span><span class="p">,</span> <span class="s">&quot;builtin.PKI-DH&quot;</span><span class="p">);</span>

<span class="c1">// Configure Auth:PKI-DH plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.builtin.PKI-DH.identity_ca&quot;</span><span class="p">,</span> <span class="s">&quot;file://maincacert.pem&quot;</span><span class="p">);</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.builtin.PKI-DH.identity_certificate&quot;</span><span class="p">,</span> <span class="s">&quot;file://appcert.pem&quot;</span><span class="p">);</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.auth.builtin.PKI-DH.private_key&quot;</span><span class="p">,</span> <span class="s">&quot;file://appkey.pem&quot;</span><span class="p">);</span>

<span class="c1">// Activate Crypto:AES-GCM-GMAC plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.sec.crypto.plugin&quot;</span><span class="p">,</span> <span class="s">&quot;builtin.AES-GCM-GMAC&quot;</span><span class="p">);</span>

<span class="c1">// Encrypt all RTPS submessages</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">rtps</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;rtps.participant.rtps_protection_kind&quot;</span><span class="p">,</span> <span class="s">&quot;ENCRYPT&quot;</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;secure_participant_conf_no_access_control_xml_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;propertiesPolicy&gt;</span>
            <span class="nt">&lt;properties&gt;</span>
                <span class="c">&lt;!-- Activate Auth:PKI-DH plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.plugin<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>builtin.PKI-DH<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Configure Auth:PKI-DH plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.builtin.PKI-DH.identity_ca<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://maincacert.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.builtin.PKI-DH.identity_certificate<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://appcert.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.auth.builtin.PKI-DH.private_key<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>file://appkey.pem<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Activate Crypto:AES-GCM-GMAC plugin --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>dds.sec.crypto.plugin<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>builtin.AES-GCM-GMAC<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>

                <span class="c">&lt;!-- Encrypt all RTPS submessages --&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>rtps.participant.rtps_protection_kind<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>ENCRYPT<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;/properties&gt;</span>
        <span class="nt">&lt;/propertiesPolicy&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Publisher attributes</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">PublisherAttributes</span> <span class="n">pub_attr</span><span class="p">;</span>

<span class="c1">// Encrypt RTPS submessages</span>
<span class="n">pub_attr</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;rtps.endpoint.submessage_protection_kind&quot;</span><span class="p">,</span> <span class="s">&quot;ENCRYPT&quot;</span><span class="p">);</span>

<span class="c1">// Encrypt payload</span>
<span class="n">pub_attr</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;rtps.endpoint.payload_protection_kind&quot;</span><span class="p">,</span> <span class="s">&quot;ENCRYPT&quot;</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;secure_publisher_xml_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;propertiesPolicy&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
            <span class="c">&lt;!-- Encrypt RTPS submessages --&gt;</span>
            <span class="nt">&lt;property&gt;</span>
                <span class="nt">&lt;name&gt;</span>rtps.endpoint.submessage_protection_kind<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;value&gt;</span>ENCRYPT<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/property&gt;</span>

            <span class="c">&lt;!-- Encrypt payload --&gt;</span>
            <span class="nt">&lt;property&gt;</span>
                <span class="nt">&lt;name&gt;</span>rtps.endpoint.payload_protection_kind<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;value&gt;</span>ENCRYPT<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/propertiesPolicy&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Subscriber attributes</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>C++</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">SubscriberAttributes</span> <span class="n">sub_attr</span><span class="p">;</span>

<span class="c1">// Encrypt RTPS submessages</span>
<span class="n">sub_attr</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;rtps.endpoint.submessage_protection_kind&quot;</span><span class="p">,</span> <span class="s">&quot;ENCRYPT&quot;</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>XML</strong></td>
</tr>
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;secure_publisher_xml_profile&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;propertiesPolicy&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
         <span class="c">&lt;!-- Encrypt RTPS submessages --&gt;</span>
         <span class="nt">&lt;property&gt;</span>
            <span class="nt">&lt;name&gt;</span>rtps.endpoint.submessage_protection_kind<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;value&gt;</span>ENCRYPT<span class="nt">&lt;/value&gt;</span>
         <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
   <span class="nt">&lt;/propertiesPolicy&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-dynamictypes"></span><div class="section" id="dynamic-topic-types">
<span id="dynamic-types"></span><h2>Dynamic Topic Types<a class="headerlink" href="#dynamic-topic-types" title="Permalink to this headline">¶</a></h2>
<p><em>eProsima Fast RTPS</em> provides a dynamic way to define and use topic types and topic data.
Our implementation follows the <em>OMG Extensible and Dynamic Topic Types for DDS interface</em>.
For more information, you can read the document (DDS-XTypes V1.2) in this <a class="reference external" href="http://www.omg.org/spec/DDS-XTypes/1.2">link</a>.</p>
<p>The dynamic topic types offer the possibility to work over RTPS without the restrictions related to the IDLs.
Using them the users can declare the different types that they need and manage the information directly,
avoiding the additional step of updating the IDL file and the generation of <em>C++</em> classes.</p>
<p>The management of dynamic types is split into two main groups.
The first one manages the declaration of the types, building and
setting the configuration of every type and the second one is in charge of
the data instances and their information.</p>
<div class="section" id="concepts">
<h3>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h3>
<p><strong>Type Descriptor</strong></p>
<p>Stores the information about one type with its relationships and restrictions.
It’s the minimum class needed to generate a Dynamic type and in case of the
complex ones, it stores information about its children or its parent types.</p>
<p><strong>Member Descriptor</strong></p>
<p>Several complex types need member descriptors to declare the relationship between types.
This class stores information about that members like their name, their unique ID,
the type that is going to be created and the default value after the creation.
Union types have special fields to identify each member by labels.</p>
<p><strong>Dynamic Type Builder Factory</strong></p>
<p><em>Singleton</em> class that is in charge of the creation and the management of every
<code class="docutils literal notranslate"><span class="pre">DynamicTypes</span></code> and <code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilders</span></code>.
It declares methods to create each kind of supported types, making easier the
management of the descriptors.
Every object created by the factory must be deleted calling the <code class="docutils literal notranslate"><span class="pre">DeleteType</span></code> method.</p>
<p><strong>Dynamic Type Builder</strong></p>
<p>Intermediate class used to configure and create <code class="docutils literal notranslate"><span class="pre">DynamicTypes</span></code>.
By design Dynamic types can’t be modified, so the previous step to create a new one is to create a builder and apply
the settings that the user needs.
Users can create several types using the same builder, but the changes applied
to the builder don’t affect to the types created previously.
Every object created by a builder must be deleted calling the <code class="docutils literal notranslate"><span class="pre">DeleteType</span></code> method
of the Dynamic Type builder Factory.</p>
<p><strong>Dynamic Type</strong></p>
<p>Base class in the declaration of Dynamic types, it stores the information about
its type and every Member that is related to it.
It creates a copy of the descriptor on its creation and cannot be changed to keep the consistency.</p>
<p><strong>Dynamic Type Member</strong></p>
<p>A class that creates the relationship between a member descriptor with its parent type.
Dynamic Types have a one Dynamic type member for every child member added to it.</p>
<p><strong>Dynamic Data Factory</strong></p>
<p><em>Singleton</em> class that is in charge of the creation and the management of every
<code class="docutils literal notranslate"><span class="pre">DynamicData</span></code>.
It creates them using the given <code class="docutils literal notranslate"><span class="pre">DynamicType</span></code> with its settings.
Every data object created by the factory must be deleted calling the <code class="docutils literal notranslate"><span class="pre">DeleteType</span></code> method.
Allows creating a <code class="docutils literal notranslate"><span class="pre">TypeIdentifier</span></code> and a (Minimal)``TypeObject`` from a <code class="docutils literal notranslate"><span class="pre">TypeDescriptor</span></code>.
<code class="docutils literal notranslate"><span class="pre">CompleteTypeObject</span></code> support is planned to be added in the future.</p>
<p><strong>Dynamic Data</strong></p>
<p>A class that manages the data of the Dynamic Types. It stores the information that is
sent and received.
There are two ways to work with DynamicDatas, the first one is the
most secured, activating the macro <code class="docutils literal notranslate"><span class="pre">DYNAMIC_TYPES_CHECKING</span></code>, it creates a variable for
each primitive kind to help the debug process.
The second one reduces the size of the <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> class using only the minimum
values and making the code harder to debug.</p>
<p><strong>Dynamic PubSubType</strong></p>
<p>A class that inherits from <code class="docutils literal notranslate"><span class="pre">TopicDataType</span></code> and works as an intermediary between RTPS Domain and the Dynamic Types.
It implements the methods needed to create, serialize, deserialize and delete <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> instances when the
participants need to convert the received information from any transport to the registered dynamic type.</p>
</div>
<div class="section" id="supported-types">
<h3>Supported Types<a class="headerlink" href="#supported-types" title="Permalink to this headline">¶</a></h3>
<div class="section" id="primitive-types">
<h4>Primitive Types<a class="headerlink" href="#primitive-types" title="Permalink to this headline">¶</a></h4>
<p>This section includes every simple kind:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">INT64</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">UINT16</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">CHAR8</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">UINT32</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">CHAR16</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">UINT64</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">INT16</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">FLOAT32</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">INT32</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">FLOAT64</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">FLOAT128</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Primitive types don’t need a specific configuration to create the type. Because of that
<code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilderFactory</span></code> has got exposed several methods to allow users to create
the Dynamic Types avoiding the <code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilder</span></code> step. The example below shows the two
ways to create dynamic data of a primitive type.
The <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> class has a specific <code class="docutils literal notranslate"><span class="pre">Get</span></code> and <code class="docutils literal notranslate"><span class="pre">Set</span></code> Methods for each primitive
type of the list.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Using Builders</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">created_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicType_ptr</span> <span class="n">created_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">created_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">created_type</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// Creating directly the Dynamic Type</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="n">data2</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="string-and-wstring">
<h4>String and WString<a class="headerlink" href="#string-and-wstring" title="Permalink to this headline">¶</a></h4>
<p>Strings are pretty similar to primitive types with one exception, they need to set the size
of the <code class="docutils literal notranslate"><span class="pre">buffer</span></code> that they can manage.
To do that, <code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilderFactory</span></code> exposes the methods <code class="docutils literal notranslate"><span class="pre">CreateStringType</span></code> and <code class="docutils literal notranslate"><span class="pre">CreateWstringType</span></code>.
By default, its size is set to 255 characters.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Using Builders</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">created_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStringBuilder</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">created_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">created_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">created_type</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s">&quot;Dynamic String&quot;</span><span class="p">);</span>

<span class="c1">// Creating directly the Dynamic Type</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStringType</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="n">data2</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s">&quot;Dynamic String&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="alias">
<h4>Alias<a class="headerlink" href="#alias" title="Permalink to this headline">¶</a></h4>
<p>Alias types have been implemented to rename an existing type, keeping the rest of properties
of the given type.
<code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilderFactory</span></code> exposes the method <code class="docutils literal notranslate"><span class="pre">CreateAliasType</span></code> to create alias types
taking the base type and the new name that the alias is going to set.
After the creation of the <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code>, users can access its information like
they were working with the base type.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Using Builders</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">base_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStringBuilder</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">created_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">base_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasBuilder</span><span class="p">(</span><span class="n">created_type</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;alias&quot;</span><span class="p">);</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s">&quot;Dynamic Alias String&quot;</span><span class="p">);</span>

<span class="c1">// Creating directly the Dynamic Type</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStringType</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">pAliasType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasType</span><span class="p">(</span><span class="n">pType</span><span class="p">,</span> <span class="s">&quot;alias&quot;</span><span class="p">);</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pAliasType</span><span class="p">);</span>
<span class="n">data2</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s">&quot;Dynamic Alias String&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="enumeration">
<h4>Enumeration<a class="headerlink" href="#enumeration" title="Permalink to this headline">¶</a></h4>
<p>The enum type is managed as complex in Dynamic Types because it allows adding members
to set the different values that the enum is going to manage.
Internally, it works with a <code class="docutils literal notranslate"><span class="pre">UINT32</span></code> to store what value is selected.</p>
<p>To use enumerations users must create a Dynamic Type builder calling to <code class="docutils literal notranslate"><span class="pre">CreateEnumType</span></code>
and after that, they can call to <code class="docutils literal notranslate"><span class="pre">AddMember</span></code> given the index and the name of the
different values that the enum is going to support.</p>
<p>The <cite>DynamicData</cite> class has got methods <code class="docutils literal notranslate"><span class="pre">GetEnumValue</span></code> and <code class="docutils literal notranslate"><span class="pre">SetEnumValue</span></code> to work
with <code class="docutils literal notranslate"><span class="pre">UINT32</span></code> or with strings using the names of the members added to the builder.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateEnumBuilder</span><span class="p">();</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;DEFAULT&quot;</span><span class="p">);</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;FIRST&quot;</span><span class="p">);</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;SECOND&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">sValue</span> <span class="o">=</span> <span class="s">&quot;SECOND&quot;</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetEnumValue</span><span class="p">(</span><span class="n">sValue</span><span class="p">);</span>
<span class="kt">uint32_t</span> <span class="n">uValue</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetEnumValue</span><span class="p">(</span><span class="n">uValue</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="bitset">
<h4>Bitset<a class="headerlink" href="#bitset" title="Permalink to this headline">¶</a></h4>
<p>Bitset types emulate a list of boolean values but optimized for space allocation
using each bit for a different value.
They work like a <code class="docutils literal notranslate"><span class="pre">boolean</span></code> type with the only difference that the <code class="docutils literal notranslate"><span class="pre">GetBoolValue</span></code> and
<code class="docutils literal notranslate"><span class="pre">SetBoolValue</span></code> need the index of the bit that users want to read or write.</p>
<p><code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilderFactory</span></code> offers the possibility to set the maximum value that the bitset
is going to manage, but it should be less or equal to 64 bits.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="c1">// Using Builders</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateBitsetBuilder</span><span class="p">(</span><span class="n">limit</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetBoolValue</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">bValue</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">GetBoolValue</span><span class="p">(</span><span class="n">bValue</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// Creating directly the Dynamic Type</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType2</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateBitsetType</span><span class="p">(</span><span class="n">limit</span><span class="p">);</span>
<span class="n">DynamicData_ptr</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="n">data2</span><span class="o">-&gt;</span><span class="n">SetBoolValue</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">bValue2</span><span class="p">;</span>
<span class="n">data2</span><span class="o">-&gt;</span><span class="n">GetBoolValue</span><span class="p">(</span><span class="n">bValue2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="bitmask">
<h4>Bitmask<a class="headerlink" href="#bitmask" title="Permalink to this headline">¶</a></h4>
<p>Bitmasks are the complex way to work with bitsets because they open the option to
add members and access to each boolean value with the name of the member.
<code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> has the special methods <code class="docutils literal notranslate"><span class="pre">GetBitmaskValue</span></code> and <code class="docutils literal notranslate"><span class="pre">SetBitmaskValue</span></code>
using the name of the member, but they can be used like bitsets too.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="c1">// Using Builders</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateBitmaskBuilder</span><span class="p">(</span><span class="n">limit</span><span class="p">);</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;FIRST&quot;</span><span class="p">);</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;SECOND&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetBoolValue</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">bValue</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">GetBoolValue</span><span class="p">(</span><span class="n">bValue</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">bValue</span> <span class="o">=</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">GetBitmaskValue</span><span class="p">(</span><span class="s">&quot;FIRST&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="structure">
<h4>Structure<a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h4>
<p>Structures are the common complex types, they allow to add any kind of members inside them.
They don’t have any value, they are only used to contain other types.</p>
<p>To manage the types inside the structure, users can call the <code class="docutils literal notranslate"><span class="pre">Get</span></code> and <code class="docutils literal notranslate"><span class="pre">Set</span></code> methods
according to the kind of the type inside the structure using their <code class="docutils literal notranslate"><span class="pre">ids</span></code>.
If the structure contains a complex value, it should be used with <code class="docutils literal notranslate"><span class="pre">LoanValue</span></code> to
access to it and <code class="docutils literal notranslate"><span class="pre">ReturnLoanedValue</span></code> to release that pointer.
<code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> manages the counter of loaned values and users can’t loan a value that
has been loaned previously without calling <code class="docutils literal notranslate"><span class="pre">ReturnLoanedValue</span></code> before.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Ids</span></code> must be consecutive starting by zero, and the <code class="docutils literal notranslate"><span class="pre">DynamicType</span></code> will change that
Id if it doesn’t match with the next value.
If two members have the same Id, after adding the second one, the previous
will change its id to the next value.
To get the id of a member by name, <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> exposes the method <code class="docutils literal notranslate"><span class="pre">GetMemberIdByName</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">());</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;other&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint64Type</span><span class="p">());</span>

<span class="n">DynamicType_ptr</span> <span class="n">struct_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">struct_type</span><span class="p">);</span>

<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetUint64Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="union">
<h4>Union<a class="headerlink" href="#union" title="Permalink to this headline">¶</a></h4>
<p>Unions are a special kind of structures where only one of the members is active
at the same time.
To control these members, users must set the <code class="xref py py-class docutils literal notranslate"><span class="pre">discriminator</span></code> type that is going to be used
to select the current member calling the <code class="docutils literal notranslate"><span class="pre">CreateUnionType</span></code> method.
After the creation of the Dynamic Type, every member that is going to be added
needs at least one <code class="docutils literal notranslate"><span class="pre">UnionCaseIndex</span></code> to set how it is going to be selected and
optionally if it is the default value of the union.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicType_ptr</span> <span class="n">discriminator</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUnionBuilder</span><span class="p">(</span><span class="n">discriminator</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span> <span class="nb">true</span><span class="p">);</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt64Type</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">},</span> <span class="nb">false</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">union_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">union_type</span><span class="p">);</span>

<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt64Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="kt">uint64_t</span> <span class="n">unionLabel</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">GetUnionLabel</span><span class="p">(</span><span class="n">unionLabel</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="sequence">
<h4>Sequence<a class="headerlink" href="#sequence" title="Permalink to this headline">¶</a></h4>
<p>A complex type that manages its members as a list of items allowing users to
insert, remove or access to a member of the list. To create this type users
need to specify the type that it is going to store and optionally the size
limit of the list.
To ease the memory management of this type, <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> has these methods:
- <code class="docutils literal notranslate"><span class="pre">InsertSequenceData</span></code>: Creates a new element at the end of the list and returns
the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the new element.
- <code class="docutils literal notranslate"><span class="pre">RemoveSequenceData</span></code>: Removes the element of the given index and refresh the ids
to keep the consistency of the list.
- <code class="docutils literal notranslate"><span class="pre">ClearData</span></code>: Removes all the elements of the list.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="n">DynamicType_ptr</span> <span class="n">base_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateSequenceBuilder</span><span class="p">(</span><span class="n">base_type</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">length</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">sequence_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">sequence_type</span><span class="p">);</span>

<span class="n">MemberId</span> <span class="n">newId</span><span class="p">,</span> <span class="n">newId2</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">InsertInt32Value</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newId</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">InsertInt32Value</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">newId2</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">RemoveSequenceData</span><span class="p">(</span><span class="n">newId</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="array">
<h4>Array<a class="headerlink" href="#array" title="Permalink to this headline">¶</a></h4>
<p>Arrays are pretty similar to sequences with two main differences. The first one is
that they can have multiple dimensions and the other one is that they don’t need
that the elements are stored consecutively.
The method to create arrays needs a vector of sizes to set how many dimensions are
going to be managed, if users don’t want to set a limit can set the value as zero
on each dimension and it applies the default value ( <code class="xref py py-class docutils literal notranslate"><span class="pre">100</span></code> ).
To ease the management of arrays every <code class="docutils literal notranslate"><span class="pre">Set</span></code> method in <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code> class creates
the item if there isn’t any in the given <code class="docutils literal notranslate"><span class="pre">Id</span></code>.
Arrays also have methods to handle the creation and deletion of elements like
sequences, they are <code class="docutils literal notranslate"><span class="pre">InsertArrayData</span></code>, <code class="docutils literal notranslate"><span class="pre">RemoveArrayData</span></code> and <code class="docutils literal notranslate"><span class="pre">ClearData</span></code>.
Additionally, there is a special method <code class="docutils literal notranslate"><span class="pre">GetArrayIndex</span></code> that returns the position id
giving a vector of indexes on every dimension that the arrays support, that is
useful in multidimensional arrays.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">lengths</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">};</span>

<span class="n">DynamicType_ptr</span> <span class="n">base_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateArrayBuilder</span><span class="p">(</span><span class="n">base_type</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">lengths</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">array_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">array_type</span><span class="p">);</span>

<span class="n">MemberId</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">GetArrayIndex</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">});</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">ClearArrayData</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="map">
<h4>Map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h4>
<p>Maps contain a list of pairs ‘key-value’ types, allowing users to insert, remove or
modify the element types of the map. The main difference with sequences is that the map
works with pairs of elements and creates copies of the key element to block the access
to these elements.</p>
<p>To create a map, users must set the types of the key and the value elements and
optionally the size limit of the map. To add a new element to the map, <code class="docutils literal notranslate"><span class="pre">DynamicData</span></code>
has the method <code class="docutils literal notranslate"><span class="pre">InsertMapData</span></code> that returns the ids of the key and the value
elements inside the map.
To remove an element of the map there is the method <code class="docutils literal notranslate"><span class="pre">RemoveMapData</span></code> that uses the
given id to find the key element and removes the key and the value elements from the map.
The method <code class="docutils literal notranslate"><span class="pre">ClearData</span></code> removes all the elements from the map.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="n">DynamicType_ptr</span> <span class="n">base</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateMapBuilder</span><span class="p">(</span><span class="n">base</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">base</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">length</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">map_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">map_type</span><span class="p">);</span>

<span class="n">DynamicData_ptr</span> <span class="n">key</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">base</span><span class="p">);</span>
<span class="n">MemberId</span> <span class="n">keyId</span><span class="p">;</span>
<span class="n">MemberId</span> <span class="n">valueId</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">InsertMapData</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">keyId</span><span class="p">,</span> <span class="n">valueId</span><span class="p">);</span>
<span class="n">MemberId</span> <span class="n">keyId2</span><span class="p">;</span>
<span class="n">MemberId</span> <span class="n">valueId2</span><span class="p">;</span>
<span class="n">key</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">InsertMapData</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">keyId2</span><span class="p">,</span> <span class="n">valueId2</span><span class="p">);</span>

<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="n">valueId2</span><span class="p">);</span>

<span class="n">data</span><span class="o">-&gt;</span><span class="n">RemoveMapData</span><span class="p">(</span><span class="n">keyId</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">RemoveMapData</span><span class="p">(</span><span class="n">keyId2</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="complex-examples">
<h3>Complex examples<a class="headerlink" href="#complex-examples" title="Permalink to this headline">¶</a></h3>
<div class="section" id="nested-structures">
<h4>Nested structures<a class="headerlink" href="#nested-structures" title="Permalink to this headline">¶</a></h4>
<p>Structures allow to add other structures inside them, but users must take care that
to access to these members they need to call <code class="docutils literal notranslate"><span class="pre">LoanValue</span></code> to get a pointer to the
data and release it calling <code class="docutils literal notranslate"><span class="pre">ReturnLoanedValue</span></code>.
<code class="docutils literal notranslate"><span class="pre">DynamicDatas</span></code> manages the counter of loaned values and users can’t loan a value that
has been loaned previously without calling <code class="docutils literal notranslate"><span class="pre">ReturnLoanedValue</span></code> before.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">());</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;other&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint64Type</span><span class="p">());</span>
<span class="n">DynamicType_ptr</span> <span class="n">struct_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>

<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">parent_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>
<span class="n">parent_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;child_struct&quot;</span><span class="p">,</span> <span class="n">struct_type</span><span class="p">);</span>
<span class="n">parent_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">());</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">parent_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

<span class="n">DynamicData</span><span class="o">*</span> <span class="n">child_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">LoanValue</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">child_data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">child_data</span><span class="o">-&gt;</span><span class="n">SetUint64Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">ReturnLoanedValue</span><span class="p">(</span><span class="n">child_data</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="structures-inheritance">
<h4>Structures inheritance<a class="headerlink" href="#structures-inheritance" title="Permalink to this headline">¶</a></h4>
<p>Structures can inherit from other structures. To do that <code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilderFactory</span></code>
has the method <code class="docutils literal notranslate"><span class="pre">CreateChildStructType</span></code> that relates the given struct type with
the new one. The resultant type contains the members of the base class and the ones
that users have added to it.</p>
<p>Structures support several levels of inheritance, creating recursively the members
of all the types in the hierarchy of the struct.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">());</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;other&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint64Type</span><span class="p">());</span>

<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">child_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateChildStructBuilder</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;third&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint64Type</span><span class="p">());</span>

<span class="n">DynamicType_ptr</span> <span class="n">struct_type</span> <span class="o">=</span> <span class="n">child_builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">struct_type</span><span class="p">);</span>

<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetUint64Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetUint64Value</span><span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="alias-of-an-alias">
<h4>Alias of an alias<a class="headerlink" href="#alias-of-an-alias" title="Permalink to this headline">¶</a></h4>
<p>Alias types support recursion, so if users need to create an alias of another alias,
it can be done calling <code class="docutils literal notranslate"><span class="pre">CreateAliasType</span></code> method giving the alias as a base type.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Using Builders</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">created_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStringBuilder</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">created_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">created_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasBuilder</span><span class="p">(</span><span class="n">created_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;alias&quot;</span><span class="p">);</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder2</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasBuilder</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;alias2&quot;</span><span class="p">);</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">builder2</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s">&quot;Dynamic Alias 2 String&quot;</span><span class="p">);</span>

<span class="c1">// Creating directly the Dynamic Type</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStringType</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">pAliasType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasType</span><span class="p">(</span><span class="n">pType</span><span class="p">,</span> <span class="s">&quot;alias&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">pAliasType2</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasType</span><span class="p">(</span><span class="n">pAliasType</span><span class="p">,</span> <span class="s">&quot;alias2&quot;</span><span class="p">);</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pAliasType</span><span class="p">);</span>
<span class="n">data2</span><span class="o">-&gt;</span><span class="n">SetStringValue</span><span class="p">(</span><span class="s">&quot;Dynamic Alias 2 String&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="unions-with-complex-types">
<h4>Unions with complex types<a class="headerlink" href="#unions-with-complex-types" title="Permalink to this headline">¶</a></h4>
<p>Unions support complex types, the available interface to access to them is calling
<code class="docutils literal notranslate"><span class="pre">LoanValue</span></code> to get a pointer to the data and set this field as the active one and
release it calling <code class="docutils literal notranslate"><span class="pre">ReturnLoanedValue</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicType_ptr</span> <span class="n">discriminator</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUnionBuilder</span><span class="p">(</span><span class="n">discriminator</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span> <span class="nb">true</span><span class="p">);</span>

<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">struct_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>
<span class="n">struct_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">());</span>
<span class="n">struct_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;other&quot;</span><span class="p">,</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint64Type</span><span class="p">());</span>
<span class="n">builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">struct_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">},</span> <span class="nb">false</span><span class="p">);</span>

<span class="n">DynamicType_ptr</span> <span class="n">union_type</span> <span class="o">=</span> <span class="n">builder</span><span class="o">-&gt;</span><span class="n">Build</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">union_type</span><span class="p">);</span>

<span class="n">DynamicData</span><span class="o">*</span> <span class="n">child_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">LoanValue</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">child_data</span><span class="o">-&gt;</span><span class="n">SetInt32Value</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">child_data</span><span class="o">-&gt;</span><span class="n">SetInt64Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">ReturnLoanedValue</span><span class="p">(</span><span class="n">child_data</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="serialization">
<h3>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h3>
<p>Dynamic Types have their own <code class="xref py py-class docutils literal notranslate"><span class="pre">pubsub</span></code> type like any class generated with an IDL, and
their management is pretty similar to them.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicPubSubType</span> <span class="nf">pubsubType</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>

<span class="c1">// SERIALIZATION EXAMPLE</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">pData</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="kt">uint32_t</span> <span class="n">payloadSize</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pubsubType</span><span class="p">.</span><span class="n">getSerializedSizeProvider</span><span class="p">(</span><span class="n">data</span><span class="p">)());</span>
<span class="n">SerializedPayload_t</span> <span class="nf">payload</span><span class="p">(</span><span class="n">payloadSize</span><span class="p">);</span>
<span class="n">pubsubType</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">payload</span><span class="p">);</span>

<span class="c1">// DESERIALIZATION EXAMPLE</span>
<span class="n">types</span><span class="o">::</span><span class="n">DynamicData</span><span class="o">*</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
<span class="n">pubsubType</span><span class="p">.</span><span class="n">deserialize</span><span class="p">(</span><span class="o">&amp;</span><span class="n">payload</span><span class="p">,</span> <span class="n">data2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="important-notes">
<h3>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h3>
<p>The most important part of Dynamic Types is memory management because
every dynamic type and dynamic data are managed with pointers. Every object stored
inside of other dynamic object is managed by its owner, so users only must take care
of the objects that they have created calling to the factories.
These two factories in charge to manage these objects, and they must create and delete every object.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder</span><span class="o">*</span> <span class="n">pBuilder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint32Builder</span><span class="p">();</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">pData</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>

<span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">DeleteBuilder</span><span class="p">(</span><span class="n">pBuilder</span><span class="p">);</span>
<span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">DeleteData</span><span class="p">(</span><span class="n">pData</span><span class="p">);</span>
</pre></div>
</div>
<p>To ease this management, the library incorporates a special kind of shared pointers to call
to the factories to delete the object directly ( <code class="docutils literal notranslate"><span class="pre">DynamicTypeBuilder_ptr</span></code> and  <code class="docutils literal notranslate"><span class="pre">DynamicData_ptr</span></code>).
The only restriction on using this kind of pointers are
the methods <code class="docutils literal notranslate"><span class="pre">LoanValue</span></code> and <code class="docutils literal notranslate"><span class="pre">ReturnLoanedValue</span></code>, because they return a pointer
to an object that is already managed by the library and using a <code class="docutils literal notranslate"><span class="pre">DynamicData_ptr</span></code>
with them will cause a crash.
<code class="docutils literal notranslate"><span class="pre">DynamicType</span></code> will always be returned as <code class="docutils literal notranslate"><span class="pre">DynamicType_ptr</span></code> because there is no internal management of its memory.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">pBuilder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUint32Builder</span><span class="p">();</span>
<span class="n">DynamicType_ptr</span> <span class="n">pType</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Type</span><span class="p">();</span>
<span class="n">DynamicData_ptr</span> <span class="n">pData</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pType</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamic-types-discovery-and-endpoint-matching">
<h3>Dynamic Types Discovery and Endpoint Matching<a class="headerlink" href="#dynamic-types-discovery-and-endpoint-matching" title="Permalink to this headline">¶</a></h3>
<p>When using Dynamic Types support, <em>Fast RTPS</em> make use of an optional <em>TopicDiscoveryKind QoS Policy</em> and <code class="docutils literal notranslate"><span class="pre">TypeIdV1</span></code>.
At its current state, the matching will only verify that both endpoints are using the same topic type,
but will not negotiate about it.</p>
<p>This verification is done through <code class="docutils literal notranslate"><span class="pre">MinimalTypeObject</span></code>.</p>
<div class="section" id="topicdiscoverykind">
<h4>TopicDiscoveryKind<a class="headerlink" href="#topicdiscoverykind" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">TopicAttribute</span></code> to indicate which kind of Dynamic discovery we are using.
Can take 3 different values:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">NO_CHECK</span></code>: Default value. Will not perform any check for dynamic types.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">MINIMAL</span></code>: Will check only at <code class="docutils literal notranslate"><span class="pre">TypeInformation</span></code> level (and <code class="docutils literal notranslate"><span class="pre">MinimalTypeObject</span></code> if needed).</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">COMPLETE</span></code>: Will perform a full check with <code class="docutils literal notranslate"><span class="pre">CompleteTypeObject</span></code>.</li>
</ul>
</div>
<div class="section" id="typeobject-typeobjectv1">
<h4>TypeObject (TypeObjectV1)<a class="headerlink" href="#typeobject-typeobjectv1" title="Permalink to this headline">¶</a></h4>
<p>There are two kinds of <code class="docutils literal notranslate"><span class="pre">TypeObject</span></code>: <code class="docutils literal notranslate"><span class="pre">MinimalTypeObject</span></code> and <code class="docutils literal notranslate"><span class="pre">CompleteTypeObject</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">MinimalTypeObject</span></code> is used to check compatibility between types.</li>
<li><code class="docutils literal notranslate"><span class="pre">CompleteTypeObject</span></code> fully describes the type.</li>
</ul>
</div></blockquote>
<p>Both are defined in the annexes of DDS-XTypes V1.2 document so its details will not be covered in this document.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">TypeObject</span></code> is an IDL union with both representation, <em>Minimal</em> and <em>Complete</em>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="typeidentifier-typeidv1">
<h4>TypeIdentifier (TypeIdV1)<a class="headerlink" href="#typeidentifier-typeidv1" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">TypeIdentifier</span></code> is described too in the annexes of <em>DDS-XTypes V1.2 document</em>.
It represents a full description of basic types and has an <code class="xref py py-class docutils literal notranslate"><span class="pre">EquivalenceKind</span></code> for complex ones.
An <code class="xref py py-class docutils literal notranslate"><span class="pre">EquivalenceKind</span></code> is a hash code of 14 octets, as described by the <em>DDS-XTypes V1.2 document</em>.</p>
</div>
<div class="section" id="typeobjectfactory">
<h4>TypeObjectFactory<a class="headerlink" href="#typeobjectfactory" title="Permalink to this headline">¶</a></h4>
<p><em>Singleton</em> class that manages the creation and access for all registered <code class="docutils literal notranslate"><span class="pre">TypeObjects</span></code> and <code class="docutils literal notranslate"><span class="pre">TypeIdentifiers</span></code>.
From a basic <code class="docutils literal notranslate"><span class="pre">TypeIdentifier</span></code> (in other words, a <code class="docutils literal notranslate"><span class="pre">TypeIdentifier</span></code> whose discriminator isn’t
<code class="xref py py-class docutils literal notranslate"><span class="pre">EK_MINIMAL</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">EK_COMPLETE</span></code>) can generate a full <code class="docutils literal notranslate"><span class="pre">DynamicType</span></code>.</p>
</div>
<div class="section" id="fastrtpsgen">
<h4>Fastrtpsgen<a class="headerlink" href="#fastrtpsgen" title="Permalink to this headline">¶</a></h4>
<p><em>FastRTPSGen</em> has been upgraded to generate <code class="xref py py-class docutils literal notranslate"><span class="pre">XXXTypeObject.h</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">XXXTypeObject.cxx</span></code> files,
taking <code class="xref py py-class docutils literal notranslate"><span class="pre">XXX</span></code> as our IDL type. These files provide a small Type Factory for the type <code class="xref py py-class docutils literal notranslate"><span class="pre">XXX</span></code>.
Generally, these files are not used directly, as now the type <code class="xref py py-class docutils literal notranslate"><span class="pre">XXX</span></code> will register itself through its factory to
<code class="docutils literal notranslate"><span class="pre">TypeObjectFactory</span></code> in its constructor, making very easy the use of static types with dynamic types.</p>
</div>
</div>
<div class="section" id="xml-dynamic-types">
<h3>XML Dynamic Types<a class="headerlink" href="#xml-dynamic-types" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="index.html#xmldynamictypes"><span class="std std-ref">XML Dynamic Types</span></a> allows <em>eProsima Fast RTPS</em> to create Dynamic Types directly defining them through XML.
This allows any application to change <code class="docutils literal notranslate"><span class="pre">TopicDataTypes</span></code> without the need to change its source code.</p>
</div>
</div>
<span id="document-persistence"></span><div class="section" id="persistence">
<span id="id1"></span><h2>Persistence<a class="headerlink" href="#persistence" title="Permalink to this headline">¶</a></h2>
<p>By default, the writer’s history is available for remote readers throughout writer’s life.
You can configure Fast RTPS to provide persistence between application executions.
When a writer is created again, it will maintain the previous history and a new remote reader will receive all
samples sent by the writer throughout its life.</p>
<p>A reader keeps information on the latest change notified to the user for each matching writer.
Persisting this information, you could save bandwidth, as the reader will not ask the writers for changes already
notified.</p>
<p>In summary, enabling this feature you will protect the state of endpoints against unexpected failures,
as they will continue communicating after being restarted as if they were just disconnected from the network.</p>
<p>Imagine, for instance, that a writer with a policy to keep its last 100 samples has its history full of changes and the
machine where it runs has a power failure.
When the writer is started again, if a new reader is created, it will not receive the 100 samples that were on the
history of the writer.
With persistence enabled, changes in the history of the writer will be written to disk and read again when the writer is
restarted.</p>
<p>With readers, the information written to disk is different.
Only information about the last change notified to the user is stored on disk.
When a persistent reader is restarted, it will load this information, and will only ask the matching writers to
resend those changes that were not notified to the upper layers.</p>
<p><strong>persistence_guid</strong></p>
<p>Whenever an endpoint (reader or writer) is created, a unique identifier (GUID) is generated.
If the endpoint is restarted, a new GUID will be generated, and other endpoints won’t be able to know it was the same
one.
For this reason, a specific parameter <cite>persistence_guid</cite> should be configured on
<code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::EndpointAttributes</span></code>.
This parameter will be used as the primary key of the data saved on disk, and will also be used to identify the endpoint
on the DDS domain.</p>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>We recommend you to look at the example of how to use this feature the distribution comes with while reading
this section. It is located in <cite>examples/RTPSTest_persistent</cite></p>
<p>In order for the persistence feature to work, some specific <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::Writer</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::Reader</span></code> attributes should be set:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">durabilityKind</span></code> should be set to <code class="docutils literal notranslate"><span class="pre">TRANSIENT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">persistence_guid</span></code> should not be all zeros</li>
<li>A persistence plugin should be configured either on the <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::Writer</span></code>, the
<code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::Reader</span></code> or the <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::RTPSParticipant</span></code></li>
</ul>
<p>You can select and configure the persistence plugin through <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::RTPSParticipant</span></code>
attributes using properties.
A <code class="xref py py-class docutils literal notranslate"><span class="pre">eprosima::fastrtps::rtps::Property</span></code> is defined by its name (<code class="xref py py-class docutils literal notranslate"><span class="pre">std::string</span></code>) and its value
(<code class="xref py py-class docutils literal notranslate"><span class="pre">std::string</span></code>).
Throughout this page, there are tables showing you the properties used by each persistence plugin.</p>
</div>
<div class="section" id="built-in-plugins">
<h3>Built-in plugins<a class="headerlink" href="#built-in-plugins" title="Permalink to this headline">¶</a></h3>
<p>The current version comes out with one persistence built-in plugin:</p>
<ul class="simple">
<li><strong>SQLITE3</strong>: this plugin provides persistence on a local file using SQLite3 API.</li>
</ul>
<div class="section" id="persistence-sqlite3">
<span id="id2"></span><h4>PERSISTENCE:SQLITE3<a class="headerlink" href="#persistence-sqlite3" title="Permalink to this headline">¶</a></h4>
<p>This built-in plugin provides persistence on a local file using SQLite3 API.</p>
<p>You can activate this plugin using RTPSParticipant, Reader or Writer property <code class="docutils literal notranslate"><span class="pre">dds.persistence.plugin</span></code> with the value
<code class="docutils literal notranslate"><span class="pre">builtin.SQLITE3</span></code>.
Next table shows you the properties used by this persistence plugin.</p>
<table border="1" class="docutils align-left" id="id3">
<caption><span class="caption-text"><strong>Properties to configure Persistence::SQLITE3</strong></span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property name <br />
(all properties have “dds.persistence.sqlite3.” prefix)</th>
<th class="head">Property value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>Name of the file used for persistent storage. <br />
Default value: <em>persistence.db</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>This example shows you how to configure an RTPSParticipant to activate and configure <a class="reference internal" href="#persistence-sqlite3"><span class="std std-ref">PERSISTENCE:SQLITE3</span></a> plugin.
It also configures a Writer to persist its history on local storage, and a Reader to persist the highest notified
sequence number on local storage.</p>
<p><strong>RTPSParticipant attributes</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">RTPSParticipantAttributes</span> <span class="n">part_attr</span><span class="p">;</span>

<span class="c1">// Activate Persistence:SQLITE3 plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.persistence.plugin&quot;</span><span class="p">,</span> <span class="s">&quot;builtin.SQLITE3&quot;</span><span class="p">);</span>

<span class="c1">// Configure Persistence:SQLITE3 plugin</span>
<span class="n">part_attr</span><span class="p">.</span><span class="n">properties</span><span class="p">.</span><span class="n">properties</span><span class="p">().</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;dds.persistence.sqlite3.filename&quot;</span><span class="p">,</span> <span class="s">&quot;example.db&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Writer attributes</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">WriterAttributes</span> <span class="n">writer_attr</span><span class="p">;</span>

<span class="c1">// Set durability to TRANSIENT</span>
<span class="n">writer_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">durabilityKind</span> <span class="o">=</span> <span class="n">TRANSIENT</span><span class="p">;</span>

<span class="c1">// Set persistence_guid</span>
<span class="n">writer_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">persistence_guid</span><span class="p">.</span><span class="n">guidPrefix</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">writer_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">persistence_guid</span><span class="p">.</span><span class="n">entityId</span> <span class="o">=</span> <span class="mh">0x12345678</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Reader attributes</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">rtps</span><span class="o">::</span><span class="n">ReaderAttributes</span> <span class="n">reader_attr</span><span class="p">;</span>

<span class="c1">// Set durability to TRANSIENT</span>
<span class="n">reader_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">durabilityKind</span> <span class="o">=</span> <span class="n">TRANSIENT</span><span class="p">;</span>

<span class="c1">// Set persistence_guid</span>
<span class="n">reader_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">persistence_guid</span><span class="p">.</span><span class="n">guidPrefix</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">reader_attr</span><span class="p">.</span><span class="n">endpoint</span><span class="p">.</span><span class="n">persistence_guid</span><span class="p">.</span><span class="n">entityId</span> <span class="o">=</span> <span class="mh">0x3456789A</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-xmlprofiles"></span><div class="section" id="xml-profiles">
<span id="id1"></span><h2>XML profiles<a class="headerlink" href="#xml-profiles" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="index.html#configuration"><span class="std std-ref">Configuration</span></a> section shows how to configure entity attributes using XML profiles,
but this section goes deeper on it, explaining each field with its available values and how to compound the complete XML
files.</p>
<p><em>eProsima Fast RTPS</em> permits to load several XML files, each one containing XML profiles.
In addition to the API functions to load user XML files, at initialization <em>eProsima Fast RTPS</em> tries to locate and load
several default XML files.
<em>eProsima Fast RTPS</em> offers the following options to use default XML files:</p>
<ul class="simple">
<li>Using an XML file with the name <em>DEFAULT_FASTRTPS_PROFILES.xml</em> and located in the current execution path.</li>
<li>Using an XML file which location is defined in the environment variable <em>FASTRTPS_DEFAULT_PROFILES_FILE</em>.</li>
</ul>
<p>An XML profile is defined by a unique name (or <code class="docutils literal notranslate"><span class="pre">&lt;transport_id&gt;</span></code> label
in the <a class="reference internal" href="#transportdescriptors"><span class="std std-ref">Transport descriptors</span></a> case) that is used to reference the XML profile
during the creation of a Fast RTPS entity, <a class="reference internal" href="index.html#comm-transports-configuration"><span class="std std-ref">Transports</span></a>, or <a class="reference internal" href="index.html#dynamic-types"><span class="std std-ref">Dynamic Topic Types</span></a>.</p>
<div class="section" id="making-an-xml">
<h3>Making an XML<a class="headerlink" href="#making-an-xml" title="Permalink to this headline">¶</a></h3>
<p>An XML file can contain several XML profiles. The available profile types are <a class="reference internal" href="#transportdescriptors"><span class="std std-ref">Transport descriptors</span></a>,
<a class="reference internal" href="#xmldynamictypes"><span class="std std-ref">XML Dynamic Types</span></a>, <a class="reference internal" href="#participantprofiles"><span class="std std-ref">Participant profiles</span></a>, <a class="reference internal" href="#publisherprofiles"><span class="std std-ref">Publisher profiles</span></a>, and <a class="reference internal" href="#subscriberprofiles"><span class="std std-ref">Subscriber profiles</span></a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptor&gt;</span>
    <span class="nt">&lt;transport_id&gt;</span>TransportProfile<span class="nt">&lt;/transport_id&gt;</span>
    <span class="nt">&lt;type&gt;</span>UDPv4<span class="nt">&lt;/type&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/transport_descriptor&gt;</span>

<span class="nt">&lt;types&gt;</span>
    <span class="nt">&lt;type&gt;</span>
        <span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;struct_profile&quot;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- ... --&gt;</span>
        <span class="nt">&lt;/struct&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/types&gt;</span>

<span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;participant_profile&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>

<span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;publisher_profile&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>

<span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;subscriber_profile&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
<span class="c">&lt;!--&gt;&lt;--&gt;</span>
</pre></div>
</div>
<p>The Fast-RTPS XML format uses some structures along several profiles types.
For readability, the <a class="reference internal" href="#commonxml"><span class="std std-ref">Common</span></a> section groups these common structures.</p>
<p>Finally, The <a class="reference internal" href="#examplexml"><span class="std std-ref">Example</span></a> section shows an XML file that uses all the possibilities.
This example is useful as a quick reference to look for a particular property and how to use it.
This <a class="reference external" href="https://github.com/eProsima/Fast-RTPS/blob/master/resources/xsd/fastRTPS_profiles.xsd">XSD file</a> can be used
as a quick reference too.</p>
<div class="section" id="loading-and-applying-profiles">
<span id="loadingapplyingprofiles"></span><h4>Loading and applying profiles<a class="headerlink" href="#loading-and-applying-profiles" title="Permalink to this headline">¶</a></h4>
<p>Before creating any entity, it’s required to load XML files using <code class="docutils literal notranslate"><span class="pre">Domain::loadXMLProfilesFile</span></code> function.
<code class="docutils literal notranslate"><span class="pre">createParticipant</span></code>, <code class="docutils literal notranslate"><span class="pre">createPublisher</span></code> and <code class="docutils literal notranslate"><span class="pre">createSubscriber</span></code> have a version
that expects the profile name as an argument. <em>eProsima Fast RTPS</em> searches the XML profile using
this profile name and applies the XML profile to the entity.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">eprosima</span><span class="o">::</span><span class="n">fastrtps</span><span class="o">::</span><span class="n">Domain</span><span class="o">::</span><span class="n">loadXMLProfilesFile</span><span class="p">(</span><span class="s">&quot;my_profiles.xml&quot;</span><span class="p">);</span>

<span class="n">Participant</span> <span class="o">*</span><span class="n">participant</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createParticipant</span><span class="p">(</span><span class="s">&quot;participant_xml_profile&quot;</span><span class="p">);</span>
<span class="n">Publisher</span> <span class="o">*</span><span class="n">publisher</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createPublisher</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="s">&quot;publisher_xml_profile&quot;</span><span class="p">);</span>
<span class="n">Subscriber</span> <span class="o">*</span><span class="n">subscriber</span> <span class="o">=</span> <span class="n">Domain</span><span class="o">::</span><span class="n">createSubscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span> <span class="s">&quot;subscriber_xml_profile&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>To load dynamic types from its declaration through XML see the <a class="reference internal" href="#usage"><span class="std std-ref">Usage</span></a> section of <a class="reference internal" href="#xmldynamictypes"><span class="std std-ref">XML Dynamic Types</span></a>.</p>
</div>
</div>
<div class="section" id="transport-descriptors">
<span id="transportdescriptors"></span><h3>Transport descriptors<a class="headerlink" href="#transport-descriptors" title="Permalink to this headline">¶</a></h3>
<p>This section allows creating transport descriptors to be referenced by the <a class="reference internal" href="#participantprofiles"><span class="std std-ref">Participant profiles</span></a>.
Once a well-defined transport descriptor is referenced by a <strong>Participant profile</strong>, every time that profile
is instantiated it will use or create the related transport.</p>
<p>The following XML code shows the complete list of configurable parameters:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;transport_descriptors&gt;</span>
    <span class="nt">&lt;transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_id&gt;</span>TransportId1<span class="nt">&lt;/transport_id&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;type&gt;</span>UDPv4<span class="nt">&lt;/type&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;sendBufferSize&gt;</span>8192<span class="nt">&lt;/sendBufferSize&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;receiveBufferSize&gt;</span>8192<span class="nt">&lt;/receiveBufferSize&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;TTL&gt;</span>250<span class="nt">&lt;/TTL&gt;</span> <span class="c">&lt;!-- uint8 --&gt;</span>
        <span class="nt">&lt;maxMessageSize&gt;</span>16384<span class="nt">&lt;/maxMessageSize&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;maxInitialPeersRange&gt;</span>100<span class="nt">&lt;/maxInitialPeersRange&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;interfaceWhiteList&gt;</span>
            <span class="nt">&lt;id&gt;</span>192.168.1.41<span class="nt">&lt;/id&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;id&gt;</span>127.0.0.1<span class="nt">&lt;/id&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;/interfaceWhiteList&gt;</span>
        <span class="nt">&lt;wan_addr&gt;</span>80.80.55.44<span class="nt">&lt;/wan_addr&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;output_port&gt;</span>5101<span class="nt">&lt;/output_port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
        <span class="nt">&lt;keep_alive_frequency_ms&gt;</span>5000<span class="nt">&lt;/keep_alive_frequency_ms&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;keep_alive_timeout_ms&gt;</span>25000<span class="nt">&lt;/keep_alive_timeout_ms&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;max_logical_port&gt;</span>9000<span class="nt">&lt;/max_logical_port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
        <span class="nt">&lt;logical_port_range&gt;</span>100<span class="nt">&lt;/logical_port_range&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
        <span class="nt">&lt;logical_port_increment&gt;</span>2<span class="nt">&lt;/logical_port_increment&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
        <span class="nt">&lt;listening_ports&gt;</span>
            <span class="nt">&lt;port&gt;</span>5100<span class="nt">&lt;/port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;port&gt;</span>5200<span class="nt">&lt;/port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
        <span class="nt">&lt;/listening_ports&gt;</span>
        <span class="nt">&lt;calculate_crc&gt;</span>false<span class="nt">&lt;/calculate_crc&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
        <span class="nt">&lt;check_crc&gt;</span>false<span class="nt">&lt;/check_crc&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
        <span class="nt">&lt;enable_tcp_nodelay&gt;</span>false<span class="nt">&lt;/enable_tcp_nodelay&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
    <span class="nt">&lt;/transport_descriptor&gt;</span>

    <span class="nt">&lt;transport_descriptor&gt;</span>
    <span class="nt">&lt;type&gt;</span>UDPv4<span class="nt">&lt;/type&gt;</span>
</pre></div>
</div>
<p>The XML label <code class="docutils literal notranslate"><span class="pre">&lt;transport_descriptors&gt;</span></code> can hold any number of <code class="docutils literal notranslate"><span class="pre">&lt;transport_descriptor&gt;</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="30%" />
<col width="29%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;transport_id&gt;</span></code></td>
<td>Unique name to identify each
transport descriptor.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code></td>
<td>Type of the transport descriptor.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">UDPv4</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UDPv6</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">TCPv4</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TCPv6</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">UDPv4</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;sendBufferSize&gt;</span></code></td>
<td>Size in bytes of the socket
send buffer.
If the value is zero then
FastRTPS will use the default
size from the configuration of
the sockets, using a minimum
size of 65536 bytes.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;receiveBufferSize&gt;</span></code></td>
<td>Size in bytes of the socket
receive buffer.
If the value is zero then
FastRTPS will use the default
size from the configuration of
the sockets, using a minimum
size of 65536 bytes.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;TTL&gt;</span></code></td>
<td><em>Time To Live</em>, <strong>only</strong>
for UDP transports .</td>
<td><code class="docutils literal notranslate"><span class="pre">uint8</span></code></td>
<td>1</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;maxMessageSize&gt;</span></code></td>
<td>The maximum size in bytes
of the transport’s message
buffer.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>65500</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;maxInitialPeersRange&gt;</span></code></td>
<td>The maximum number of
guessed initial peers
to try to connect.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>4</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;interfaceWhiteList&gt;</span></code></td>
<td>Allows defining
<a class="reference internal" href="index.html#whitelist-interfaces"><span class="std std-ref">Whitelist Interfaces</span></a>.</td>
<td><a class="reference internal" href="index.html#whitelist-interfaces"><span class="std std-ref">Whitelist Interfaces</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;wan_addr&gt;</span></code></td>
<td>Public WAN address when
using <strong>TCPv4 transports</strong>.
This field is optional if
the transport doesn’t need
to define a WAN address.</td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">string</span></code> with IPv4 Format</p>
<p class="last"><code class="xref py py-class docutils literal notranslate"><span class="pre">XXX.XXX.XXX.XXX</span></code>.</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;output_port&gt;</span></code></td>
<td>Port used for output bound.
If this field isn’t defined,
the output port will be random
(UDP <strong>only</strong>).</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;keep_alive_frequency_ms&gt;</span></code></td>
<td>Frequency in milliseconds
for sending
<a class="reference internal" href="#rtcpdefinition"><span class="std std-ref">RTCP</span></a>
keep-alive
requests (TCP <strong>only</strong>).</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>50000</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;keep_alive_timeout_ms&gt;</span></code></td>
<td>Time in milliseconds since
sending the last keep-alive
request to consider a connection
as broken. (TCP <strong>only</strong>).</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>10000</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;max_logical_port&gt;</span></code></td>
<td>The maximum number of logical
ports to try during
<a class="reference internal" href="#rtcpdefinition"><span class="std std-ref">RTCP</span></a>
negotiations. (TCP <strong>only</strong>)</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>100</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;logical_port_range&gt;</span></code></td>
<td>The maximum number of logical
ports per request to try
during <a class="reference internal" href="#rtcpdefinition"><span class="std std-ref">RTCP</span></a>
negotiations. (TCP <strong>only</strong>)</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>20</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;logical_port_increment&gt;</span></code></td>
<td>Increment between logical
ports to try during
<a class="reference internal" href="#rtcpdefinition"><span class="std std-ref">RTCP</span></a>
negotiation. (TCP <strong>only</strong>)</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>2</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;listening_ports&gt;</span></code></td>
<td>Local port to work as TCP
acceptor for input connections.
If not set, the transport will
work as TCP client only
(TCP <strong>only</strong>).</td>
<td><code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">&lt;uint16&gt;</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p id="rtcpdefinition">RTCP is the control protocol for communications with RTPS over TCP/IP connections.</p>
<p>There are more examples of transports descriptors in <a class="reference internal" href="index.html#comm-transports-configuration"><span class="std std-ref">Transports</span></a>.</p>
</div>
<div class="section" id="xml-dynamic-types">
<span id="xmldynamictypes"></span><h3>XML Dynamic Types<a class="headerlink" href="#xml-dynamic-types" title="Permalink to this headline">¶</a></h3>
<p>XML Dynamic Types allows creating <em>eProsima Fast RTPS Dynamic Types</em> directly defining them through XML.
It allows any application to change TopicDataTypes without modifying its source code.</p>
<div class="section" id="xml-structure">
<h4>XML Structure<a class="headerlink" href="#xml-structure" title="Permalink to this headline">¶</a></h4>
<p>The XML Types definition (<code class="docutils literal notranslate"><span class="pre">&lt;types&gt;</span></code> tag) can be placed similarly to the profiles tag inside the XML file.
It can be a stand-alone XML Types file or be a child of the Fast-RTPS XML root tag (<code class="docutils literal notranslate"><span class="pre">&lt;dds&gt;</span></code>).
Inside the types tag, there must be one or more type tags (<code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code>).</p>
<p>Stand-Alone:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;types&gt;</span>
    <span class="nt">&lt;type&gt;</span>
        <span class="c">&lt;!-- Type definition --&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;type&gt;</span>
        <span class="c">&lt;!-- Type definition --&gt;</span>
        <span class="c">&lt;!-- Type definition --&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/types&gt;</span>
</pre></div>
</div>
<p>Rooted:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dds&gt;</span>
    <span class="nt">&lt;types&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            <span class="c">&lt;!-- Type definition --&gt;</span>
        <span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            <span class="c">&lt;!-- Type definition --&gt;</span>
            <span class="c">&lt;!-- Type definition --&gt;</span>
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/types&gt;</span>
<span class="nt">&lt;/dds&gt;</span>
</pre></div>
</div>
<p>Finally, each <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> tag can contain one or more <a class="reference internal" href="#type-definition"><span class="std std-ref">Type definitions</span></a>.
Defining several types inside a <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> tag or defining each type in its <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> tag has the same result.</p>
</div>
<div class="section" id="type-definition">
<span id="id2"></span><h4>Type definition<a class="headerlink" href="#type-definition" title="Permalink to this headline">¶</a></h4>
<p><strong>Enum</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;enum&gt;</span></code> type is defined by its <code class="docutils literal notranslate"><span class="pre">name</span></code> and a set of <code class="docutils literal notranslate"><span class="pre">enumerators</span></code>,
each of them with its <code class="docutils literal notranslate"><span class="pre">name</span></code> and its (optional) <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;enum</span> <span class="na">name=</span><span class="s">&quot;MyEnum&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;A&quot;</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;B&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;C&quot;</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/enum&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">enum_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateEnumBuilder</span><span class="p">();</span>
<span class="n">enum_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;MyEnum&quot;</span><span class="p">);</span>
<span class="n">enum_builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="n">enum_builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">);</span>
<span class="n">enum_builder</span><span class="o">-&gt;</span><span class="n">AddEmptyMember</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">enum_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">enum_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Typedef</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;typedef&gt;</span></code> type is defined by its <code class="docutils literal notranslate"><span class="pre">name</span></code> and its <code class="docutils literal notranslate"><span class="pre">value</span></code> or an inner element for complex types.
<code class="docutils literal notranslate"><span class="pre">&lt;typedef&gt;</span></code> corresponds to <code class="xref py py-class docutils literal notranslate"><span class="pre">Alias</span></code> in Dynamic Types glossary.</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;typedef</span> <span class="na">name=</span><span class="s">&quot;MyAliasEnum&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;MyEnum&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;typedef</span> <span class="na">name=</span><span class="s">&quot;MyAliasArray&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span> <span class="na">arrayDimension=</span><span class="s">&quot;2,2&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">alias1_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasBuilder</span><span class="p">(</span><span class="n">enum_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;MyAlias1&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">alias1_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">alias1_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">sequence_lengths</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">};</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">int_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">array_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateArrayBuilder</span><span class="p">(</span><span class="n">int_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">sequence_lengths</span><span class="p">);</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">alias2_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateAliasBuilder</span><span class="p">(</span><span class="n">array_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;MyAlias2&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">alias2_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">alias2_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Struct</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;struct&gt;</span></code> type is defined by its <code class="docutils literal notranslate"><span class="pre">name</span></code> and inner <em>members</em>.</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;MyStruct&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;first&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;second&quot;</span> <span class="na">type=</span><span class="s">&quot;int64&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/struct&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt64Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">struct_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>

<span class="n">struct_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;MyStruct&quot;</span><span class="p">);</span>
<span class="n">struct_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">struct_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="n">long_long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="n">DynamicType_ptr</span> <span class="n">struct_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">struct_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Union</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;union&gt;</span></code> type is defined by its <code class="docutils literal notranslate"><span class="pre">name</span></code>, a <code class="docutils literal notranslate"><span class="pre">discriminator</span></code> and a set of <code class="docutils literal notranslate"><span class="pre">cases</span></code>.
Each <code class="docutils literal notranslate"><span class="pre">case</span></code> has one or more <code class="docutils literal notranslate"><span class="pre">caseDiscriminator</span></code> and a <code class="docutils literal notranslate"><span class="pre">member</span></code>.</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;union</span> <span class="na">name=</span><span class="s">&quot;MyUnion&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;discriminator</span> <span class="na">type=</span><span class="s">&quot;byte&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;case&gt;</span>
        <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;first&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/case&gt;</span>
    <span class="nt">&lt;case&gt;</span>
        <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;second&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;MyStruct&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/case&gt;</span>
    <span class="nt">&lt;case&gt;</span>
        <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;default&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;third&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;int64&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/case&gt;</span>
<span class="nt">&lt;/union&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt64Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">struct_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateStructBuilder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">octet_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateByteBuilder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">union_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateUnionBuilder</span><span class="p">(</span><span class="n">octet_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

<span class="n">union_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;MyUnion&quot;</span><span class="p">);</span>
<span class="n">union_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> <span class="nb">false</span><span class="p">);</span>
<span class="n">union_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;second&quot;</span><span class="p">,</span> <span class="n">struct_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="mi">2</span> <span class="p">},</span> <span class="nb">false</span><span class="p">);</span>
<span class="n">union_builder</span><span class="o">-&gt;</span><span class="n">AddMember</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;third&quot;</span><span class="p">,</span> <span class="n">long_long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="p">},</span> <span class="nb">true</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">union_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">union_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="member-types">
<h4>Member types<a class="headerlink" href="#member-types" title="Permalink to this headline">¶</a></h4>
<p>Member types are any type that can belong to a <code class="docutils literal notranslate"><span class="pre">&lt;struct&gt;</span></code> or a <code class="docutils literal notranslate"><span class="pre">&lt;union&gt;</span></code>, or be aliased by a <code class="docutils literal notranslate"><span class="pre">&lt;typedef&gt;</span></code>.</p>
<p><strong>Basic types</strong></p>
<p>The identifiers of the available basic types are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">boolean</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">int64</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">float128</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">byte</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">char</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">wstring</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">wchar</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint64</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">int16</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">float32</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">int32</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">float64</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>All of them are defined as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_long&quot;</span> <span class="na">type=</span><span class="s">&quot;int64&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt64Builder</span><span class="p">();</span>
<span class="n">long_long_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;my_long&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">long_long_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">long_long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Arrays</strong></p>
<p>Arrays are defined in the same way as any other member type but add the attribute <code class="docutils literal notranslate"><span class="pre">arrayDimensions</span></code>.
The format of this dimensions attribute is the size of each dimension separated by commas.</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;long_array&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span> <span class="na">arrayDimensions=</span><span class="s">&quot;2,3,4&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">lengths</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="p">};</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">array_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateArrayBuilder</span><span class="p">(</span><span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">lengths</span><span class="p">);</span>
<span class="n">array_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;long_array&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">array_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">array_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>It’s IDL analog would be:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span> <span class="n">long_array</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">][</span><span class="mi">4</span><span class="p">];</span>
</pre></div>
</div>
<p><strong>Sequences</strong></p>
<p>Sequences are defined by its <code class="docutils literal notranslate"><span class="pre">name</span></code>, its content <code class="docutils literal notranslate"><span class="pre">type</span></code>, and its <code class="docutils literal notranslate"><span class="pre">sequenceMaxLength</span></code>.
The type of its content should be defined by its <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute.</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;typedef</span> <span class="na">name=</span><span class="s">&quot;my_sequence_inner&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span> <span class="na">sequenceMaxLength=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;SeqSeqStruct&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_sequence_sequence&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;my_sequence_inner&quot;</span> <span class="na">sequenceMaxLength=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/struct&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">child_len</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">seq_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateSequenceBuilder</span><span class="p">(</span><span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
    <span class="n">child_len</span><span class="p">);</span>
<span class="kt">uint32_t</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">seq_seq_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateSequenceBuilder</span><span class="p">(</span>
    <span class="n">seq_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">length</span><span class="p">);</span>
<span class="n">seq_seq_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;my_sequence_sequence&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">seq_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">seq_seq_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The example shows a sequence with <code class="docutils literal notranslate"><span class="pre">sequenceMaxLength</span></code> <code class="docutils literal notranslate"><span class="pre">3</span></code> of sequences with <code class="docutils literal notranslate"><span class="pre">sequenceMaxLength</span></code> <code class="docutils literal notranslate"><span class="pre">2</span></code>
with <code class="docutils literal notranslate"><span class="pre">&lt;int32&gt;</span></code> contents.
As IDL would be:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">sequence</span><span class="o">&lt;</span><span class="n">sequence</span><span class="o">&lt;</span><span class="kt">long</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span><span class="mi">3</span><span class="o">&gt;</span> <span class="n">my_sequence_sequence</span><span class="p">;</span>
</pre></div>
</div>
<p>Note that the inner sequence has been defined before.</p>
<p><strong>Maps</strong></p>
<p>Maps are similar to sequences, but they need to define two types instead of one.
One type defines its <code class="docutils literal notranslate"><span class="pre">key_type</span></code>, and the other type defines its elements types.
Again, both types can be defined as attributes or as members, but when defined
as members, they should be contained in another XML element (<code class="docutils literal notranslate"><span class="pre">&lt;key_type&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> respectively).</p>
<p>Example:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML</th>
<th class="head">C++</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;typedef</span> <span class="na">name=</span><span class="s">&quot;my_map_inner&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span> <span class="na">key_type=</span><span class="s">&quot;int32&quot;</span> <span class="na">mapMaxLength=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;MapMapStruct&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_map_map&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;my_map_inner&quot;</span> <span class="na">key_type=</span><span class="s">&quot;int32&quot;</span> <span class="na">mapMaxLength=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/struct&gt;</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">long_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateInt32Builder</span><span class="p">();</span>
<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">map_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateMapBuilder</span><span class="p">(</span><span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
    <span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">length</span><span class="p">);</span>

<span class="n">DynamicTypeBuilder_ptr</span> <span class="n">map_map_builder</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateMapBuilder</span><span class="p">(</span><span class="n">long_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
    <span class="n">map_builder</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">length</span><span class="p">);</span>
<span class="n">map_map_builder</span><span class="o">-&gt;</span><span class="n">SetName</span><span class="p">(</span><span class="s">&quot;my_map_map&quot;</span><span class="p">);</span>
<span class="n">DynamicType_ptr</span> <span class="n">map_type</span> <span class="o">=</span> <span class="n">DynamicTypeBuilderFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateType</span><span class="p">(</span><span class="n">map_map_builder</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Is equivalent to the IDL:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">map</span><span class="o">&lt;</span><span class="kt">long</span><span class="p">,</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">long</span><span class="p">,</span><span class="kt">long</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span> <span class="n">my_map_map</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Complex types</strong></p>
<p>Once defined, complex types can be used as members in the same way a basic or array type would be.</p>
<p>Example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;OtherStruct&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_enum&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;MyEnum&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_struct&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;MyStruct&quot;</span> <span class="na">arrayDimensions=</span><span class="s">&quot;5&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/struct&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<span id="id3"></span><h4>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>In the application that will make use of <em>XML Types</em>, it’s mandatory to load the XML file that defines
the types before trying to instantiate <em>DynamicPubSubTypes</em> of these types.
It’s important to remark that only <code class="docutils literal notranslate"><span class="pre">&lt;struct&gt;</span></code> types generate usable <em>DynamicPubSubType</em> instances.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Load the XML File</span>
<span class="n">XMLP_ret</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">XMLProfileManager</span><span class="o">::</span><span class="n">loadXMLFile</span><span class="p">(</span><span class="s">&quot;types.xml&quot;</span><span class="p">);</span>
<span class="c1">// Create the &quot;MyStructPubSubType&quot;</span>
<span class="n">DynamicPubSubType</span> <span class="o">*</span><span class="n">pbType</span> <span class="o">=</span> <span class="n">XMLProfileManager</span><span class="o">::</span><span class="n">CreateDynamicPubSubType</span><span class="p">(</span><span class="s">&quot;MyStruct&quot;</span><span class="p">);</span>
<span class="c1">// Create a &quot;MyStruct&quot; instance</span>
<span class="n">DynamicData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">DynamicDataFactory</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">CreateData</span><span class="p">(</span><span class="n">pbType</span><span class="o">-&gt;</span><span class="n">GetDynamicType</span><span class="p">());</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="participant-profiles">
<span id="participantprofiles"></span><h3>Participant profiles<a class="headerlink" href="#participant-profiles" title="Permalink to this headline">¶</a></h3>
<p>Participant profiles allow declaring <a class="reference internal" href="index.html#participantconfiguration"><span class="std std-ref">Participant configuration</span></a> from an XML file.
All the configuration options for the participant belongs to the <code class="docutils literal notranslate"><span class="pre">&lt;rtps&gt;</span></code> label.
The attribute <code class="docutils literal notranslate"><span class="pre">profile_name</span></code> will be the name that the <code class="docutils literal notranslate"><span class="pre">Domain</span></code> will associate to the profile to load it
as shown in <a class="reference internal" href="#loadingapplyingprofiles"><span class="std std-ref">Loading and applying profiles</span></a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;part_profile_name&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rtps&gt;</span>
        <span class="nt">&lt;name&gt;</span>Participant Name<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- String --&gt;</span>

        <span class="nt">&lt;defaultUnicastLocatorList&gt;</span>
            <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv4/&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
        <span class="nt">&lt;/defaultUnicastLocatorList&gt;</span>

        <span class="nt">&lt;defaultMulticastLocatorList&gt;</span>
            <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv4/&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
        <span class="nt">&lt;/defaultMulticastLocatorList&gt;</span>

        <span class="nt">&lt;sendSocketBufferSize&gt;</span>8192<span class="nt">&lt;/sendSocketBufferSize&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>

        <span class="nt">&lt;listenSocketBufferSize&gt;</span>8192<span class="nt">&lt;/listenSocketBufferSize&gt;</span>  <span class="c">&lt;!-- uint32 --&gt;</span>

        <span class="nt">&lt;builtin&gt;</span>
            <span class="c">&lt;!-- BUILTIN --&gt;</span>
        <span class="nt">&lt;/builtin&gt;</span>

        <span class="nt">&lt;port&gt;</span>
            <span class="nt">&lt;portBase&gt;</span>7400<span class="nt">&lt;/portBase&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;domainIDGain&gt;</span>200<span class="nt">&lt;/domainIDGain&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;participantIDGain&gt;</span>10<span class="nt">&lt;/participantIDGain&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;offsetd0&gt;</span>0<span class="nt">&lt;/offsetd0&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;offsetd1&gt;</span>1<span class="nt">&lt;/offsetd1&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;offsetd2&gt;</span>2<span class="nt">&lt;/offsetd2&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;offsetd3&gt;</span>3<span class="nt">&lt;/offsetd3&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
        <span class="nt">&lt;/port&gt;</span>

        <span class="nt">&lt;participantID&gt;</span>99<span class="nt">&lt;/participantID&gt;</span>   <span class="c">&lt;!-- int32 --&gt;</span>

        <span class="nt">&lt;throughputController&gt;</span>
            <span class="nt">&lt;bytesPerPeriod&gt;</span>8192<span class="nt">&lt;/bytesPerPeriod&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
            <span class="nt">&lt;periodMillisecs&gt;</span>1000<span class="nt">&lt;/periodMillisecs&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;/throughputController&gt;</span>

        <span class="nt">&lt;userTransports&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>TransportId1<span class="nt">&lt;/transport_id&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>TransportId2<span class="nt">&lt;/transport_id&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;/userTransports&gt;</span>

        <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>

        <span class="nt">&lt;propertiesPolicy&gt;</span>
            <span class="c">&lt;!-- PROPERTIES_POLICY --&gt;</span>
        <span class="nt">&lt;/propertiesPolicy&gt;</span>
    <span class="nt">&lt;/rtps&gt;</span>
<span class="nt">&lt;/participant&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">LOCATOR_LIST</span></code> means it expects a <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">PROPERTIES_POLICY</span></code> means that the label is a <a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a> block.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">DURATION</span></code> means it expects a <a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a>.</li>
<li>For <code class="xref py py-class docutils literal notranslate"><span class="pre">BUILTIN</span></code> details, please refer to <a class="reference internal" href="#builtin"><span class="std std-ref">Built-in parameters</span></a>.</li>
</ul>
</div>
<p>List with the possible configuration parameter:</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="32%" />
<col width="27%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code></td>
<td>Participant’s name.
It’s not the same
field that <code class="docutils literal notranslate"><span class="pre">profile_name</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;defaultUnicastLocatorList&gt;</span></code></td>
<td>List of default input
unicast locators.
It expects a
<a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</td>
<td><code class="docutils literal notranslate"><span class="pre">LocatorListType</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;defaultMulticastLocatorList&gt;</span></code></td>
<td>List of default input
multicast locators.
It expects
a <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</td>
<td><code class="docutils literal notranslate"><span class="pre">LocatorListType</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;sendSocketBufferSize&gt;</span></code></td>
<td>Size in bytes of the output
socket buffer.
If the value is zero then
FastRTPS will use the default
size from  the configuration
of the sockets, using a
minimum size of 65536 bytes.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;listenSocketBufferSize&gt;</span></code></td>
<td>Size in bytes of the input
socket buffer.
If the value is zero then
FastRTPS will use the default
size from  the configuration
of the sockets, using a
minimum size of 65536 bytes.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint32</span></code></td>
<td>0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;builtin&gt;</span></code></td>
<td>Built-in parameters.
Explained in the
<a class="reference internal" href="#builtin"><span class="std std-ref">Built-in parameters</span></a> section.</td>
<td><a class="reference internal" href="#builtin"><span class="std std-ref">Built-in parameters</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;port&gt;</span></code></td>
<td>Allows defining the port
parameters and gains related
to the RTPS protocol.
Explained in the <a class="reference internal" href="#port">Port</a> section.</td>
<td><a class="reference internal" href="#port">Port</a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;participantID&gt;</span></code></td>
<td>Participant’s identifier.
Typically it will be
automatically generated
by the <code class="docutils literal notranslate"><span class="pre">Domain</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">int32</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;throughputController&gt;</span></code></td>
<td>Allows defining a maximum
throughput.
Explained in the
<a class="reference internal" href="#throughput">Throughput</a> section.</td>
<td><a class="reference internal" href="#throughput">Throughput</a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;userTransports&gt;</span></code></td>
<td>Transport descriptors
to be used by the
participant.</td>
<td><code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">&lt;string&gt;</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;useBuiltinTransports&gt;</span></code></td>
<td>Boolean field to indicate to
the system that the participant
will use  the default builtin
transport independently of its
<code class="docutils literal notranslate"><span class="pre">&lt;userTransports&gt;</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">bool</span></code></td>
<td>true</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;propertiesPolicy&gt;</span></code></td>
<td>Additional configuration
properties.
It expects a
<a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a>.</td>
<td><a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p id="port"><strong>Port Configuration</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="39%" />
<col width="16%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;portBase&gt;</span></code></td>
<td>Base <code class="docutils literal notranslate"><span class="pre">port</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>7400</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;domainIDGain&gt;</span></code></td>
<td>Gain in <code class="docutils literal notranslate"><span class="pre">domainId</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>250</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;participantIDGain&gt;</span></code></td>
<td>Gain in <code class="docutils literal notranslate"><span class="pre">participantId</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>2</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;offsetd0&gt;</span></code></td>
<td>Multicast metadata offset.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;offsetd1&gt;</span></code></td>
<td>Unicast metadata offset.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>10</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;offsetd2&gt;</span></code></td>
<td>Multicast user data offset.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>1</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;offsetd3&gt;</span></code></td>
<td>Unicast user data offset.</td>
<td><code class="docutils literal notranslate"><span class="pre">uint16</span></code></td>
<td>11</td>
</tr>
</tbody>
</table>
<div class="section" id="built-in-parameters">
<span id="builtin"></span><h4>Built-in parameters<a class="headerlink" href="#built-in-parameters" title="Permalink to this headline">¶</a></h4>
<p>This section of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Participant's</span> <span class="pre">rtps</span></code> configuration allows defining built-in parameters.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;builtin&gt;</span>
    <span class="nt">&lt;use_SIMPLE_RTPS_PDP&gt;</span>false<span class="nt">&lt;/use_SIMPLE_RTPS_PDP&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>

    <span class="nt">&lt;use_WriterLivelinessProtocol&gt;</span>false<span class="nt">&lt;/use_WriterLivelinessProtocol&gt;</span>  <span class="c">&lt;!-- boolean --&gt;</span>

    <span class="nt">&lt;EDP&gt;</span>SIMPLE<span class="nt">&lt;/EDP&gt;</span> <span class="c">&lt;!-- string --&gt;</span>

    <span class="nt">&lt;domainId&gt;</span>4<span class="nt">&lt;/domainId&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>

    <span class="nt">&lt;leaseDuration&gt;</span>
        <span class="c">&lt;!-- DURATION --&gt;</span>
    <span class="nt">&lt;/leaseDuration&gt;</span>

    <span class="nt">&lt;leaseAnnouncement&gt;</span>
        <span class="c">&lt;!-- DURATION --&gt;</span>
    <span class="nt">&lt;/leaseAnnouncement&gt;</span>

    <span class="nt">&lt;simpleEDP&gt;</span>
        <span class="nt">&lt;PUBWRITER_SUBREADER&gt;</span>true<span class="nt">&lt;/PUBWRITER_SUBREADER&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
        <span class="nt">&lt;PUBREADER_SUBWRITER&gt;</span>true<span class="nt">&lt;/PUBREADER_SUBWRITER&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
    <span class="nt">&lt;/simpleEDP&gt;</span>

    <span class="nt">&lt;metatrafficUnicastLocatorList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/metatrafficUnicastLocatorList&gt;</span>

    <span class="nt">&lt;metatrafficMulticastLocatorList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/metatrafficMulticastLocatorList&gt;</span>

    <span class="nt">&lt;initialPeersList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/initialPeersList&gt;</span>

    <span class="nt">&lt;staticEndpointXMLFilename&gt;</span>filename.xml<span class="nt">&lt;/staticEndpointXMLFilename&gt;</span> <span class="c">&lt;!-- string --&gt;</span>

    <span class="nt">&lt;readerHistoryMemoryPolicy&gt;</span>PREALLOCATED_WITH_REALLOC<span class="nt">&lt;/readerHistoryMemoryPolicy&gt;</span>

    <span class="nt">&lt;writerHistoryMemoryPolicy&gt;</span>PREALLOCATED_WITH_REALLOC<span class="nt">&lt;/writerHistoryMemoryPolicy&gt;</span>
<span class="nt">&lt;/builtin&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="34%" />
<col width="22%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;use_SIMPLE_RTPS_PDP&gt;</span></code></td>
<td>Indicates if the Participant
must use the Simple RTPS Discovery
Protocol.</td>
<td><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;use_WriterLivelinessProtocol&gt;</span></code></td>
<td>Indicates to use the
WriterLiveliness protocol.</td>
<td><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;EDP&gt;</span></code></td>
<td><ul class="first last simple">
<li>If set to <code class="xref py py-class docutils literal notranslate"><span class="pre">SIMPLE</span></code>,
<code class="docutils literal notranslate"><span class="pre">&lt;simpleEDP&gt;</span></code> would be used.</li>
<li>If set to <code class="xref py py-class docutils literal notranslate"><span class="pre">STATIC</span></code>,
StaticEDP based on an XML
file would be used with the
contents of
<code class="docutils literal notranslate"><span class="pre">&lt;staticEndpointXMLFilename&gt;</span></code>.</li>
</ul>
</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">SIMPLE</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">STATIC</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">SIMPLE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;domainId&gt;</span></code></td>
<td>DomainId to be used by
the RTPSParticipant.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;leaseDuration&gt;</span></code></td>
<td>Indicates how much time remote
RTPSParticipants should consider this
RTPSParticipant alive.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>130 s</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;leaseAnnouncement&gt;</span></code></td>
<td>The period for the RTPSParticipant
to send its Discovery Message to all
other discovered RTPSParticipants
as well as to all Multicast ports.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>40 s</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;simpleEDP&gt;</span></code></td>
<td>Attributes of the SimpleEDP
protocol</td>
<td><a class="reference internal" href="#sedp"><span class="std std-ref">simpleEDP</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;metatrafficUnicastLocatorList&gt;</span></code></td>
<td>Metatraffic Unicast Locator
List</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;metatrafficMulticastLocatorList&gt;</span></code></td>
<td>Metatraffic Multicast Locator
List</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;initialPeersList&gt;</span></code></td>
<td>Initial peers.</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;staticEndpointXMLFilename&gt;</span></code></td>
<td>StaticEDP XML filename.
Only necessary if <code class="docutils literal notranslate"><span class="pre">&lt;EDP&gt;</span></code>
is set to <code class="xref py py-class docutils literal notranslate"><span class="pre">STATIC</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;readerHistoryMemoryPolicy&gt;</span></code></td>
<td>Memory policy for builtin
readers.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED_WITH_REALLOC</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DYNAMIC</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;writerHistoryMemoryPolicy&gt;</span></code></td>
<td>Memory policy for builtin
writers.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED_WITH_REALLOC</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DYNAMIC</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code></td>
</tr>
</tbody>
</table>
<p id="sedp"><strong>simpleEDP</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="45%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;PUBWRITER_SUBREADER&gt;</span></code></td>
<td>Indicates if the participant must use
Publication Writer and Subscription Reader.</td>
<td><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;PUBREADER_SUBWRITER&gt;</span></code></td>
<td>Indicates if the participant must use
Publication Reader and Subscription Writer.</td>
<td><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">true</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="publisher-profiles">
<span id="publisherprofiles"></span><h3>Publisher profiles<a class="headerlink" href="#publisher-profiles" title="Permalink to this headline">¶</a></h3>
<p>Publisher profiles allow declaring <a class="reference internal" href="index.html#pubsubconfiguration"><span class="std std-ref">Publisher configuration</span></a> from an XML file.
The attribute <code class="docutils literal notranslate"><span class="pre">profile_name</span></code> is the name that the <code class="docutils literal notranslate"><span class="pre">Domain</span></code> associates to the profile to load it
as shown in the <a class="reference internal" href="#loadingapplyingprofiles"><span class="std std-ref">Loading and applying profiles</span></a> section.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;pub_profile_name&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="c">&lt;!-- TOPIC_TYPE --&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>

    <span class="nt">&lt;qos&gt;</span>
        <span class="c">&lt;!-- QOS --&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>

    <span class="nt">&lt;times&gt;</span> <span class="c">&lt;!-- writerTimesType --&gt;</span>
        <span class="nt">&lt;initialHeartbeatDelay&gt;</span>
            <span class="c">&lt;!-- DURATION --&gt;</span>
        <span class="nt">&lt;/initialHeartbeatDelay&gt;</span>
        <span class="nt">&lt;heartbeatPeriod&gt;</span>
            <span class="c">&lt;!-- DURATION --&gt;</span>
        <span class="nt">&lt;/heartbeatPeriod&gt;</span>
        <span class="nt">&lt;nackResponseDelay&gt;</span>
            <span class="c">&lt;!-- DURATION --&gt;</span>
        <span class="nt">&lt;/nackResponseDelay&gt;</span>
        <span class="nt">&lt;nackSupressionDuration&gt;</span>
            <span class="c">&lt;!-- DURATION --&gt;</span>
        <span class="nt">&lt;/nackSupressionDuration&gt;</span>
    <span class="nt">&lt;/times&gt;</span>

    <span class="nt">&lt;unicastLocatorList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/unicastLocatorList&gt;</span>

    <span class="nt">&lt;multicastLocatorList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/multicastLocatorList&gt;</span>

    <span class="nt">&lt;throughputController&gt;</span>
        <span class="nt">&lt;bytesPerPeriod&gt;</span>8192<span class="nt">&lt;/bytesPerPeriod&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
        <span class="nt">&lt;periodMillisecs&gt;</span>1000<span class="nt">&lt;/periodMillisecs&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
    <span class="nt">&lt;/throughputController&gt;</span>

    <span class="nt">&lt;historyMemoryPolicy&gt;</span>DYNAMIC<span class="nt">&lt;/historyMemoryPolicy&gt;</span>

    <span class="nt">&lt;propertiesPolicy&gt;</span>
        <span class="c">&lt;!-- PROPERTIES_POLICY --&gt;</span>
    <span class="nt">&lt;/propertiesPolicy&gt;</span>

    <span class="nt">&lt;userDefinedID&gt;</span>55<span class="nt">&lt;/userDefinedID&gt;</span> <span class="c">&lt;!-- Int16 --&gt;</span>

    <span class="nt">&lt;entityID&gt;</span>66<span class="nt">&lt;/entityID&gt;</span> <span class="c">&lt;!-- Int16 --&gt;</span>
<span class="nt">&lt;/publisher&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">LOCATOR_LIST</span></code> means it expects a <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">PROPERTIES_POLICY</span></code> means that the label is a <a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a> block.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">DURATION</span></code> means it expects a <a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a>.</li>
<li>For <code class="xref py py-class docutils literal notranslate"><span class="pre">QOS</span></code> details, please refer to <a class="reference internal" href="#commonqos"><span class="std std-ref">QOS</span></a>.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">TOPIC_TYPE</span></code> is detailed in section <a class="reference internal" href="#topictype"><span class="std std-ref">Topic Type</span></a>.</li>
</ul>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="23%" />
<col width="32%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;topic&gt;</span></code></td>
<td><a class="reference internal" href="#topictype"><span class="std std-ref">Topic Type</span></a>
configuration of the
publisher.</td>
<td><a class="reference internal" href="#topictype"><span class="std std-ref">Topic Type</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;qos&gt;</span></code></td>
<td>Publisher
<a class="reference internal" href="#commonqos"><span class="std std-ref">QOS</span></a>
configuration.</td>
<td><a class="reference internal" href="#commonqos"><span class="std std-ref">QOS</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;times&gt;</span></code></td>
<td>It allows configuring
some time related
parameters of the
publisher.</td>
<td><a class="reference internal" href="#pubtimes"><span class="std std-ref">Times</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;unicastLocatorList&gt;</span></code></td>
<td>List of input unicast
locators. It expects
a <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;multicastLocatorList&gt;</span></code></td>
<td>List of input multicast
locators. It expects
a <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;throughputController&gt;</span></code></td>
<td>Limits the output
bandwidth of
the publisher.</td>
<td><a class="reference internal" href="#throughput">Throughput</a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;historyMemoryPolicy&gt;</span></code></td>
<td>Memory allocation kind
for publisher’s history.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED_WITH_REALLOC</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">DYNAMIC</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;propertiesPolicy&gt;</span></code></td>
<td>Additional configuration
properties.</td>
<td><a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;userDefinedID&gt;</span></code></td>
<td>Used for
StaticEndpointDiscovery.</td>
<td><code class="docutils literal notranslate"><span class="pre">Int16</span></code></td>
<td>-1</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;entityID&gt;</span></code></td>
<td>EntityId of the
<em>endpoint</em>.</td>
<td><code class="docutils literal notranslate"><span class="pre">Int16</span></code></td>
<td>-1</td>
</tr>
</tbody>
</table>
<p id="pubtimes"><strong>Times</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="34%" />
<col width="23%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;initialHeartbeatDelay&gt;</span></code></td>
<td>Initial heartbeat delay.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>~45 ms</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;heartbeatPeriod&gt;</span></code></td>
<td>Periodic HB period.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>3 s</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;nackResponseDelay&gt;</span></code></td>
<td>Delay to apply to the
response of a ACKNACK
message.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>~45 ms</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;nackSupressionDuration&gt;</span></code></td>
<td>This time allows the
RTPSWriter to ignore
nack messages too soon
after the data has been sent.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>0 ms</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="subscriber-profiles">
<span id="subscriberprofiles"></span><h3>Subscriber profiles<a class="headerlink" href="#subscriber-profiles" title="Permalink to this headline">¶</a></h3>
<p>Subscriber profiles allow declaring <a class="reference internal" href="index.html#pubsubconfiguration"><span class="std std-ref">Subscriber configuration</span></a> from an XML file.
The attribute <code class="docutils literal notranslate"><span class="pre">profile_name</span></code> is the name that the <code class="docutils literal notranslate"><span class="pre">Domain</span></code> associates to the profile to load it
as shown in <a class="reference internal" href="#loadingapplyingprofiles"><span class="std std-ref">Loading and applying profiles</span></a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;sub_profile_name&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;topic&gt;</span>
        <span class="c">&lt;!-- TOPIC_TYPE --&gt;</span>
    <span class="nt">&lt;/topic&gt;</span>

    <span class="nt">&lt;qos&gt;</span>
        <span class="c">&lt;!-- QOS --&gt;</span>
    <span class="nt">&lt;/qos&gt;</span>

    <span class="nt">&lt;times&gt;</span> <span class="c">&lt;!-- readerTimesType --&gt;</span>
        <span class="nt">&lt;initialAcknackDelay&gt;</span>
            <span class="c">&lt;!-- DURATION --&gt;</span>
        <span class="nt">&lt;/initialAcknackDelay&gt;</span>
        <span class="nt">&lt;heartbeatResponseDelay&gt;</span>
            <span class="c">&lt;!-- DURATION --&gt;</span>
        <span class="nt">&lt;/heartbeatResponseDelay&gt;</span>
    <span class="nt">&lt;/times&gt;</span>

    <span class="nt">&lt;unicastLocatorList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/unicastLocatorList&gt;</span>

    <span class="nt">&lt;multicastLocatorList&gt;</span>
        <span class="c">&lt;!-- LOCATOR_LIST --&gt;</span>
        <span class="nt">&lt;locator&gt;</span>
            <span class="nt">&lt;udpv4/&gt;</span>
        <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;/multicastLocatorList&gt;</span>

    <span class="nt">&lt;expectsInlineQos&gt;</span>true<span class="nt">&lt;/expectsInlineQos&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>

    <span class="nt">&lt;historyMemoryPolicy&gt;</span>DYNAMIC<span class="nt">&lt;/historyMemoryPolicy&gt;</span>

    <span class="nt">&lt;propertiesPolicy&gt;</span>
        <span class="c">&lt;!-- PROPERTIES_POLICY --&gt;</span>
    <span class="nt">&lt;/propertiesPolicy&gt;</span>

    <span class="nt">&lt;userDefinedID&gt;</span>55<span class="nt">&lt;/userDefinedID&gt;</span> <span class="c">&lt;!-- Int16 --&gt;</span>

    <span class="nt">&lt;entityID&gt;</span>66<span class="nt">&lt;/entityID&gt;</span> <span class="c">&lt;!-- Int16 --&gt;</span>
<span class="nt">&lt;/subscriber&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">LOCATOR_LIST</span></code> means it expects a <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">PROPERTIES_POLICY</span></code> means that the label is a <a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a> block.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">DURATION</span></code> means it expects a <a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a>.</li>
<li>For <code class="xref py py-class docutils literal notranslate"><span class="pre">QOS</span></code> details, please refer to <a class="reference internal" href="#commonqos"><span class="std std-ref">QOS</span></a>.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">TOPIC_TYPE</span></code> is detailed in section <a class="reference internal" href="#topictype"><span class="std std-ref">Topic Type</span></a>.</li>
</ul>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="23%" />
<col width="32%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;topic&gt;</span></code></td>
<td><a class="reference internal" href="#topictype"><span class="std std-ref">Topic Type</span></a>
configuration of the
subscriber.</td>
<td><a class="reference internal" href="#topictype"><span class="std std-ref">Topic Type</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;qos&gt;</span></code></td>
<td>Subscriber
<a class="reference internal" href="#commonqos"><span class="std std-ref">QOS</span></a>
configuration.</td>
<td><a class="reference internal" href="#commonqos"><span class="std std-ref">QOS</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;times&gt;</span></code></td>
<td>It allows configuring
some time related
parameters of the
subscriber.</td>
<td><a class="reference internal" href="#subtimes"><span class="std std-ref">Times</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;unicastLocatorList&gt;</span></code></td>
<td>List of input unicast
locators. It expects a
<a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;multicastLocatorList&gt;</span></code></td>
<td>List of input multicast
locators. It expects a
<a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a>.</td>
<td>List of <a class="reference internal" href="#locatorlisttype"><span class="std std-ref">LocatorListType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;expectsInlineQos&gt;</span></code></td>
<td>It indicates if QOS is
expected inline.</td>
<td><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;historyMemoryPolicy&gt;</span></code></td>
<td>Memory allocation kind
for subscriber’s history.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED_WITH_REALLOC</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">DYNAMIC</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">PREALLOCATED</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;propertiesPolicy&gt;</span></code></td>
<td>Additional configuration
properties.</td>
<td><a class="reference internal" href="#propertiespolicytype"><span class="std std-ref">PropertiesPolicyType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;userDefinedID&gt;</span></code></td>
<td>Used for
StaticEndpointDiscovery.</td>
<td><code class="docutils literal notranslate"><span class="pre">Int16</span></code></td>
<td>-1</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;entityID&gt;</span></code></td>
<td>EntityId of the
<em>endpoint</em>.</td>
<td><code class="docutils literal notranslate"><span class="pre">Int16</span></code></td>
<td>-1</td>
</tr>
</tbody>
</table>
<p id="subtimes"><strong>Times</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="36%" />
<col width="22%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;initialAcknackDelay&gt;</span></code></td>
<td>Initial AckNack delay.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>~45 ms</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;heartbeatResponseDelay&gt;</span></code></td>
<td>Delay to be applied when
a heartbeat message is received.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>~4.5 ms</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="common">
<span id="commonxml"></span><h3>Common<a class="headerlink" href="#common" title="Permalink to this headline">¶</a></h3>
<p>In the above profiles, some types are used in several different places. To avoid too many details, some of that
places have a tag like <code class="xref py py-class docutils literal notranslate"><span class="pre">LocatorListType</span></code> that indicates that field is defined in this section.</p>
<div class="section" id="locatorlisttype">
<span id="id4"></span><h4>LocatorListType<a class="headerlink" href="#locatorlisttype" title="Permalink to this headline">¶</a></h4>
<p>It represents a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Locator_t</span></code>.
LocatorListType is normally used as an anonymous type, this is, it hasn’t its own label.
Instead, it is used inside other configuration parameter labels that expect a list of locators and give it sense,
for example, in <code class="docutils literal notranslate"><span class="pre">&lt;defaultUnicastLocatorList&gt;</span></code>.
The locator kind is defined by its own tag and can take the values <code class="docutils literal notranslate"><span class="pre">&lt;udpv4&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;tcpv4&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;udpv6&gt;</span></code>, and
<code class="docutils literal notranslate"><span class="pre">&lt;tcpv6&gt;</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;defaultUnicastLocatorList&gt;</span>
    <span class="nt">&lt;locator&gt;</span>
        <span class="nt">&lt;udpv4&gt;</span>
            <span class="c">&lt;!-- Access as physical, typical UDP usage --&gt;</span>
            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
            <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
        <span class="nt">&lt;/udpv4&gt;</span>
    <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;locator&gt;</span>
        <span class="nt">&lt;tcpv4&gt;</span>
            <span class="c">&lt;!-- Both physical and logical (port), useful in TCP transports --&gt;</span>
            <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
            <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
            <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
        <span class="nt">&lt;/tcpv4&gt;</span>
    <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;locator&gt;</span>
        <span class="nt">&lt;udpv6&gt;</span>
            <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
            <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
        <span class="nt">&lt;/udpv6&gt;</span>
    <span class="nt">&lt;/locator&gt;</span>
    <span class="nt">&lt;locator&gt;</span>
        <span class="nt">&lt;tcpv6&gt;</span>
            <span class="c">&lt;!-- Both physical and logical (port), useful in TCP transports --&gt;</span>
            <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span> <span class="c">&lt;!-- uint16 --&gt;</span>
            <span class="nt">&lt;address&gt;</span>fe80::55e3:290:165:5af8<span class="nt">&lt;/address&gt;</span>
        <span class="nt">&lt;/tcpv6&gt;</span>
    <span class="nt">&lt;/locator&gt;</span>
<span class="nt">&lt;/defaultUnicastLocatorList&gt;</span>
</pre></div>
</div>
<p>In this example, there are one locator of each kind in <code class="docutils literal notranslate"><span class="pre">&lt;defaultUnicastLocatorList&gt;</span></code>.</p>
<p>Let’s see each possible Locator’s field in detail:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="32%" />
<col width="32%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;port&gt;</span></code></td>
<td>RTPS port number of the locator.
<em>Physical port</em> in UDP,
<em>logical port</em> in TCP.</td>
<td><code class="docutils literal notranslate"><span class="pre">Uint32</span></code></td>
<td>0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;physical_port&gt;</span></code></td>
<td>TCP’s <em>physical port</em>.</td>
<td><code class="docutils literal notranslate"><span class="pre">Uint32</span></code></td>
<td>0</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;address&gt;</span></code></td>
<td>IP address of the locator.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code> with expected format</td>
<td>“”</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;unique_lan_id&gt;</span></code></td>
<td>The LAN ID uniquely identifies
the LAN the locator belongs to
(<strong>TCPv4 only</strong>).</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code> (16 bytes)</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;wan_address&gt;</span></code></td>
<td>WAN IPv4 address
(<strong>TCPv4 only</strong>).</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code> with IPv4 Format</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">0.0.0.0</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="propertiespolicytype">
<span id="id5"></span><h4>PropertiesPolicyType<a class="headerlink" href="#propertiespolicytype" title="Permalink to this headline">¶</a></h4>
<p>PropertiesPolicyType (XML label <code class="docutils literal notranslate"><span class="pre">&lt;propertiesPolicy&gt;</span></code>) allows defining a set of generic properties.
It’s useful at defining extended or custom configuration parameters.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;propertiesPolicy&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;property&gt;</span>
            <span class="nt">&lt;name&gt;</span>Property1Name<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;value&gt;</span>Property1Value<span class="nt">&lt;/value&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property&gt;</span>
            <span class="nt">&lt;name&gt;</span>Property2Name<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;value&gt;</span>Property2Value<span class="nt">&lt;/value&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;propagate&gt;</span>true<span class="nt">&lt;/propagate&gt;</span> <span class="c">&lt;!-- boolean --&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
<span class="nt">&lt;/propertiesPolicy&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="48%" />
<col width="15%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code></td>
<td>Name to identify the property.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code></td>
<td>Property’s value.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;propagate&gt;</span></code></td>
<td>Indicates if it is going to be serialized
along with the object it belongs to.</td>
<td><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="durationtype">
<span id="id6"></span><h4>DurationType<a class="headerlink" href="#durationtype" title="Permalink to this headline">¶</a></h4>
<p>DurationType expresses a period of time and it’s commonly used as an anonymous type, this is, it hasn’t its own label.
Instead, it is used inside other configuration parameter labels that give it sense, like <code class="docutils literal notranslate"><span class="pre">&lt;leaseAnnouncement&gt;</span></code> or
<code class="docutils literal notranslate"><span class="pre">&lt;leaseDuration&gt;</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;leaseDuration&gt;</span>INFINITE<span class="nt">&lt;/leaseDuration&gt;</span> <span class="c">&lt;!-- string --&gt;</span>

<span class="nt">&lt;leaseDuration&gt;</span>
    <span class="nt">&lt;sec&gt;</span>500<span class="nt">&lt;/sec&gt;</span> <span class="c">&lt;!-- int32 --&gt;</span>
    <span class="nt">&lt;fraction&gt;</span>0<span class="nt">&lt;/fraction&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
<span class="nt">&lt;/leaseDuration&gt;</span>

<span class="nt">&lt;leaseAnnouncement&gt;</span>
    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span> <span class="c">&lt;!-- int32 --&gt;</span>
    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
<span class="nt">&lt;/leaseAnnouncement&gt;</span>
</pre></div>
</div>
<p>Duration time can be defined through a constant value directly (<code class="xref py py-class docutils literal notranslate"><span class="pre">INFINITE</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ZERO</span></code>, or <code class="xref py py-class docutils literal notranslate"><span class="pre">INVALID</span></code>),
or by <code class="docutils literal notranslate"><span class="pre">&lt;seconds&gt;</span></code> plus <code class="docutils literal notranslate"><span class="pre">&lt;fraction&gt;</span></code> labels:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">INFINITE</span></code>: Constant value, represents an infinite period of time.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ZERO</span></code>: Constant value, represents 0.0 seconds.</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">INVALID</span></code>: Constant value, represents an invalid period of time.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="64%" />
<col width="12%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;seconds&gt;</span></code></td>
<td>Number of seconds.</td>
<td><code class="docutils literal notranslate"><span class="pre">Int32</span></code></td>
<td>0</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;fraction&gt;</span></code></td>
<td>Fractions of a second. A fraction is <code class="xref py py-class docutils literal notranslate"><span class="pre">1/(2^32)</span></code> seconds.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="topic-type">
<span id="topictype"></span><h4>Topic Type<a class="headerlink" href="#topic-type" title="Permalink to this headline">¶</a></h4>
<p>The topic name and data type are used as meta-data to determine whether Publishers and Subscribers can exchange
messages.
There is a deeper explanation of the “topic” field here: <a class="reference internal" href="index.html#topic-information"><span class="std std-ref">Topic information</span></a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;topic&gt;</span>
    <span class="nt">&lt;kind&gt;</span>NO_KEY<span class="nt">&lt;/kind&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
    <span class="nt">&lt;name&gt;</span>TopicName<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
    <span class="nt">&lt;dataType&gt;</span>TopicDataTypeName<span class="nt">&lt;/dataType&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
    <span class="nt">&lt;historyQos&gt;</span>
        <span class="nt">&lt;kind&gt;</span>KEEP_LAST<span class="nt">&lt;/kind&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;depth&gt;</span>20<span class="nt">&lt;/depth&gt;</span> <span class="c">&lt;!-- uint32 --&gt;</span>
    <span class="nt">&lt;/historyQos&gt;</span>
    <span class="nt">&lt;resourceLimitsQos&gt;</span>
        <span class="nt">&lt;max_samples&gt;</span>5<span class="nt">&lt;/max_samples&gt;</span> <span class="c">&lt;!-- unint32 --&gt;</span>
        <span class="nt">&lt;max_instances&gt;</span>2<span class="nt">&lt;/max_instances&gt;</span> <span class="c">&lt;!-- unint32 --&gt;</span>
        <span class="nt">&lt;max_samples_per_instance&gt;</span>1<span class="nt">&lt;/max_samples_per_instance&gt;</span> <span class="c">&lt;!-- unint32 --&gt;</span>
        <span class="nt">&lt;allocated_samples&gt;</span>20<span class="nt">&lt;/allocated_samples&gt;</span> <span class="c">&lt;!-- unint32 --&gt;</span>
    <span class="nt">&lt;/resourceLimitsQos&gt;</span>
<span class="nt">&lt;/topic&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="29%" />
<col width="32%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;kind&gt;</span></code></td>
<td>It defines the Topic’s
kind</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">NO_KEY</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">WITH_KEY</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">NO_KEY</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code></td>
<td>It defines the Topic’s
name. Must be unique.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;dataType&gt;</span></code></td>
<td>It references the
Topic’s data type.</td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;historyQos&gt;</span></code></td>
<td>It controls the behavior
of <em>Fast RTPS</em> when the value
of an instance changes before
it is finally communicated to
some of its existing
DataReader entities.</td>
<td><a class="reference internal" href="#hqos"><span class="std std-ref">HistoryQos</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;resourceLimitsQos&gt;</span></code></td>
<td>It controls the resources
that <em>Fast RTPS</em> can use
in order to meet the
requirements imposed
by the application
and other QoS settings.</td>
<td><a class="reference internal" href="#rlsqos"><span class="std std-ref">ResourceLimitsQos</span></a></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p id="hqos"><strong>HistoryQoS</strong></p>
<p>It controls the behavior of <em>Fast RTPS</em> when the value of an instance changes before it is finally
communicated to some of its existing DataReader entities.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="31%" />
<col width="27%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;kind&gt;</span></code></td>
<td>See description below.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">KEEP_LAST</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">KEEP_ALL</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">KEEP_LAST</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;depth&gt;</span></code></td>
<td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>1000</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">If the <code class="docutils literal notranslate"><span class="pre">&lt;kind&gt;</span></code> is set to <code class="xref py py-class docutils literal notranslate"><span class="pre">KEEP_LAST</span></code>, then <em>Fast RTPS</em> will only attempt to keep the latest values of the
instance and discard the older ones.</div>
<div class="line">If the <code class="docutils literal notranslate"><span class="pre">&lt;kind&gt;</span></code> is set to <code class="xref py py-class docutils literal notranslate"><span class="pre">KEEP_ALL</span></code>, then <em>Fast RTPS</em> will attempt to maintain and deliver all the values
of the instance to existing subscribers.</div>
<div class="line">The setting of <code class="docutils literal notranslate"><span class="pre">&lt;depth&gt;</span></code> must be consistent with the <a class="reference internal" href="#rlsqos"><span class="std std-ref">ResourceLimitsQos</span></a>
<code class="docutils literal notranslate"><span class="pre">&lt;max_samples_per_instance&gt;</span></code>.
For these two QoS to be consistent, they must verify that <code class="docutils literal notranslate"><span class="pre">depth</span> <span class="pre">&lt;=</span> <span class="pre">max_samples_per_instance</span></code>.</div>
</div>
<p id="rlsqos"><strong>ResourceLimitsQos</strong></p>
<p>It controls the resources that <em>Fast RTPS</em> can use in order to meet the requirements imposed by the
application and other QoS settings.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="52%" />
<col width="11%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;max_samples&gt;</span></code></td>
<td>It must verify that
<code class="docutils literal notranslate"><span class="pre">max_samples</span> <span class="pre">&gt;=</span> <span class="pre">max_samples_per_instance</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>5000</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;max_instances&gt;</span></code></td>
<td>It defines the maximum number of instances.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>10</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;max_samples_per_instance&gt;</span></code></td>
<td>It must verify that <a class="reference internal" href="#hqos"><span class="std std-ref">HistoryQos</span></a>
<code class="docutils literal notranslate"><span class="pre">depth</span> <span class="pre">&lt;=</span> <span class="pre">max_samples_per_instance</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>400</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;allocated_samples&gt;</span></code></td>
<td>It controls the maximum number of samples to be stored.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>100</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="qos">
<span id="commonqos"></span><h4>QOS<a class="headerlink" href="#qos" title="Permalink to this headline">¶</a></h4>
<p>The quality of service (QoS) handles the restrictions applied to the application.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;qos&gt;</span> <span class="c">&lt;!-- readerQosPoliciesType --&gt;</span>
    <span class="nt">&lt;durability&gt;</span>
        <span class="nt">&lt;kind&gt;</span>VOLATILE<span class="nt">&lt;/kind&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
    <span class="nt">&lt;/durability&gt;</span>

    <span class="nt">&lt;liveliness&gt;</span>
        <span class="c">&lt;!-- LIVELINESS --&gt;</span>
        <span class="nt">&lt;kind&gt;</span>AUTOMATIC<span class="nt">&lt;/kind&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
    <span class="nt">&lt;/liveliness&gt;</span>

    <span class="nt">&lt;reliability&gt;</span>
        <span class="nt">&lt;kind&gt;</span>BEST_EFFORT<span class="nt">&lt;/kind&gt;</span>
    <span class="nt">&lt;/reliability&gt;</span>

    <span class="nt">&lt;partition&gt;</span>
        <span class="nt">&lt;names&gt;</span>
            <span class="nt">&lt;name&gt;</span>part1<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
            <span class="nt">&lt;name&gt;</span>part2<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
        <span class="nt">&lt;/names&gt;</span>
    <span class="nt">&lt;/partition&gt;</span>
<span class="nt">&lt;/qos&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="35%" />
<col width="30%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;durability&gt;</span></code></td>
<td>It is defined on
<a class="reference internal" href="index.html#settingdatadurability"><span class="std std-ref">Setting the data durability kind</span></a> section.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">VOLATILE</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">TRANSIENT_LOCAL</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">TRANSIENT</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">VOLATILE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;liveliness&gt;</span></code></td>
<td>Defines the liveliness of the
participant.</td>
<td><a class="reference internal" href="#livelinesstype"><span class="std std-ref">LivelinessType</span></a></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;reliability&gt;</span></code></td>
<td>It is defined on <a class="reference internal" href="index.html#reliability"><span class="std std-ref">Reliability</span></a>
section.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">RELIABLE</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">BEST_EFFORT</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">RELIABLE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;partition&gt;</span></code></td>
<td>&#160;</td>
<td>It allows the introduction of
a logical partition concept
inside the ‘physical’ partition
induced by a domain.</td>
<td><code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">&lt;string&gt;</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="livelinesstype">
<span id="id7"></span><h4>LivelinessType<a class="headerlink" href="#livelinesstype" title="Permalink to this headline">¶</a></h4>
<p>This parameter defines who is responsible for issues of liveliness packets.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;liveliness&gt;</span>
    <span class="nt">&lt;kind&gt;</span>AUTOMATIC<span class="nt">&lt;/kind&gt;</span> <span class="c">&lt;!-- string --&gt;</span>
    <span class="nt">&lt;lease_duration&gt;</span>
        <span class="c">&lt;!-- DURATION --&gt;</span>
    <span class="nt">&lt;/lease_duration&gt;</span>
    <span class="nt">&lt;announcement_period&gt;</span>
        <span class="c">&lt;!-- DURATION --&gt;</span>
    <span class="nt">&lt;/announcement_period&gt;</span>
<span class="nt">&lt;/liveliness&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="31%" />
<col width="25%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;kind&gt;</span></code></td>
<td>Specifies how
to manage liveliness.</td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">AUTOMATIC</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">MANUAL_BY_TOPIC</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">MANUAL_BY_TOPIC</span></code></td>
<td><code class="xref py py-class docutils literal notranslate"><span class="pre">AUTOMATIC</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;leaseDuration&gt;</span></code></td>
<td>Amount of time that the remote
RTPSParticipants should consider
this RTPSParticipant to be alive
since the last message.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>130 s</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;announcement_period&gt;</span></code></td>
<td>The period to send its Discovery
Message to all other
discovered RTPSParticipants as
well as to all Multicast ports.</td>
<td><a class="reference internal" href="#durationtype"><span class="std std-ref">DurationType</span></a></td>
<td>40 s</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="throughput-configuration">
<span id="throughput"></span><h4>Throughput Configuration<a class="headerlink" href="#throughput-configuration" title="Permalink to this headline">¶</a></h4>
<p>Throughput Configuration allows to limit the output bandwidth.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="56%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Values</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">&lt;bytesPerPeriod&gt;</span></code></td>
<td>Packet size in bytes that this controller will allow in
a given period.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>4294967295</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">&lt;periodMillisecs&gt;</span></code></td>
<td>Window of time in which no more than <code class="docutils literal notranslate"><span class="pre">&lt;bytesPerPeriod&gt;</span></code>
bytes are allowed.</td>
<td><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="example">
<span id="examplexml"></span><h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>In this section, there is a full XML example with all possible configuration.
It can be used as a quick reference, but it may not be valid due to incompatibility or exclusive properties.
Don’t take it as a working example.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;transport_descriptors&gt;</span>
        <span class="nt">&lt;transport_descriptor&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>ExampleTransportId1<span class="nt">&lt;/transport_id&gt;</span>
            <span class="nt">&lt;type&gt;</span>TCPv4<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;sendBufferSize&gt;</span>8192<span class="nt">&lt;/sendBufferSize&gt;</span>
            <span class="nt">&lt;receiveBufferSize&gt;</span>8192<span class="nt">&lt;/receiveBufferSize&gt;</span>
            <span class="nt">&lt;TTL&gt;</span>250<span class="nt">&lt;/TTL&gt;</span>
            <span class="nt">&lt;maxMessageSize&gt;</span>16384<span class="nt">&lt;/maxMessageSize&gt;</span>
            <span class="nt">&lt;maxInitialPeersRange&gt;</span>100<span class="nt">&lt;/maxInitialPeersRange&gt;</span>
            <span class="nt">&lt;interfaceWhiteList&gt;</span>
                <span class="nt">&lt;id&gt;</span>192.168.1.41<span class="nt">&lt;/id&gt;</span>
                <span class="nt">&lt;id&gt;</span>127.0.0.1<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;/interfaceWhiteList&gt;</span>
            <span class="nt">&lt;wan_addr&gt;</span>80.80.55.44<span class="nt">&lt;/wan_addr&gt;</span>
            <span class="nt">&lt;keep_alive_frequency_ms&gt;</span>5000<span class="nt">&lt;/keep_alive_frequency_ms&gt;</span>
            <span class="nt">&lt;keep_alive_timeout_ms&gt;</span>25000<span class="nt">&lt;/keep_alive_timeout_ms&gt;</span>
            <span class="nt">&lt;max_logical_port&gt;</span>200<span class="nt">&lt;/max_logical_port&gt;</span>
            <span class="nt">&lt;logical_port_range&gt;</span>20<span class="nt">&lt;/logical_port_range&gt;</span>
            <span class="nt">&lt;logical_port_increment&gt;</span>2<span class="nt">&lt;/logical_port_increment&gt;</span>
            <span class="nt">&lt;listening_ports&gt;</span>
                <span class="nt">&lt;port&gt;</span>5100<span class="nt">&lt;/port&gt;</span>
                <span class="nt">&lt;port&gt;</span>5200<span class="nt">&lt;/port&gt;</span>
            <span class="nt">&lt;/listening_ports&gt;</span>
        <span class="nt">&lt;/transport_descriptor&gt;</span>
        <span class="nt">&lt;transport_descriptor&gt;</span>
            <span class="nt">&lt;transport_id&gt;</span>ExampleTransportId2<span class="nt">&lt;/transport_id&gt;</span>
            <span class="nt">&lt;type&gt;</span>UDPv6<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/transport_descriptor&gt;</span>
    <span class="nt">&lt;/transport_descriptors&gt;</span>

    <span class="nt">&lt;types&gt;</span>
        <span class="nt">&lt;type&gt;</span> <span class="c">&lt;!-- Types can be defined in its own type of tag or sharing the same tag --&gt;</span>
            <span class="nt">&lt;enum</span> <span class="na">name=</span><span class="s">&quot;MyAloneEnumType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;A&quot;</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;B&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;C&quot;</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/enum&gt;</span>
        <span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;type&gt;</span>
            <span class="nt">&lt;enum</span> <span class="na">name=</span><span class="s">&quot;MyEnumType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;A&quot;</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;B&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;enumerator</span> <span class="na">name=</span><span class="s">&quot;C&quot;</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/enum&gt;</span>

            <span class="nt">&lt;typedef</span> <span class="na">name=</span><span class="s">&quot;MyAlias1&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;MyEnumType&quot;</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;typedef</span> <span class="na">name=</span><span class="s">&quot;MyAlias2&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span> <span class="na">arrayDimensions=</span><span class="s">&quot;2,2&quot;</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;MyStruct1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;first&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;second&quot;</span> <span class="na">type=</span><span class="s">&quot;int64&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/struct&gt;</span>

            <span class="nt">&lt;union</span> <span class="na">name=</span><span class="s">&quot;MyUnion1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;discriminator</span> <span class="na">type=</span><span class="s">&quot;byte&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;case&gt;</span>
                    <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;first&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/case&gt;</span>
                <span class="nt">&lt;case&gt;</span>
                    <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;second&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;MyStruct&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/case&gt;</span>
                <span class="nt">&lt;case&gt;</span>
                    <span class="nt">&lt;caseDiscriminator</span> <span class="na">value=</span><span class="s">&quot;default&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;third&quot;</span> <span class="na">type=</span><span class="s">&quot;int64&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/case&gt;</span>
            <span class="nt">&lt;/union&gt;</span>

            <span class="c">&lt;!-- All possible members struct type --&gt;</span>
            <span class="nt">&lt;struct</span> <span class="na">name=</span><span class="s">&quot;MyFullStruct&quot;</span><span class="nt">&gt;</span>
                <span class="c">&lt;!-- Primitives &amp; basic --&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_bool&quot;</span> <span class="na">type=</span><span class="s">&quot;boolean&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_byte&quot;</span> <span class="na">type=</span><span class="s">&quot;byte&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_char&quot;</span> <span class="na">type=</span><span class="s">&quot;char8&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_wchar&quot;</span> <span class="na">type=</span><span class="s">&quot;char16&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_short&quot;</span> <span class="na">type=</span><span class="s">&quot;int16&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_long&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_longlong&quot;</span> <span class="na">type=</span><span class="s">&quot;int64&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_unsignedshort&quot;</span> <span class="na">type=</span><span class="s">&quot;uint16&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_unsignedlong&quot;</span> <span class="na">type=</span><span class="s">&quot;uint32&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_unsignedlonglong&quot;</span> <span class="na">type=</span><span class="s">&quot;uint64&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_float&quot;</span> <span class="na">type=</span><span class="s">&quot;float32&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_double&quot;</span> <span class="na">type=</span><span class="s">&quot;float64&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_longdouble&quot;</span> <span class="na">type=</span><span class="s">&quot;float128&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_string&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_wstring&quot;</span> <span class="na">type=</span><span class="s">&quot;wstring&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_boundedString&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">stringMaxLength=</span><span class="s">&quot;41925&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_boundedWString&quot;</span> <span class="na">type=</span><span class="s">&quot;wstring&quot;</span> <span class="na">stringMaxLength=</span><span class="s">&quot;41925&quot;</span><span class="nt">/&gt;</span>

                <span class="c">&lt;!-- long long_array[2][3][4]; --&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;long_array&quot;</span> <span class="na">arrayDimensions=</span><span class="s">&quot;2,3,4&quot;</span> <span class="na">type=</span><span class="s">&quot;int32&quot;</span><span class="nt">/&gt;</span>

                <span class="c">&lt;!-- map&lt;long,map&lt;long,long,2&gt;,2&gt; my_map_map; --&gt;</span>
                <span class="c">&lt;!--&gt;</span>
<span class="c">                &lt;typdefe name=&quot;my_map_inner&quot; type=&quot;int32&quot; key_type=&quot;int32&quot; mapMaxLength=&quot;2&quot;/&gt;</span>
<span class="c">                &lt;--&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_map_map&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;my_map_inner&quot;</span> <span class="na">key_type=</span><span class="s">&quot;int32&quot;</span> <span class="na">mapMaxLength=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>

                <span class="c">&lt;!-- Complex types --&gt;</span>
                <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;my_other_struct&quot;</span> <span class="na">type=</span><span class="s">&quot;nonBasic&quot;</span> <span class="na">nonBasicTypeName=</span><span class="s">&quot;OtherStruct&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/struct&gt;</span>
        <span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/types&gt;</span>

    <span class="nt">&lt;participant</span> <span class="na">profile_name=</span><span class="s">&quot;part_profile_example&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;rtps&gt;</span>
            <span class="nt">&lt;name&gt;</span>Participant Name<span class="nt">&lt;/name&gt;</span> <span class="c">&lt;!-- String --&gt;</span>

            <span class="nt">&lt;defaultUnicastLocatorList&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;udpv4&gt;</span>
                        <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                        <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                        <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/udpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;tcpv4&gt;</span>
                        <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                        <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                        <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                        <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                        <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                        <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/tcpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;udpv6&gt;</span>
                        <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                        <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/udpv6&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;/defaultUnicastLocatorList&gt;</span>

            <span class="nt">&lt;defaultMulticastLocatorList&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;udpv4&gt;</span>
                        <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                        <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                        <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/udpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;tcpv4&gt;</span>
                        <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                        <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                        <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                        <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                        <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                        <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/tcpv4&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;locator&gt;</span>
                    <span class="nt">&lt;udpv6&gt;</span>
                        <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                        <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                    <span class="nt">&lt;/udpv6&gt;</span>
                <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;/defaultMulticastLocatorList&gt;</span>

            <span class="nt">&lt;sendSocketBufferSize&gt;</span>8192<span class="nt">&lt;/sendSocketBufferSize&gt;</span>

            <span class="nt">&lt;listenSocketBufferSize&gt;</span>8192<span class="nt">&lt;/listenSocketBufferSize&gt;</span>

            <span class="nt">&lt;builtin&gt;</span>
                <span class="nt">&lt;use_SIMPLE_RTPS_PDP&gt;</span>false<span class="nt">&lt;/use_SIMPLE_RTPS_PDP&gt;</span>

                <span class="nt">&lt;use_WriterLivelinessProtocol&gt;</span>false<span class="nt">&lt;/use_WriterLivelinessProtocol&gt;</span>

                <span class="nt">&lt;EDP&gt;</span>SIMPLE<span class="nt">&lt;/EDP&gt;</span>

                <span class="nt">&lt;domainId&gt;</span>4<span class="nt">&lt;/domainId&gt;</span>

                <span class="nt">&lt;leaseDuration&gt;</span>INFINITE<span class="nt">&lt;/leaseDuration&gt;</span>

                <span class="nt">&lt;leaseAnnouncement&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/leaseAnnouncement&gt;</span>

                <span class="nt">&lt;simpleEDP&gt;</span>
                    <span class="nt">&lt;PUBWRITER_SUBREADER&gt;</span>true<span class="nt">&lt;/PUBWRITER_SUBREADER&gt;</span>
                    <span class="nt">&lt;PUBREADER_SUBWRITER&gt;</span>true<span class="nt">&lt;/PUBREADER_SUBWRITER&gt;</span>
                <span class="nt">&lt;/simpleEDP&gt;</span>

                <span class="nt">&lt;metatrafficUnicastLocatorList&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;udpv4&gt;</span>
                            <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/udpv4&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;tcpv4&gt;</span>
                            <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                            <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                            <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                            <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/tcpv4&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;udpv6&gt;</span>
                            <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/udpv6&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;/metatrafficUnicastLocatorList&gt;</span>

                <span class="nt">&lt;metatrafficMulticastLocatorList&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;udpv4&gt;</span>
                            <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/udpv4&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;tcpv4&gt;</span>
                            <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                            <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                            <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                            <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/tcpv4&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;udpv6&gt;</span>
                            <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/udpv6&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;/metatrafficMulticastLocatorList&gt;</span>

                <span class="nt">&lt;initialPeersList&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;udpv4&gt;</span>
                            <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/udpv4&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;tcpv4&gt;</span>
                            <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                            <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                            <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                            <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                            <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/tcpv4&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                    <span class="nt">&lt;locator&gt;</span>
                        <span class="nt">&lt;udpv6&gt;</span>
                            <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                            <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                        <span class="nt">&lt;/udpv6&gt;</span>
                    <span class="nt">&lt;/locator&gt;</span>
                <span class="nt">&lt;/initialPeersList&gt;</span>

                <span class="nt">&lt;staticEndpointXMLFilename&gt;</span>filename.xml<span class="nt">&lt;/staticEndpointXMLFilename&gt;</span>

                <span class="nt">&lt;readerHistoryMemoryPolicy&gt;</span>PREALLOCATED_WITH_REALLOC<span class="nt">&lt;/readerHistoryMemoryPolicy&gt;</span>

                <span class="nt">&lt;writerHistoryMemoryPolicy&gt;</span>PREALLOCATED<span class="nt">&lt;/writerHistoryMemoryPolicy&gt;</span>
            <span class="nt">&lt;/builtin&gt;</span>

            <span class="nt">&lt;port&gt;</span>
                <span class="nt">&lt;portBase&gt;</span>7400<span class="nt">&lt;/portBase&gt;</span>
                <span class="nt">&lt;domainIDGain&gt;</span>200<span class="nt">&lt;/domainIDGain&gt;</span>
                <span class="nt">&lt;participantIDGain&gt;</span>10<span class="nt">&lt;/participantIDGain&gt;</span>
                <span class="nt">&lt;offsetd0&gt;</span>0<span class="nt">&lt;/offsetd0&gt;</span>
                <span class="nt">&lt;offsetd1&gt;</span>1<span class="nt">&lt;/offsetd1&gt;</span>
                <span class="nt">&lt;offsetd2&gt;</span>2<span class="nt">&lt;/offsetd2&gt;</span>
                <span class="nt">&lt;offsetd3&gt;</span>3<span class="nt">&lt;/offsetd3&gt;</span>
            <span class="nt">&lt;/port&gt;</span>

            <span class="nt">&lt;participantID&gt;</span>99<span class="nt">&lt;/participantID&gt;</span>

            <span class="nt">&lt;throughputController&gt;</span>
                <span class="nt">&lt;bytesPerPeriod&gt;</span>8192<span class="nt">&lt;/bytesPerPeriod&gt;</span>
                <span class="nt">&lt;periodMillisecs&gt;</span>1000<span class="nt">&lt;/periodMillisecs&gt;</span>
            <span class="nt">&lt;/throughputController&gt;</span>

            <span class="nt">&lt;userTransports&gt;</span>
                <span class="nt">&lt;transport_id&gt;</span>TransportId1<span class="nt">&lt;/transport_id&gt;</span>
                <span class="nt">&lt;transport_id&gt;</span>TransportId2<span class="nt">&lt;/transport_id&gt;</span>
            <span class="nt">&lt;/userTransports&gt;</span>

            <span class="nt">&lt;useBuiltinTransports&gt;</span>false<span class="nt">&lt;/useBuiltinTransports&gt;</span>

            <span class="nt">&lt;propertiesPolicy&gt;</span>
                <span class="nt">&lt;properties&gt;</span>
                    <span class="nt">&lt;property&gt;</span>
                        <span class="nt">&lt;name&gt;</span>Property1Name<span class="nt">&lt;/name&gt;</span>
                        <span class="nt">&lt;value&gt;</span>Property1Value<span class="nt">&lt;/value&gt;</span>
                        <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span>
                    <span class="nt">&lt;/property&gt;</span>
                    <span class="nt">&lt;property&gt;</span>
                        <span class="nt">&lt;name&gt;</span>Property2Name<span class="nt">&lt;/name&gt;</span>
                        <span class="nt">&lt;value&gt;</span>Property2Value<span class="nt">&lt;/value&gt;</span>
                        <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span>
                    <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;/properties&gt;</span>
            <span class="nt">&lt;/propertiesPolicy&gt;</span>
        <span class="nt">&lt;/rtps&gt;</span>
    <span class="nt">&lt;/participant&gt;</span>

    <span class="nt">&lt;publisher</span> <span class="na">profile_name=</span><span class="s">&quot;pub_profile_example&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;topic&gt;</span>
            <span class="nt">&lt;kind&gt;</span>WITH_KEY<span class="nt">&lt;/kind&gt;</span>
            <span class="nt">&lt;name&gt;</span>TopicName<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;dataType&gt;</span>TopicDataTypeName<span class="nt">&lt;/dataType&gt;</span>
            <span class="nt">&lt;historyQos&gt;</span>
                <span class="nt">&lt;kind&gt;</span>KEEP_LAST<span class="nt">&lt;/kind&gt;</span>
                <span class="nt">&lt;depth&gt;</span>20<span class="nt">&lt;/depth&gt;</span>
            <span class="nt">&lt;/historyQos&gt;</span>
            <span class="nt">&lt;resourceLimitsQos&gt;</span>
                <span class="nt">&lt;max_samples&gt;</span>5<span class="nt">&lt;/max_samples&gt;</span>
                <span class="nt">&lt;max_instances&gt;</span>2<span class="nt">&lt;/max_instances&gt;</span>
                <span class="nt">&lt;max_samples_per_instance&gt;</span>1<span class="nt">&lt;/max_samples_per_instance&gt;</span>
                <span class="nt">&lt;allocated_samples&gt;</span>20<span class="nt">&lt;/allocated_samples&gt;</span>
            <span class="nt">&lt;/resourceLimitsQos&gt;</span>
        <span class="nt">&lt;/topic&gt;</span>

        <span class="nt">&lt;qos&gt;</span> <span class="c">&lt;!-- writerQosPoliciesType --&gt;</span>
            <span class="nt">&lt;durability&gt;</span>
                <span class="nt">&lt;kind&gt;</span>VOLATILE<span class="nt">&lt;/kind&gt;</span>
            <span class="nt">&lt;/durability&gt;</span>
            <span class="nt">&lt;liveliness&gt;</span>
                <span class="nt">&lt;kind&gt;</span>AUTOMATIC<span class="nt">&lt;/kind&gt;</span>
                <span class="nt">&lt;lease_duration&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/lease_duration&gt;</span>
                <span class="nt">&lt;announcement_period&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/announcement_period&gt;</span>
            <span class="nt">&lt;/liveliness&gt;</span>
            <span class="nt">&lt;reliability&gt;</span>
                <span class="nt">&lt;kind&gt;</span>BEST_EFFORT<span class="nt">&lt;/kind&gt;</span>
                <span class="nt">&lt;max_blocking_time&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/max_blocking_time&gt;</span>
            <span class="nt">&lt;/reliability&gt;</span>
            <span class="nt">&lt;partition&gt;</span>
                <span class="nt">&lt;names&gt;</span>
                    <span class="nt">&lt;name&gt;</span>part1<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;name&gt;</span>part2<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;/names&gt;</span>
            <span class="nt">&lt;/partition&gt;</span>
            <span class="nt">&lt;publishMode&gt;</span>
                <span class="nt">&lt;kind&gt;</span>ASYNCHRONOUS<span class="nt">&lt;/kind&gt;</span>
            <span class="nt">&lt;/publishMode&gt;</span>
        <span class="nt">&lt;/qos&gt;</span>

        <span class="nt">&lt;times&gt;</span>
            <span class="nt">&lt;initialHeartbeatDelay&gt;</span>
                <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
            <span class="nt">&lt;/initialHeartbeatDelay&gt;</span>
            <span class="nt">&lt;heartbeatPeriod&gt;</span>
                <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
            <span class="nt">&lt;/heartbeatPeriod&gt;</span>
            <span class="nt">&lt;nackResponseDelay&gt;</span>
                <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
            <span class="nt">&lt;/nackResponseDelay&gt;</span>
            <span class="nt">&lt;nackSupressionDuration&gt;</span>
                <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
            <span class="nt">&lt;/nackSupressionDuration&gt;</span>
        <span class="nt">&lt;/times&gt;</span>

        <span class="nt">&lt;unicastLocatorList&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv4&gt;</span>
                    <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;tcpv4&gt;</span>
                    <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                    <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                    <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/tcpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv6&gt;</span>
                    <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv6&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
        <span class="nt">&lt;/unicastLocatorList&gt;</span>

        <span class="nt">&lt;multicastLocatorList&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv4&gt;</span>
                    <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;tcpv4&gt;</span>
                    <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                    <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                    <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/tcpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv6&gt;</span>
                    <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv6&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
        <span class="nt">&lt;/multicastLocatorList&gt;</span>

        <span class="nt">&lt;throughputController&gt;</span>
            <span class="nt">&lt;bytesPerPeriod&gt;</span>8192<span class="nt">&lt;/bytesPerPeriod&gt;</span>
            <span class="nt">&lt;periodMillisecs&gt;</span>1000<span class="nt">&lt;/periodMillisecs&gt;</span>
        <span class="nt">&lt;/throughputController&gt;</span>

        <span class="nt">&lt;historyMemoryPolicy&gt;</span>DYNAMIC<span class="nt">&lt;/historyMemoryPolicy&gt;</span>

        <span class="nt">&lt;propertiesPolicy&gt;</span>
            <span class="nt">&lt;properties&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>Property1Name<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>Property1Value<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>Property2Name<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>Property2Value<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;/properties&gt;</span>
        <span class="nt">&lt;/propertiesPolicy&gt;</span>

        <span class="nt">&lt;userDefinedID&gt;</span>45<span class="nt">&lt;/userDefinedID&gt;</span>

        <span class="nt">&lt;entityID&gt;</span>76<span class="nt">&lt;/entityID&gt;</span>
    <span class="nt">&lt;/publisher&gt;</span>

    <span class="nt">&lt;subscriber</span> <span class="na">profile_name=</span><span class="s">&quot;sub_profile_example&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;topic&gt;</span>
            <span class="nt">&lt;kind&gt;</span>WITH_KEY<span class="nt">&lt;/kind&gt;</span>
            <span class="nt">&lt;name&gt;</span>TopicName<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;dataType&gt;</span>TopicDataTypeName<span class="nt">&lt;/dataType&gt;</span>
            <span class="nt">&lt;historyQos&gt;</span>
                <span class="nt">&lt;kind&gt;</span>KEEP_LAST<span class="nt">&lt;/kind&gt;</span>
                <span class="nt">&lt;depth&gt;</span>20<span class="nt">&lt;/depth&gt;</span>
            <span class="nt">&lt;/historyQos&gt;</span>
            <span class="nt">&lt;resourceLimitsQos&gt;</span>
                <span class="nt">&lt;max_samples&gt;</span>5<span class="nt">&lt;/max_samples&gt;</span>
                <span class="nt">&lt;max_instances&gt;</span>2<span class="nt">&lt;/max_instances&gt;</span>
                <span class="nt">&lt;max_samples_per_instance&gt;</span>1<span class="nt">&lt;/max_samples_per_instance&gt;</span>
                <span class="nt">&lt;allocated_samples&gt;</span>20<span class="nt">&lt;/allocated_samples&gt;</span>
            <span class="nt">&lt;/resourceLimitsQos&gt;</span>
        <span class="nt">&lt;/topic&gt;</span>

        <span class="nt">&lt;qos&gt;</span>
            <span class="nt">&lt;durability&gt;</span>
                <span class="nt">&lt;kind&gt;</span>PERSISTENT<span class="nt">&lt;/kind&gt;</span>
            <span class="nt">&lt;/durability&gt;</span>
            <span class="nt">&lt;liveliness&gt;</span>
                <span class="nt">&lt;kind&gt;</span>MANUAL_BY_PARTICIPANT<span class="nt">&lt;/kind&gt;</span>
                <span class="nt">&lt;lease_duration&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/lease_duration&gt;</span>
                <span class="nt">&lt;announcement_period&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/announcement_period&gt;</span>
            <span class="nt">&lt;/liveliness&gt;</span>
            <span class="nt">&lt;reliability&gt;</span>
                <span class="nt">&lt;kind&gt;</span>BEST_EFFORT<span class="nt">&lt;/kind&gt;</span>
                <span class="nt">&lt;max_blocking_time&gt;</span>
                    <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                    <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
                <span class="nt">&lt;/max_blocking_time&gt;</span>
            <span class="nt">&lt;/reliability&gt;</span>
            <span class="nt">&lt;partition&gt;</span>
                <span class="nt">&lt;names&gt;</span>
                    <span class="nt">&lt;name&gt;</span>part1<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;name&gt;</span>part2<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;/names&gt;</span>
            <span class="nt">&lt;/partition&gt;</span>
        <span class="nt">&lt;/qos&gt;</span>

        <span class="nt">&lt;times&gt;</span>
            <span class="nt">&lt;initialAcknackDelay&gt;</span>
                <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
            <span class="nt">&lt;/initialAcknackDelay&gt;</span>
            <span class="nt">&lt;heartbeatResponseDelay&gt;</span>
                <span class="nt">&lt;sec&gt;</span>1<span class="nt">&lt;/sec&gt;</span>
                <span class="nt">&lt;fraction&gt;</span>856000<span class="nt">&lt;/fraction&gt;</span>
            <span class="nt">&lt;/heartbeatResponseDelay&gt;</span>
        <span class="nt">&lt;/times&gt;</span>

        <span class="nt">&lt;unicastLocatorList&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv4&gt;</span>
                    <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;tcpv4&gt;</span>
                    <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                    <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                    <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/tcpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv6&gt;</span>
                    <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv6&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
        <span class="nt">&lt;/unicastLocatorList&gt;</span>

        <span class="nt">&lt;multicastLocatorList&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv4&gt;</span>
                    <span class="c">&lt;!-- Access as physical, like UDP --&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.41<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;tcpv4&gt;</span>
                    <span class="c">&lt;!-- Both physical and logical (port), like TCP --&gt;</span>
                    <span class="nt">&lt;physical_port&gt;</span>5100<span class="nt">&lt;/physical_port&gt;</span>
                    <span class="nt">&lt;port&gt;</span>7400<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;unique_lan_id&gt;</span>192.168.1.1.1.1.2.55<span class="nt">&lt;/unique_lan_id&gt;</span>
                    <span class="nt">&lt;wan_address&gt;</span>80.80.99.45<span class="nt">&lt;/wan_address&gt;</span>
                    <span class="nt">&lt;address&gt;</span>192.168.1.55<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/tcpv4&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
            <span class="nt">&lt;locator&gt;</span>
                <span class="nt">&lt;udpv6&gt;</span>
                    <span class="nt">&lt;port&gt;</span>8844<span class="nt">&lt;/port&gt;</span>
                    <span class="nt">&lt;address&gt;</span>::1<span class="nt">&lt;/address&gt;</span>
                <span class="nt">&lt;/udpv6&gt;</span>
            <span class="nt">&lt;/locator&gt;</span>
        <span class="nt">&lt;/multicastLocatorList&gt;</span>

        <span class="nt">&lt;expectsInlineQos&gt;</span>true<span class="nt">&lt;/expectsInlineQos&gt;</span>

        <span class="nt">&lt;historyMemoryPolicy&gt;</span>DYNAMIC<span class="nt">&lt;/historyMemoryPolicy&gt;</span>

        <span class="nt">&lt;propertiesPolicy&gt;</span>
            <span class="nt">&lt;properties&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>Property1Name<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>Property1Value<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                    <span class="nt">&lt;name&gt;</span>Property2Name<span class="nt">&lt;/name&gt;</span>
                    <span class="nt">&lt;value&gt;</span>Property2Value<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;propagate&gt;</span>false<span class="nt">&lt;/propagate&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;/properties&gt;</span>
        <span class="nt">&lt;/propertiesPolicy&gt;</span>

        <span class="nt">&lt;userDefinedID&gt;</span>55<span class="nt">&lt;/userDefinedID&gt;</span>

        <span class="nt">&lt;entityID&gt;</span>66<span class="nt">&lt;/entityID&gt;</span>
    <span class="nt">&lt;/subscriber&gt;</span>
<span class="nt">&lt;/profiles&gt;</span>
</pre></div>
</div>
</div>
</div>
<span id="document-fastrtpsgen"></span><div class="section" id="code-generation-using-fastrtpsgen">
<h2>Code generation using fastrtpsgen<a class="headerlink" href="#code-generation-using-fastrtpsgen" title="Permalink to this headline">¶</a></h2>
<p><em>eprosima Fast RTPS</em> comes with a built-in code generation tool, fastrtpsgen, which eases the process of
translating an IDL specification of a data type to a working implementation of the methods needed to create
topics, used by publishers and subscribers, of that data type.
This tool can be instructed to generate a sample application using this data type, providing a <cite>Makefile</cite> to compile it
on Linux and a Visual Studio project for Windows.</p>
<p><em>fastrtpsgen</em> can be invoked by calling fastrtpsgen on Linux or fastrtpsgen.bat on Windows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastrtpsgen</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span> <span class="o">&lt;</span><span class="n">outputdir</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">example</span> <span class="o">&lt;</span><span class="n">platform</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">replace</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">typeobject</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">IDLfile</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">IDLfile</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>The <cite>-replace</cite> argument is needed to replace the currently existing files in case the files for the IDL have been
generated previously.</p>
<p>When the <cite>-example</cite> argument is added, the tool will generate an automated example and the files to build
it for the platform currently invoked. The <cite>-help</cite> argument provides a list of currently supported Visual Studio
versions and platforms.</p>
<p>When <cite>-typeobject</cite> argument is used, the tool will generate additional files for TypeObject generation and
management.
For more information about TypeObject go to <a class="reference internal" href="index.html#dynamic-types"><span class="std std-ref">Dynamic Topic Types</span></a>.</p>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<p><em>fastrtpsgen</em> outputs the several files. Assuming the IDL file had the name <em>“Mytype”</em>, these files are:</p>
<ul class="simple">
<li>MyType.cxx/.h: Type definition.</li>
<li>MyTypePublisher.cxx/.h: Definition of the Publisher as well as of a PublisherListener.
The user must fill the needed methods for his application.</li>
<li>MyTypeSubscriber.cxx/.h: Definition of the Subscriber as well as of a SubscriberListener.
The behavior of the subscriber can be altered changing the methods implemented on these files.</li>
<li>MyTypePubSubType.cxx/.h: Serialization and Deserialization code for the type.
It also defines the <cite>getKey</cite> method in case the topic uses keys.</li>
<li>MyTypePubSubMain.cxx: The main file of the example application in case it is generated.</li>
<li><cite>Makefile</cite> or Visual Studio project files.</li>
</ul>
<p>If <cite>-typeobject</cite> was used, <cite>MyType.cxx</cite> is modified to register the TypeObject representation in the TypeObjectFactory,
and these files will be generated too:</p>
<ul class="simple">
<li>MyTypeTypeObject.cxx/.h: TypeObject representation for <cite>MyType</cite> IDL.</li>
</ul>
</div>
<div class="section" id="where-to-find-fastrtpsgen">
<h3>Where to find <em>fastrtpsgen</em><a class="headerlink" href="#where-to-find-fastrtpsgen" title="Permalink to this headline">¶</a></h3>
<p>If you are using the binary distribution of <em>eProsima Fast RTPS</em>, <em>fastrtpsgen</em> is already provided for you.
If you are building from sources, you have to compile <em>fastrtpsgen</em>.
You can find instructions in section <a class="reference internal" href="index.html#installation-from-sources"><span class="std std-ref">Installation from Sources</span></a>.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound" id="gen">
<span id="document-geninfo"></span><div class="section" id="introduction">
<span id="fastrtpsgen-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>eProsima FASTRTPSGEN is a Java application that generates source code using the data types defined in an IDL file.
This generated source code can be used in your applications in order to publish and subscribe to a topic of your defined
type.</p>
<p>To declare your structured data, you have to use IDL (Interface Definition Language) format.
IDL is a specification language, made by OMG (Object Management Group), which describes an interface in a
language-independent way, enabling communication between software components that do not share the same language.</p>
<p>eProsima FASTRTPSGEN is a tool that reads IDL files and parses a subset of the OMG IDL specification to generate
serialization source code.
This subset includes the data type descriptions included in <a class="reference internal" href="index.html#idl-types"><span class="std std-ref">Defining a data type via IDL</span></a>.
The rest of the file content is ignored.</p>
<p>eProsima FASTRTPSGEN generated source code uses <a class="reference external" href="https://github.com/eProsima/Fast-CDR">Fast CDR</a>: a C++11 library that
provides a serialization mechanism.
In this case, as indicated by the RTPS specification document, the serialization mechanism used is CDR.
The standard CDR (Common Data Representation) is a transfer syntax low-level representation for transfer between agents,
mapping from data types defined in OMG IDL to byte streams.</p>
<p>One of the main features of eProsima FASTRTPSGEN is to avoid the users the trouble of knowing anything about
serialization or deserialization procedures.
It also provides an initial implementation of a publisher and a subscriber using eProsima RTPS library.</p>
<div class="section" id="compile">
<span id="compile-fastrtpsgen"></span><h3>Compile<a class="headerlink" href="#compile" title="Permalink to this headline">¶</a></h3>
<p>In order to compile <em>fastrtpsgen</em> you first need to have <a class="reference external" href="https://gradle.org/install">gradle</a> and <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">java JDK</a> installed (please, check the JDK recommended version for the gradle version you have installed).</p>
<p>To generate <em>fastrtpsgen</em> you will need to add the argument <code class="docutils literal notranslate"><span class="pre">-DBUILD_JAVA=ON</span></code> when calling CMake.</p>
</div>
</div>
<span id="document-genuse"></span><div class="section" id="execution-and-idl-definition">
<h2>Execution and IDL Definition<a class="headerlink" href="#execution-and-idl-definition" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-publisher-subscriber-code">
<h3>Building publisher/subscriber code<a class="headerlink" href="#building-publisher-subscriber-code" title="Permalink to this headline">¶</a></h3>
<p>This section guides you through the usage of this Java application and briefly describes the generated files.</p>
<p>The Java application can be executed using the following scripts depending on if you are on Windows or Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; fastrtpsgen.bat
$ fastrtpsgen
</pre></div>
</div>
<p>The expected argument list of the application is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastrtpsgen</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">options</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">IDL</span> <span class="n">file</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">IDL</span> <span class="n">file</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>Where the option choices are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-help</td>
<td>Shows the help information.</td>
</tr>
<tr class="row-odd"><td>-version</td>
<td>Shows the current version of eProsima FASTRTPSGEN.</td>
</tr>
<tr class="row-even"><td>-d &lt;directory&gt;</td>
<td>Sets the output directory where the generated files are created.</td>
</tr>
<tr class="row-odd"><td>-I &lt;directory&gt;</td>
<td>Add directory to preprocessor include paths.</td>
</tr>
<tr class="row-even"><td>-t &lt;directory&gt;</td>
<td>Sets a specific directory as a temporary directory.</td>
</tr>
<tr class="row-odd"><td>-example &lt;platform&gt;</td>
<td>Generates an example and a solution to compile the generated source code for a specific
platform. The help command shows the supported platforms.</td>
</tr>
<tr class="row-even"><td>-replace</td>
<td>Replaces the generated source code files even if they exist.</td>
</tr>
<tr class="row-odd"><td>-ppDisable</td>
<td>Disables the preprocessor.</td>
</tr>
<tr class="row-even"><td>-ppPath</td>
<td>Specifies the preprocessor path.</td>
</tr>
<tr class="row-odd"><td>-typeobject</td>
<td>Generates <cite>TypeObject</cite> files for the IDL provided and modifies MyType constructor to
register the TypeObject representation into the factory.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>For more information about TypeObject representation read <a class="reference internal" href="index.html#dynamic-types"><span class="std std-ref">Dynamic Topic Types</span></a>.</p>
</div>
<div class="section" id="defining-a-data-type-via-idl">
<span id="idl-types"></span><h3>Defining a data type via IDL<a class="headerlink" href="#defining-a-data-type-via-idl" title="Permalink to this headline">¶</a></h3>
<p>The following table shows the basic IDL types supported by <em>fastrtpsgen</em> and how they are mapped to C++11.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="61%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">IDL</th>
<th class="head">C++11</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>char</td>
<td>char</td>
</tr>
<tr class="row-odd"><td>octet</td>
<td>uint8_t</td>
</tr>
<tr class="row-even"><td>short</td>
<td>int16_t</td>
</tr>
<tr class="row-odd"><td>unsigned short</td>
<td>uint16_t</td>
</tr>
<tr class="row-even"><td>long</td>
<td>int32_t</td>
</tr>
<tr class="row-odd"><td>unsigned long</td>
<td>uint32_t</td>
</tr>
<tr class="row-even"><td>long long</td>
<td>int64_t</td>
</tr>
<tr class="row-odd"><td>unsigned long long</td>
<td>uint64_t</td>
</tr>
<tr class="row-even"><td>float</td>
<td>float</td>
</tr>
<tr class="row-odd"><td>double</td>
<td>double</td>
</tr>
<tr class="row-even"><td>long double</td>
<td>long double</td>
</tr>
<tr class="row-odd"><td>boolean</td>
<td>bool</td>
</tr>
<tr class="row-even"><td>string</td>
<td>std::string</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="arrays">
<h4>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h4>
<p><em>fastrtpsgen</em> supports unidimensional and multidimensional arrays.
Arrays are always mapped to std::array containers.
The following table shows the array types supported and how they map.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">IDL</th>
<th class="head">C++11</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>char a[5]</td>
<td>std::array&lt;char,5&gt; a</td>
</tr>
<tr class="row-odd"><td>octet a[5]</td>
<td>std::array&lt;uint8_t,5&gt; a</td>
</tr>
<tr class="row-even"><td>short a[5]</td>
<td>std::array&lt;int16_t,5&gt; a</td>
</tr>
<tr class="row-odd"><td>unsigned short a[5]</td>
<td>std::array&lt;uint16_t,5&gt; a</td>
</tr>
<tr class="row-even"><td>long a[5]</td>
<td>std::array&lt;int32_t,5&gt; a</td>
</tr>
<tr class="row-odd"><td>unsigned long a[5]</td>
<td>std::array&lt;uint32_t,5&gt; a</td>
</tr>
<tr class="row-even"><td>long long a[5]</td>
<td>std::array&lt;int64_t,5&gt; a</td>
</tr>
<tr class="row-odd"><td>unsigned long long a[5]</td>
<td>std::array&lt;uint64_t,5&gt; a</td>
</tr>
<tr class="row-even"><td>float a[5]</td>
<td>std::array&lt;float,5&gt; a</td>
</tr>
<tr class="row-odd"><td>double a[5]</td>
<td>std::array&lt;double,5&gt; a</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="sequences">
<h4>Sequences<a class="headerlink" href="#sequences" title="Permalink to this headline">¶</a></h4>
<p><em>fastrtpsgen</em> supports sequences, which map into the STD vector container.
The following table represents how the map between IDL and C++11 is handled.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">IDL</th>
<th class="head">C++11</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sequence&lt;char&gt;</td>
<td>std::vector&lt;char&gt;</td>
</tr>
<tr class="row-odd"><td>sequence&lt;octet&gt;</td>
<td>std::vector&lt;uint8_t&gt;</td>
</tr>
<tr class="row-even"><td>sequence&lt;short&gt;</td>
<td>std::vector&lt;int16_t&gt;</td>
</tr>
<tr class="row-odd"><td>sequence&lt;unsigned short&gt;</td>
<td>std::vector&lt;uint16_t&gt;</td>
</tr>
<tr class="row-even"><td>sequence&lt;long&gt;</td>
<td>std::vector&lt;int32_t&gt;</td>
</tr>
<tr class="row-odd"><td>sequence&lt;unsigned long&gt;</td>
<td>std::vector&lt;uint32_t&gt;</td>
</tr>
<tr class="row-even"><td>sequence&lt;long long&gt;</td>
<td>std::vector&lt;int64_t&gt;</td>
</tr>
<tr class="row-odd"><td>sequence&lt;unsigned long long&gt;</td>
<td>std::vector&lt;uint64_t&gt;</td>
</tr>
<tr class="row-even"><td>sequence&lt;float&gt;</td>
<td>std::vector&lt;float&gt;</td>
</tr>
<tr class="row-odd"><td>sequence&lt;double&gt;</td>
<td>std::vector&lt;double&gt;</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="structures">
<h4>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h4>
<p>You can define an IDL structure with a set of members with multiple types.
It will be converted into a C++ class with each member mapped as an attribute plus methods to <em>get</em> and <em>set</em> each
member.</p>
<p>The following IDL structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">Structure</span>
<span class="p">{</span>
    <span class="n">octet</span> <span class="n">octet_value</span><span class="p">;</span>
       <span class="n">long</span> <span class="n">long_value</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string_value</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Would be converted to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Structure</span>
<span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
   <span class="n">Structure</span><span class="p">();</span>
   <span class="o">~</span><span class="n">Structure</span><span class="p">();</span>
   <span class="n">Structure</span><span class="p">(</span><span class="n">const</span> <span class="n">Structure</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="n">Structure</span><span class="p">(</span><span class="n">Structure</span> <span class="o">&amp;&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="n">Structure</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=</span><span class="p">(</span> <span class="n">const</span> <span class="n">Structure</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="n">Structure</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Structure</span> <span class="o">&amp;&amp;</span><span class="n">x</span><span class="p">);</span>

   <span class="n">void</span> <span class="n">octet_value</span><span class="p">(</span><span class="n">uint8_t</span> <span class="n">_octet_value</span><span class="p">);</span>
   <span class="n">uint8_t</span> <span class="n">octet_value</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">uint8_t</span><span class="o">&amp;</span> <span class="n">octet_value</span><span class="p">();</span>
   <span class="n">void</span> <span class="n">long_value</span><span class="p">(</span><span class="n">int64_t</span> <span class="n">_long_value</span><span class="p">);</span>
   <span class="n">int64_t</span> <span class="n">long_value</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">int64_t</span><span class="o">&amp;</span> <span class="n">long_value</span><span class="p">();</span>
   <span class="n">void</span> <span class="n">string_value</span><span class="p">(</span><span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span>
      <span class="o">&amp;</span><span class="n">_string_value</span><span class="p">);</span>
   <span class="n">void</span> <span class="n">string_value</span><span class="p">(</span><span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="o">&amp;&amp;</span><span class="n">_string_value</span><span class="p">);</span>
   <span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">string_value</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">string_value</span><span class="p">();</span>

<span class="n">private</span><span class="p">:</span>
   <span class="n">uint8_t</span> <span class="n">m_octet_value</span><span class="p">;</span>
   <span class="n">int64_t</span> <span class="n">m_long_value</span><span class="p">;</span>
   <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="n">m_string_value</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="unions">
<h4>Unions<a class="headerlink" href="#unions" title="Permalink to this headline">¶</a></h4>
<p>In IDL, a union is defined as a sequence of members with their own types and a discriminant that specifies which member
is in use.
An IDL union type is mapped as a C++ class with access functions to the union members and the discriminant.</p>
<p>The following IDL union:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">union</span> <span class="n">Union</span> <span class="n">switch</span><span class="p">(</span><span class="n">long</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">octet</span> <span class="n">octet_value</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">long</span> <span class="n">long_value</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">3</span><span class="p">:</span>
    <span class="n">string</span> <span class="n">string_value</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Would be converted to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Union</span>
<span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
   <span class="n">Union</span><span class="p">();</span>
   <span class="o">~</span><span class="n">Union</span><span class="p">();</span>
   <span class="n">Union</span><span class="p">(</span><span class="n">const</span> <span class="n">Union</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="n">Union</span><span class="p">(</span><span class="n">Union</span> <span class="o">&amp;&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="n">Union</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="n">const</span> <span class="n">Union</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="n">Union</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Union</span> <span class="o">&amp;&amp;</span><span class="n">x</span><span class="p">);</span>

   <span class="n">void</span> <span class="n">d</span><span class="p">(</span><span class="n">int32t</span> <span class="n">__d</span><span class="p">);</span>
   <span class="n">int32_t</span> <span class="n">_d</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">int32_t</span><span class="o">&amp;</span> <span class="n">_d</span><span class="p">();</span>

   <span class="n">void</span> <span class="n">octet_value</span><span class="p">(</span><span class="n">uint8_t</span> <span class="n">_octet_value</span><span class="p">);</span>
   <span class="n">uint8_t</span> <span class="n">octet_value</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">uint8_t</span><span class="o">&amp;</span> <span class="n">octet_value</span><span class="p">();</span>
   <span class="n">void</span> <span class="n">long_value</span><span class="p">(</span><span class="n">int64_t</span> <span class="n">_long_value</span><span class="p">);</span>
   <span class="n">int64_t</span> <span class="n">long_value</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">int64_t</span><span class="o">&amp;</span> <span class="n">long_value</span><span class="p">();</span>
   <span class="n">void</span> <span class="n">string_value</span><span class="p">(</span><span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span>
      <span class="o">&amp;</span><span class="n">_string_value</span><span class="p">);</span>
   <span class="n">void</span> <span class="n">string_value</span><span class="p">(</span><span class="n">std</span><span class="p">::</span> <span class="n">string</span> <span class="o">&amp;&amp;</span><span class="n">_string_value</span><span class="p">);</span>
   <span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">string_value</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
   <span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">string_value</span><span class="p">();</span>

<span class="n">private</span><span class="p">:</span>
   <span class="n">int32_t</span> <span class="n">m__d</span><span class="p">;</span>
   <span class="n">uint8_t</span> <span class="n">m_octet_value</span><span class="p">;</span>
   <span class="n">int64_t</span> <span class="n">m_long_value</span><span class="p">;</span>
   <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="n">m_string_value</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="enumerations">
<h4>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h4>
<p>An enumeration in IDL format is a collection of identifiers that have a numeric value associated.
An IDL enumeration type is mapped directly to the corresponding C++11 enumeration definition.</p>
<p>The following IDL enumeration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="n">Enumeration</span>
<span class="p">{</span>
    <span class="n">RED</span><span class="p">,</span>
    <span class="n">GREEN</span><span class="p">,</span>
    <span class="n">BLUE</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Would be converted to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="n">Enumeration</span> <span class="p">:</span> <span class="n">uint32_t</span>
<span class="p">{</span>
    <span class="n">RED</span><span class="p">,</span>
    <span class="n">GREEN</span><span class="p">,</span>
    <span class="n">BLUE</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="keyed-types">
<h4>Keyed Types<a class="headerlink" href="#keyed-types" title="Permalink to this headline">¶</a></h4>
<p>In order to use keyed topics, the user should define some key members inside the structure.
This is achieved by writing “&#64;Key” before the members of the structure you want to use as keys.
For example in the following IDL file the <em>id</em> and <em>type</em> field would be the keys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">MyType</span>
<span class="p">{</span>
    <span class="nd">@Key</span> <span class="n">long</span> <span class="nb">id</span><span class="p">;</span>
    <span class="nd">@Key</span> <span class="n">string</span> <span class="nb">type</span><span class="p">;</span>
    <span class="n">long</span> <span class="n">positionX</span><span class="p">;</span>
    <span class="n">long</span> <span class="n">positionY</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><em>fastrtpsgen</em> automatically detects these tags and correctly generates the serialization methods for the key generation
function in TopicDataType (<cite>getKey</cite>).
This function will obtain the 128-bit MD5 digest of the big-endian serialization of the Key Members.</p>
</div>
<div class="section" id="including-other-idl-files">
<h4>Including other IDL files<a class="headerlink" href="#including-other-idl-files" title="Permalink to this headline">¶</a></h4>
<p>You can include another IDL files in yours in order to use data types defined in them. <em>fastrtpsgen</em> uses a C/C++
preprocessor for this purpose, and you can use <code class="docutils literal notranslate"><span class="pre">#include</span></code> directive to include an IDL file.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;OtherFile.idl&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;AnotherFile.idl&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p>If <em>fastrtpsgen</em> doesn’t find a C/C++ preprocessor in default system paths, you could specify the preprocessor path
using parameter <code class="docutils literal notranslate"><span class="pre">-ppPath</span></code>.
If you want to disable the usage of the preprocessor, you could use the parameter <code class="docutils literal notranslate"><span class="pre">-ppDisable</span></code>.</p>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound" id="notes">
<span id="document-notes"></span><div class="section" id="version-1-7-1">
<h2>Version 1.7.1<a class="headerlink" href="#version-1-7-1" title="Permalink to this headline">¶</a></h2>
<p>This release includes the following features:</p>
<ul class="simple">
<li>LogFileConsumer added to the logging system</li>
<li>Handle FASTRTPS_DEFAULT_PROFILES_FILE environment variable indicating the default profiles XML file</li>
<li>XML parser made more restrictive and with better error messages</li>
</ul>
<p>It also fixes some important bugs:
* Fixed discovery issues related to the selected network interfaces on Windows
* Improved discovery times
* Workaround ASIO issue with multicast on QNX systems
* Improved TCP transport performance
* Improved handling of key-only data submessages</p>
<p>Some other minor bugs and performance improvements.</p>
<p><strong>Note:</strong> If you are upgrading from a version older than 1.7.0, it is <strong>required</strong> to regenerate generated source
from IDL files using <em>fastrtpsgen</em></p>
<div class="section" id="previous-versions">
<h3>Previous versions<a class="headerlink" href="#previous-versions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="version-1-7-0">
<h4>Version 1.7.0<a class="headerlink" href="#version-1-7-0" title="Permalink to this headline">¶</a></h4>
<p>This release included the following features:</p>
<ul class="simple">
<li><a class="reference internal" href="index.html#comm-transports-tcp"><span class="std std-ref">TCP Transport</span></a></li>
<li><a class="reference internal" href="index.html#dynamic-types"><span class="std std-ref">Dynamic Topic Types</span></a></li>
<li>Security 1.1 compliance</li>
</ul>
<p>Also bug fixing, allocation and performance improvements.</p>
<p><strong>Note:</strong> If you are upgrading from an older version, it is <strong>required</strong> to regenerate generated source from IDL files
using <em>fastrtpsgen</em></p>
</div>
<div class="section" id="version-1-6-0">
<h4>Version 1.6.0<a class="headerlink" href="#version-1-6-0" title="Permalink to this headline">¶</a></h4>
<p>This release included the following features:</p>
<ul class="simple">
<li><a class="reference internal" href="index.html#persistence"><span class="std std-ref">Persistence</span></a></li>
<li>Security access control plugin API and builtin <a class="reference internal" href="index.html#access-permissions"><span class="std std-ref">Access:Permissions</span></a> plugin.</li>
</ul>
<p>Also bug fixing.</p>
<p><strong>Note:</strong> If you are upgrading from an older version than 1.4.0, it is advisable to regenerate generated source from IDL
files using <em>fastrtpsgen</em></p>
</div>
<div class="section" id="version-1-5-0">
<h4>Version 1.5.0<a class="headerlink" href="#version-1-5-0" title="Permalink to this headline">¶</a></h4>
<p>This release included the following features:</p>
<ul class="simple">
<li>Configuration of Fast RTPS entities through XML profiles.</li>
<li>Added heartbeat piggyback support.</li>
</ul>
<p>Also bug fixing.</p>
<p><strong>Note:</strong> If you are upgrading from an older version than 1.4.0, it is advisable to regenerate generated source from IDL
files using <em>fastrtpsgen</em></p>
</div>
<div class="section" id="version-1-4-0">
<h4>Version 1.4.0<a class="headerlink" href="#version-1-4-0" title="Permalink to this headline">¶</a></h4>
<p>This release included the following:</p>
<ul class="simple">
<li>Added secure communications.</li>
<li>Removed all Boost dependencies. Fast RTPS is not using Boost libraries anymore.</li>
<li>Added compatibility with Android.</li>
<li>Bug fixing.</li>
</ul>
<p><strong>Note:</strong> After upgrading to this release, it is advisable to regenerate generated source from IDL files using
<em>fastrtpsgen</em></p>
</div>
<div class="section" id="version-1-3-1">
<h4>Version 1.3.1<a class="headerlink" href="#version-1-3-1" title="Permalink to this headline">¶</a></h4>
<p>This release included the following:</p>
<ul class="simple">
<li>New examples that illustrate how to tweak Fast RTPS towards different applications.</li>
<li>Improved support for embedded Linux.</li>
<li>Bug fixing.</li>
</ul>
</div>
<div class="section" id="version-1-3-0">
<h4>Version 1.3.0<a class="headerlink" href="#version-1-3-0" title="Permalink to this headline">¶</a></h4>
<p>This release introduced several new features:</p>
<ul class="simple">
<li>Unbound Arrays support: Now you can send variable size data arrays.</li>
<li>Extended Fragmentation Configuration: It allows you to setup a Message/Fragment max size different to the standard
64Kb limit.</li>
<li>Improved logging system: Get even more introspection about the status of your communications system.</li>
<li>Static Discovery: Use XML to map your network and keep discovery traffic to a minimum.</li>
<li>Stability and performance improvements: A new iteration of our built-in performance tests will make benchmarking
easier for you.</li>
<li>ReadTheDocs Support: We improved our documentation format and now our installation and user manuals are available
online on ReadTheDocs.</li>
</ul>
</div>
<div class="section" id="version-1-2-0">
<h4>Version 1.2.0<a class="headerlink" href="#version-1-2-0" title="Permalink to this headline">¶</a></h4>
<p>This release introduced two important new features:</p>
<ul class="simple">
<li>Flow Controllers: A mechanism to control how you use the available bandwidth avoiding data bursts.
The controllers allow you to specify the maximum amount of data to be sent in a specific period of time.
This is very useful when you are sending large messages requiring fragmentation.</li>
<li>Discovery Listeners: Now the user can subscribe to the discovery information to know the entities present in the
network (Topics, Publishers &amp; Subscribers) dynamically without prior knowledge of the system.
This enables the creation of generic tools to inspect your system.</li>
</ul>
<p>But there is more:</p>
<ul class="simple">
<li>Full ROS2 Support: Fast RTPS is used by ROS2, the upcoming release of the Robot Operating System (ROS).</li>
<li>Better documentation: More content and examples.</li>
<li>Improved performance.</li>
<li>Bug fixing.</li>
</ul>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, eProsima
      
        <span class="commit">
          Revision <code>8a562d9a</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/v1.7.1/">v1.7.1</a></dd>
        
          <dd><a href="/en/v1.7.0/">v1.7.0</a></dd>
        
          <dd><a href="/en/v1.6.0/">v1.6.0</a></dd>
        
          <dd><a href="/en/1.5.0/">1.5.0</a></dd>
        
          <dd><a href="/en/1.3.1/">1.3.1</a></dd>
        
          <dd><a href="/en/fiware/">fiware</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/eprosima-fast-rtps/downloads/pdf/latest/">pdf</a></dd>
        
          <dd><a href="//readthedocs.org/projects/eprosima-fast-rtps/downloads/htmlzip/latest/">htmlzip</a></dd>
        
          <dd><a href="//readthedocs.org/projects/eprosima-fast-rtps/downloads/epub/latest/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/eprosima-fast-rtps/?fromdocs=eprosima-fast-rtps">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/eprosima-fast-rtps/?fromdocs=eprosima-fast-rtps">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>